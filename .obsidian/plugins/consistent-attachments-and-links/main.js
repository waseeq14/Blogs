/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

(function initCjs() {
  const globalThisRecord = globalThis;
  globalThisRecord["__name"] ??= name;
  const originalRequire = require;
  if (originalRequire && !originalRequire.__isPatched) {
    require = Object.assign(
      (id) => requirePatched(id),
      originalRequire,
      {
        __isPatched: true
      }
    );
  }
  const newFuncs = {
    __extractDefault() {
      return extractDefault;
    },
    process() {
      const browserProcess = {
        browser: true,
        cwd() {
          return "/";
        },
        env: {},
        platform: "android"
      };
      return browserProcess;
    }
  };
  for (const key of Object.keys(newFuncs)) {
    globalThisRecord[key] ??= newFuncs[key]?.();
  }
  function name(obj) {
    return obj;
  }
  function extractDefault(module2) {
    return module2 && module2.__esModule && "default" in module2 ? module2.default : module2;
  }
  const OBSIDIAN_BUILT_IN_MODULE_NAMES = [
    "obsidian",
    "@codemirror/autocomplete",
    "@codemirror/collab",
    "@codemirror/commands",
    "@codemirror/language",
    "@codemirror/lint",
    "@codemirror/search",
    "@codemirror/state",
    "@codemirror/text",
    "@codemirror/view",
    "@lezer/common",
    "@lezer/lr",
    "@lezer/highlight"
  ];
  const DEPRECATED_OBSIDIAN_BUILT_IN_MODULE_NAMES = [
    "@codemirror/closebrackets",
    "@codemirror/comment",
    "@codemirror/fold",
    "@codemirror/gutter",
    "@codemirror/highlight",
    "@codemirror/history",
    "@codemirror/matchbrackets",
    "@codemirror/panel",
    "@codemirror/rangeset",
    "@codemirror/rectangular-selection",
    "@codemirror/stream-parser",
    "@codemirror/tooltip"
  ];
  function requirePatched(id) {
    if (OBSIDIAN_BUILT_IN_MODULE_NAMES.includes(id) || DEPRECATED_OBSIDIAN_BUILT_IN_MODULE_NAMES.includes(id)) {
      return originalRequire?.(id);
    }
    if (globalThis?.app?.isMobile) {
      if (id === "process" || id === "node:process") {
        console.debug(`The most likely you can safely ignore this error. Module not found: ${id}. Fake process object is returned instead.`);
        return globalThis.process;
      }
    } else {
      const module2 = originalRequire?.(id);
      if (module2) {
        return extractDefault(module2);
      }
    }
    console.debug(`The most likely you can safely ignore this error. Module not found: ${id}. Empty object is returned instead.`);
    return {};
  }
})();

"use strict";var uh=Object.create;var Zn=Object.defineProperty;var dh=Object.getOwnPropertyDescriptor;var ph=Object.getOwnPropertyNames;var hh=Object.getPrototypeOf,fh=Object.prototype.hasOwnProperty;var i=(t,e)=>Zn(t,"name",{value:e,configurable:!0});var st=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),zl=(t,e)=>{for(var n in e)Zn(t,n,{get:e[n],enumerable:!0})},Ul=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ph(e))!fh.call(t,o)&&o!==n&&Zn(t,o,{get:()=>e[o],enumerable:!(r=dh(e,o))||r.enumerable});return t};var cn=(t,e,n)=>(n=t!=null?uh(hh(t)):{},Ul(e||!t||!t.__esModule?Zn(n,"default",{value:t,enumerable:!0}):n,t)),mh=t=>Ul(Zn({},"__esModule",{value:!0}),t);var ec=st((gw,Zl)=>{"use strict";function ct(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}i(ct,"assertPath");function Xl(t,e){for(var n="",r=0,o=-1,s=0,a,l=0;l<=t.length;++l){if(l<t.length)a=t.charCodeAt(l);else{if(a===47)break;a=47}if(a===47){if(!(o===l-1||s===1))if(o!==l-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var c=n.lastIndexOf("/");if(c!==n.length-1){c===-1?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),o=l,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,o=l,s=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+t.slice(o+1,l):n=t.slice(o+1,l),r=l-o-1;o=l,s=0}else a===46&&s!==-1?++s:s=-1}return n}i(Xl,"normalizeStringPosix");function Ch(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}i(Ch,"_format");var dn={resolve:i(function(){for(var e="",n=!1,r,o=arguments.length-1;o>=-1&&!n;o--){var s;o>=0?s=arguments[o]:(r===void 0&&(r=process.cwd()),s=r),ct(s),s.length!==0&&(e=s+"/"+e,n=s.charCodeAt(0)===47)}return e=Xl(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},"resolve"),normalize:i(function(e){if(ct(e),e.length===0)return".";var n=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Xl(e,!n),e.length===0&&!n&&(e="."),e.length>0&&r&&(e+="/"),n?"/"+e:e},"normalize"),isAbsolute:i(function(e){return ct(e),e.length>0&&e.charCodeAt(0)===47},"isAbsolute"),join:i(function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];ct(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":dn.normalize(e)},"join"),relative:i(function(e,n){if(ct(e),ct(n),e===n||(e=dn.resolve(e),n=dn.resolve(n),e===n))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var o=e.length,s=o-r,a=1;a<n.length&&n.charCodeAt(a)===47;++a);for(var l=n.length,c=l-a,u=s<c?s:c,d=-1,p=0;p<=u;++p){if(p===u){if(c>u){if(n.charCodeAt(a+p)===47)return n.slice(a+p+1);if(p===0)return n.slice(a+p)}else s>u&&(e.charCodeAt(r+p)===47?d=p:p===0&&(d=0));break}var h=e.charCodeAt(r+p),f=n.charCodeAt(a+p);if(h!==f)break;h===47&&(d=p)}var b="";for(p=r+d+1;p<=o;++p)(p===o||e.charCodeAt(p)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+n.slice(a+d):(a+=d,n.charCodeAt(a)===47&&++a,n.slice(a))},"relative"),_makeLong:i(function(e){return e},"_makeLong"),dirname:i(function(e){if(ct(e),e.length===0)return".";for(var n=e.charCodeAt(0),r=n===47,o=-1,s=!0,a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===47){if(!s){o=a;break}}else s=!1;return o===-1?r?"/":".":r&&o===1?"//":e.slice(0,o)},"dirname"),basename:i(function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');ct(e);var r=0,o=-1,s=!0,a;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var l=n.length-1,c=-1;for(a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(u===47){if(!s){r=a+1;break}}else c===-1&&(s=!1,c=a+1),l>=0&&(u===n.charCodeAt(l)?--l===-1&&(o=a):(l=-1,o=c))}return r===o?o=c:o===-1&&(o=e.length),e.slice(r,o)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){r=a+1;break}}else o===-1&&(s=!1,o=a+1);return o===-1?"":e.slice(r,o)}},"basename"),extname:i(function(e){ct(e);for(var n=-1,r=0,o=-1,s=!0,a=0,l=e.length-1;l>=0;--l){var c=e.charCodeAt(l);if(c===47){if(!s){r=l+1;break}continue}o===-1&&(s=!1,o=l+1),c===46?n===-1?n=l:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||o===-1||a===0||a===1&&n===o-1&&n===r+1?"":e.slice(n,o)},"extname"),format:i(function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Ch("/",e)},"format"),parse:i(function(e){ct(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var r=e.charCodeAt(0),o=r===47,s;o?(n.root="/",s=1):s=0;for(var a=-1,l=0,c=-1,u=!0,d=e.length-1,p=0;d>=s;--d){if(r=e.charCodeAt(d),r===47){if(!u){l=d+1;break}continue}c===-1&&(u=!1,c=d+1),r===46?a===-1?a=d:p!==1&&(p=1):a!==-1&&(p=-1)}return a===-1||c===-1||p===0||p===1&&a===c-1&&a===l+1?c!==-1&&(l===0&&o?n.base=n.name=e.slice(1,c):n.base=n.name=e.slice(l,c)):(l===0&&o?(n.name=e.slice(1,a),n.base=e.slice(1,c)):(n.name=e.slice(l,a),n.base=e.slice(l,c)),n.ext=e.slice(a,c)),l>0?n.dir=e.slice(0,l-1):o&&(n.dir="/"),n},"parse"),sep:"/",delimiter:":",win32:null,posix:null};dn.posix=dn;Zl.exports=dn});var pc=st((qw,dc)=>{var mn=1e3,gn=mn*60,bn=gn*60,Ut=bn*24,Lh=Ut*7,Nh=Ut*365.25;dc.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return Oh(t);if(n==="number"&&isFinite(t))return e.long?Dh(t):Rh(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Oh(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*Nh;case"weeks":case"week":case"w":return n*Lh;case"days":case"day":case"d":return n*Ut;case"hours":case"hour":case"hrs":case"hr":case"h":return n*bn;case"minutes":case"minute":case"mins":case"min":case"m":return n*gn;case"seconds":case"second":case"secs":case"sec":case"s":return n*mn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}i(Oh,"parse");function Rh(t){var e=Math.abs(t);return e>=Ut?Math.round(t/Ut)+"d":e>=bn?Math.round(t/bn)+"h":e>=gn?Math.round(t/gn)+"m":e>=mn?Math.round(t/mn)+"s":t+"ms"}i(Rh,"fmtShort");function Dh(t){var e=Math.abs(t);return e>=Ut?zr(t,e,Ut,"day"):e>=bn?zr(t,e,bn,"hour"):e>=gn?zr(t,e,gn,"minute"):e>=mn?zr(t,e,mn,"second"):t+" ms"}i(Dh,"fmtLong");function zr(t,e,n,r){var o=e>=n*1.5;return Math.round(t/n)+" "+r+(o?"s":"")}i(zr,"plural")});var bs=st((Yw,hc)=>{function Bh(t){n.debug=n,n.default=n,n.coerce=c,n.disable=a,n.enable=o,n.enabled=l,n.humanize=pc(),n.destroy=u,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let p=0;for(let h=0;h<d.length;h++)p=(p<<5)-p+d.charCodeAt(h),p|=0;return n.colors[Math.abs(p)%n.colors.length]}i(e,"selectColor"),n.selectColor=e;function n(d){let p,h=null,f,b;function k(...y){if(!k.enabled)return;let w=k,C=Number(new Date),v=C-(p||C);w.diff=v,w.prev=p,w.curr=C,p=C,y[0]=n.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let P=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(A,$)=>{if(A==="%%")return"%";P++;let H=n.formatters[$];if(typeof H=="function"){let R=y[P];A=H.call(w,R),y.splice(P,1),P--}return A}),n.formatArgs.call(w,y),(w.log||n.log).apply(w,y)}return i(k,"debug"),k.namespace=d,k.useColors=n.useColors(),k.color=n.selectColor(d),k.extend=r,k.destroy=n.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:i(()=>h!==null?h:(f!==n.namespaces&&(f=n.namespaces,b=n.enabled(d)),b),"get"),set:i(y=>{h=y},"set")}),typeof n.init=="function"&&n.init(k),k}i(n,"createDebug");function r(d,p){let h=n(this.namespace+(typeof p>"u"?":":p)+d);return h.log=this.log,h}i(r,"extend");function o(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let p=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let h of p)h[0]==="-"?n.skips.push(h.slice(1)):n.names.push(h)}i(o,"enable");function s(d,p){let h=0,f=0,b=-1,k=0;for(;h<d.length;)if(f<p.length&&(p[f]===d[h]||p[f]==="*"))p[f]==="*"?(b=f,k=h,f++):(h++,f++);else if(b!==-1)f=b+1,k++,h=k;else return!1;for(;f<p.length&&p[f]==="*";)f++;return f===p.length}i(s,"matchesTemplate");function a(){let d=[...n.names,...n.skips.map(p=>"-"+p)].join(",");return n.enable(""),d}i(a,"disable");function l(d){for(let p of n.skips)if(s(d,p))return!1;for(let p of n.names)if(s(d,p))return!0;return!1}i(l,"enabled");function c(d){return d instanceof Error?d.stack||d.message:d}i(c,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i(u,"destroy"),n.enable(n.load()),n}i(Bh,"setup");hc.exports=Bh});var fc=st((Le,Ur)=>{Le.formatArgs=$h;Le.save=Vh;Le.load=zh;Le.useColors=_h;Le.storage=Uh();Le.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Le.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function _h(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}i(_h,"useColors");function $h(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Ur.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(n++,o==="%c"&&(r=n))}),t.splice(r,0,e)}i($h,"formatArgs");Le.log=console.debug||console.log||(()=>{});function Vh(t){try{t?Le.storage.setItem("debug",t):Le.storage.removeItem("debug")}catch{}}i(Vh,"save");function zh(){let t;try{t=Le.storage.getItem("debug")||Le.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}i(zh,"load");function Uh(){try{return localStorage}catch{}}i(Uh,"localstorage");Ur.exports=bs()(Le);var{formatters:Wh}=Ur.exports;Wh.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var gc=st((Xw,mc)=>{"use strict";mc.exports=(t,e=process.argv)=>{let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),o=e.indexOf("--");return r!==-1&&(o===-1||r<o)}});var yc=st((Zw,wc)=>{"use strict";var Hh=require("os"),bc=require("tty"),Ge=gc(),{env:ae}=process,Wr;Ge("no-color")||Ge("no-colors")||Ge("color=false")||Ge("color=never")?Wr=0:(Ge("color")||Ge("colors")||Ge("color=true")||Ge("color=always"))&&(Wr=1);function jh(){if("FORCE_COLOR"in ae)return ae.FORCE_COLOR==="true"?1:ae.FORCE_COLOR==="false"?0:ae.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(ae.FORCE_COLOR,10),3)}i(jh,"envForceColor");function Kh(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}i(Kh,"translateLevel");function qh(t,{streamIsTTY:e,sniffFlags:n=!0}={}){let r=jh();r!==void 0&&(Wr=r);let o=n?Wr:r;if(o===0)return 0;if(n){if(Ge("color=16m")||Ge("color=full")||Ge("color=truecolor"))return 3;if(Ge("color=256"))return 2}if(t&&!e&&o===void 0)return 0;let s=o||0;if(ae.TERM==="dumb")return s;if(process.platform==="win32"){let a=Hh.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in ae)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(a=>a in ae)||ae.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in ae)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ae.TEAMCITY_VERSION)?1:0;if(ae.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ae){let a=Number.parseInt((ae.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ae.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ae.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ae.TERM)||"COLORTERM"in ae?1:s}i(qh,"supportsColor");function ws(t,e={}){let n=qh(t,{streamIsTTY:t&&t.isTTY,...e});return Kh(n)}i(ws,"getSupportLevel");wc.exports={supportsColor:ws,stdout:ws({isTTY:bc.isatty(1)}),stderr:ws({isTTY:bc.isatty(2)})}});var Ac=st((le,jr)=>{var Gh=require("tty"),Hr=require("util");le.init=tf;le.log=Xh;le.formatArgs=Jh;le.save=Zh;le.load=ef;le.useColors=Yh;le.destroy=Hr.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");le.colors=[6,2,3,4,5,1];try{let t=yc();t&&(t.stderr||t).level>=2&&(le.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}le.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,s)=>s.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function Yh(){return"colors"in le.inspectOpts?!!le.inspectOpts.colors:Gh.isatty(process.stderr.fd)}i(Yh,"useColors");function Jh(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,o="\x1B[3"+(r<8?r:"8;5;"+r),s=`  ${o};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(o+"m+"+jr.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Qh()+e+" "+t[0]}i(Jh,"formatArgs");function Qh(){return le.inspectOpts.hideDate?"":new Date().toISOString()+" "}i(Qh,"getDate");function Xh(...t){return process.stderr.write(Hr.formatWithOptions(le.inspectOpts,...t)+`
`)}i(Xh,"log");function Zh(t){t?process.env.DEBUG=t:delete process.env.DEBUG}i(Zh,"save");function ef(){return process.env.DEBUG}i(ef,"load");function tf(t){t.inspectOpts={};let e=Object.keys(le.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=le.inspectOpts[e[n]]}i(tf,"init");jr.exports=bs()(le);var{formatters:kc}=jr.exports;kc.o=function(t){return this.inspectOpts.colors=this.useColors,Hr.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};kc.O=function(t){return this.inspectOpts.colors=this.useColors,Hr.inspect(t,this.inspectOpts)}});var Cc=st((ny,ys)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?ys.exports=fc():ys.exports=Ac()});var Bc=st((Xr,Dc)=>{(function(t,e){typeof Xr=="object"&&typeof Dc<"u"?e(Xr):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.compareVersions={}))})(Xr,(function(t){"use strict";let e=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,n=i(y=>{if(typeof y!="string")throw new TypeError("Invalid argument expected string");let w=y.match(e);if(!w)throw new Error(`Invalid argument not valid semver ('${y}' received)`);return w.shift(),w},"validateAndParse"),r=i(y=>y==="*"||y==="x"||y==="X","isWildcard"),o=i(y=>{let w=parseInt(y,10);return isNaN(w)?y:w},"tryParse"),s=i((y,w)=>typeof y!=typeof w?[String(y),String(w)]:[y,w],"forceType"),a=i((y,w)=>{if(r(y)||r(w))return 0;let[C,v]=s(o(y),o(w));return C>v?1:C<v?-1:0},"compareStrings"),l=i((y,w)=>{for(let C=0;C<Math.max(y.length,w.length);C++){let v=a(y[C]||"0",w[C]||"0");if(v!==0)return v}return 0},"compareSegments"),c=i((y,w)=>{let C=n(y),v=n(w),P=C.pop(),I=v.pop(),A=l(C,v);return A!==0?A:P&&I?l(P.split("."),I.split(".")):P||I?P?-1:1:0},"compareVersions"),u=i((y,w,C)=>{h(C);let v=c(y,w);return d[C].includes(v)},"compare"),d={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},p=Object.keys(d),h=i(y=>{if(typeof y!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof y}`);if(p.indexOf(y)===-1)throw new Error(`Invalid operator, expected one of ${p.join("|")}`)},"assertValidOperator"),f=i((y,w)=>{if(w=w.replace(/([><=]+)\s+/g,"$1"),w.includes("||"))return w.split("||").some(V=>f(y,V));if(w.includes(" - ")){let[V,j]=w.split(" - ",2);return f(y,`>=${V} <=${j}`)}else if(w.includes(" "))return w.trim().replace(/\s{2,}/g," ").split(" ").every(V=>f(y,V));let C=w.match(/^([<>=~^]+)/),v=C?C[1]:"=";if(v!=="^"&&v!=="~")return u(y,w,v);let[P,I,A,,$]=n(y),[H,R,z,,de]=n(w),W=[P,I,A],T=[H,R??"x",z??"x"];if(de&&(!$||l(W,T)!==0||l($.split("."),de.split("."))===-1))return!1;let L=T.findIndex(V=>V!=="0")+1,N=v==="~"?2:L>1?L:1;return!(l(W.slice(0,N),T.slice(0,N))!==0||l(W.slice(N),T.slice(N))===-1)},"satisfies"),b=i(y=>typeof y=="string"&&/^[v\d]/.test(y)&&e.test(y),"validate"),k=i(y=>typeof y=="string"&&/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.test(y),"validateStrict");t.compare=u,t.compareVersions=c,t.satisfies=f,t.validate=b,t.validateStrict=k}))});var Dd=st((oP,Rd)=>{"use strict";var Ni=Object.prototype.hasOwnProperty,Od=Object.prototype.toString,Td=Object.defineProperty,Fd=Object.getOwnPropertyDescriptor,Id=i(function(e){return typeof Array.isArray=="function"?Array.isArray(e):Od.call(e)==="[object Array]"},"isArray"),Md=i(function(e){if(!e||Od.call(e)!=="[object Object]")return!1;var n=Ni.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Ni.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var o;for(o in e);return typeof o>"u"||Ni.call(e,o)},"isPlainObject"),Ld=i(function(e,n){Td&&n.name==="__proto__"?Td(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},"setProperty"),Nd=i(function(e,n){if(n==="__proto__")if(Ni.call(e,n)){if(Fd)return Fd(e,n).value}else return;return e[n]},"getProperty");Rd.exports=i(function t(){var e,n,r,o,s,a,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(e=arguments[c],e!=null)for(n in e)r=Nd(l,n),o=Nd(e,n),l!==o&&(d&&o&&(Md(o)||(s=Id(o)))?(s?(s=!1,a=r&&Id(r)?r:[]):a=r&&Md(r)?r:{},Ld(l,{name:n,newValue:t(d,a,o)})):typeof o<"u"&&Ld(l,{name:n,newValue:o}));return l},"extend")});var Qb={};zl(Qb,{default:()=>Jb});module.exports=mh(Qb);var De=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function _e(){}i(_e,"noop");async function at(){}i(at,"noopAsync");function er(t){return async(...e)=>{await t(...e)}}i(er,"omitAsyncReturnType");var it=require("obsidian");var gh=require("obsidian"),Hl=require("obsidian"),jl=require("obsidian"),rw=require("obsidian"),iw=require("obsidian"),yh=require("obsidian"),kh=require("obsidian"),ql=require("obsidian");var Wl=class{static{i(this,"CustomArrayDictImpl")}data=new Map;add(t,e){let n=this.get(t);n||(n=[],this.data.set(t,n)),n.includes(e)||n.push(e)}remove(t,e){let n=this.get(t);n&&(n.remove(e),n.length===0&&this.clear(t))}get(t){return this.data.get(t)||null}keys(){return Array.from(this.data.keys())}clear(t){this.data.delete(t)}clearAll(){this.data.clear()}contains(t,e){return!!this.get(t)?.contains(e)}count(){let t=0;for(let e of this.keys())t+=this.get(e)?.length??0;return t}};var He={AudioRecorder:"audio-recorder",Backlink:"backlink",Bases:"bases",Bookmarks:"bookmarks",Canvas:"canvas",CommandPalette:"command-palette",DailyNotes:"daily-notes",EditorStatus:"editor-status",FileExplorer:"file-explorer",FileRecovery:"file-recovery",Footnotes:"footnotes",GlobalSearch:"global-search",Graph:"graph",MarkdownImporter:"markdown-importer",NoteComposer:"note-composer",OutgoingLink:"outgoing-link",Outline:"outline",PagePreview:"page-preview",Properties:"properties",Publish:"publish",RandomNote:"random-note",SlashCommand:"slash-command",Slides:"slides",Switcher:"switcher",Sync:"sync",TagPane:"tag-pane",Templates:"templates",Webviewer:"webviewer",WordCount:"word-count",Workspaces:"workspaces",ZkPrefixer:"zk-prefixer"},Mr={AllProperties:"all-properties",Audio:"audio",Backlink:He.Backlink,Bases:He.Bases,Bookmarks:He.Bookmarks,Canvas:He.Canvas,Empty:"empty",FileExplorer:He.FileExplorer,FileProperties:"file-properties",Graph:He.Graph,Image:"image",LocalGraph:"localgraph",Markdown:"markdown",OutgoingLink:He.OutgoingLink,Outline:He.Outline,Pdf:"pdf",ReleaseNotes:"release-notes",Search:"search",Sync:"sync",Table:"table",Tag:"tag",Video:"video",Webviewer:"webviewer",WebviewerHistory:"webviewer-history"};function bh(){return Hl.TFile}i(bh,"getTFileConstructor");function wh(){return jl.TFolder}i(wh,"getTFolderConstructor");function je(t){return t.replace(/\/?[^\/]*$/,"")||"/"}i(je,"parentFolderPath");function Lr(t,e){let n=t.vault.getFolderByPath(e);return n||(n=new(wh())(t.vault,e),n.parent=Lr(t,je(e)),n.deleted=!0,n)}i(Lr,"createTFolderInstance");function Kl(t,e){let n=t.vault.getFileByPath(e);return n||(n=new(bh())(t.vault,e),n.parent=Lr(t,je(e)),n.deleted=!0,n)}i(Kl,"createTFileInstance");async function Gl(){return await(0,ql.loadPrism)()}i(Gl,"loadPrism");function et(t){return!!t.position}i(et,"isReferenceCache");function ve(t){return!!t.key}i(ve,"isFrontmatterLinkCache");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function tr(t,e){let n=t.length,r=0;for(let o=0;o<n;o++){if(!Object.hasOwn(t,o))continue;let s=t[o];e(s,o,t)&&(t[r++]=s)}t.length=r}i(tr,"filterInPlace");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var lt=class{static{i(this,"AsyncEvents")}eventRefsMap=new Map;off(e,n){let r=this.eventRefsMap.get(e);r&&(tr(r,o=>o.callback!==n),r.length===0&&this.eventRefsMap.delete(e))}offref(e){let n=this.eventRefsMap.get(e.name);n&&(tr(n,r=>r!==e),n.length===0&&this.eventRefsMap.delete(e.name))}on(e,n,r){let o=this.eventRefsMap.get(e);o||(o=[],this.eventRefsMap.set(e,o));let s={asyncEvents:this,callback:n,name:e,thisArg:r};return o.push(s),s}once(e,n,r){let o=this.on(e,n,r),s=this.on(e,()=>{this.offref(o),this.offref(s)});return o}trigger(e,...n){let r=this.eventRefsMap.get(e)??[];for(let o of r.slice())this.tryTrigger(o,n)}async triggerAsync(e,...n){let r=this.eventRefsMap.get(e)??[];for(let o of r.slice())await this.tryTriggerAsync(o,n)}tryTrigger(e,n){try{e.callback.apply(e.thisArg,n)}catch(r){window.setTimeout(()=>{throw r},0)}}async tryTriggerAsync(e,n){try{await e.callback.call(e.thisArg,...n)}catch(r){window.setTimeout(()=>{throw r},0)}}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var as="asyncError",Nr=new lt;Nr.on(as,Ah);var Or="An unhandled error occurred executing async operation",Jl="    at",tt=class t extends Error{static{i(this,"CustomStackTraceError")}constructor(e,n,r){super(e,{cause:r}),this.name="CustomStackTraceError",Error.captureStackTrace?.(this,t);let o=r,s=new Set;for(;o instanceof t;){if(s.has(o))throw new Error("Circular cause detected");s.add(o),o=o.cause}let a=(this.stack??"").split(`
`),l=n.split(`
`);/^\w*Error(?:: |$)/.test(l[0]??"")&&l.splice(0,1),a.splice(1,a.length-1,...l),this.stack=a.join(`
`)}},un=class t extends Error{static{i(this,"SilentError")}constructor(e){super(e),this.name="SilentError",Error.captureStackTrace?.(this,t)}};function Rr(t){Nr.trigger(as,t)}i(Rr,"emitAsyncErrorEvent");function Dr(t){if(!(t instanceof Error))return String(t);let e=t.stack??`${t.name}: ${t.message}`;if(t.cause!==void 0){let n=Dr(t.cause).split(`
`);e+=`
${Yl("Caused by:")}`;for(let r of n)r.trim()&&(e+=r.startsWith(Jl)?`
${r}`:`
${Yl(r)}`)}return e}i(Dr,"errorToString");function Ee(t=0){return(new Error().stack??"").split(`
`).slice(t+2).join(`
`)}i(Ee,"getStackTrace");function Vt(t,e){e??=globalThis.console,e.error(Dr(t))}i(Vt,"printError");function Ql(t){let e=Nr.on(as,t);return()=>{Nr.offref(e)}}i(Ql,"registerAsyncErrorEventHandler");function St(t){throw t}i(St,"throwExpression");function Yl(t){return`${Jl} --- ${t} --- (0)`}i(Yl,"generateStackTraceLine");function Ah(t){Vt(t)}i(Ah,"handleAsyncError");var us=cn(ec(),1);i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var xh=Number.POSITIVE_INFINITY;function nt(...t){let e=t.filter(s=>!!s);if(typeof AbortSignal.any=="function")return AbortSignal.any(e);if(e.length===0)return Se();if(e.length===1&&e[0])return e[0];let n=new AbortController;for(let s of e)if(s.aborted)return s;let r=[];for(let s of e)r.push(nc(s,o));return n.signal;function o(s){for(let a of r)a();n.abort(s.reason)}}i(nt,"abortSignalAny");function Se(){return new AbortController().signal}i(Se,"abortSignalNever");function tc(t){if(t===xh)return Se();if(typeof AbortSignal.timeout=="function")return AbortSignal.timeout(t);let e=new AbortController;return window.setTimeout(()=>{e.abort(new Error(`Timed out in ${String(t)} milliseconds`))},t),e.signal}i(tc,"abortSignalTimeout");function nc(t,e){if(t.aborted)return e(t),_e;return t.addEventListener("abort",n,{once:!0}),()=>{t.removeEventListener("abort",n)};function n(r){e(r.target)}i(n,"wrappedCallback")}i(nc,"onAbort");function ls(t,e){return new Promise((n,r)=>{nc(t,()=>{e?r(t.reason):n(t.reason)})})}i(ls,"waitForAbort");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Br(t){return t.replaceAll(/[.*+?^${}()|[\]\\]/g,"\\$&")}i(Br,"escapeRegExp");function rc(t){try{return new RegExp(t),!0}catch{return!1}}i(rc,"isValidRegExp");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function pn(t,e,...n){return e??=Se(),e.throwIfAborted(),vh(t)?await t(e,...n):t}i(pn,"resolveValue");function vh(t){return typeof t=="function"}i(vh,"isFunction");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Eh={"\n":"\\n","\r":"\\r","	":"\\t","\b":"\\b","\f":"\\f","'":"\\'",'"':'\\"',"\\":"\\\\"};var Sh={};for(let[t,e]of Object.entries(Eh))Sh[e]=t;function ic(t,e,n,r){return r??=n,t.slice(0,n)+e+t.slice(r)}i(ic,"insertAt");function nr(t){return ye(t,/\u00A0|\u202F/g," ").normalize("NFC")}i(nr,"normalize");function ye(t,e,n){return typeof n>"u"?t:(e instanceof RegExp&&!e.global&&(e=new RegExp(e.source,`${e.flags}g`)),typeof n=="string"?t.replaceAll(e,n):t.replaceAll(e,(r,...o)=>{let a=typeof o.at(-1)=="object",l=a?o.length-2:o.length-1,c={groups:a?o.at(-1):void 0,missingGroupIndices:[],offset:o.at(l-1),source:o.at(l),substring:r},u=o.slice(0,l-1).map((d,p)=>{if(typeof d=="string")return d;if(typeof d>"u")return c.missingGroupIndices.push(p),"";throw new Error(`Unexpected argument type: ${typeof d}`)});return n(c,...u)??c.substring}))}i(ye,"replaceAll");function cs(t,e,n){if(t.endsWith(e))return t.slice(0,-e.length);if(n)throw new Error(`String ${t} does not end with suffix ${e}`);return t}i(cs,"trimEnd");function _r(t,e,n){if(t.startsWith(e))return t.slice(e.length);if(n)throw new Error(`String ${t} does not start with prefix ${e}`);return t}i(_r,"trimStart");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ph=/[a-zA-Z]:\/[^:]*$/,ut=us.default.posix,Ow=ut.delimiter,Rw=us.default.posix.sep,Ie=ut.basename,q=ut.dirname,rt=ut.extname,Dw=ut.format;var ie=ut.join,Bw=ut.normalize,_w=ut.parse,hn=ut.relative;function oc(t,e){return e?`${t}.${e}`:t}i(oc,"makeFileName");function sc(...t){let e=ut.resolve(...t);return e=Th(e),Ph.exec(e)?.[0]??e}i(sc,"resolve");function Th(t){return ye(t,"\\","/")}i(Th,"toPosixPath");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Fh="base",$r="canvas",zt="md";function ds(t){return t.map(e=>hs(e))}i(ds,"asArrayOfFiles");function ps(t){return t.map(e=>ms(e))}i(ps,"asArrayOfFolders");function hs(t){return fs(t)??St(new Error("Abstract file is not a file"))}i(hs,"asFile");function fs(t){if(t===null)return null;if(t instanceof it.TFile)return t;throw new Error("Abstract file is not a file")}i(fs,"asFileOrNull");function ms(t){return Vr(t)??St(new Error("Abstract file is not a folder"))}i(ms,"asFolder");function Vr(t){if(t===null)return null;if(t instanceof it.TFolder)return t;throw new Error("Abstract file is not a folder")}i(Vr,"asFolderOrNull");function gs(t,e,n){if(Z(e))return e.extension===n;if(typeof e=="string"){let r=X(t,e);return r?r.extension===n:rt(e).slice(1)===n}return!1}i(gs,"checkExtension");function rr(t,e,n){if(e===null)return null;if(cc(e))return t.vault.fileMap[e.path]??e;let r=ac(t,e,n);if(r)return r;let o=uc(e);return o===e?null:ac(t,o,n)}i(rr,"getAbstractFileOrNull");function oe(t,e,n,r){let o=X(t,e,r);if(!o)if(n)o=Kl(t,e);else throw new Error(`File not found: ${e}`);return o}i(oe,"getFile");function X(t,e,n){let r=rr(t,e,n);return Z(r)?r:null}i(X,"getFileOrNull");function fn(t,e,n,r){let o=Ke(t,e,r);if(!o)if(n)o=Lr(t,e);else throw new Error(`Folder not found: ${e}`);return o}i(fn,"getFolder");function Ke(t,e,n){let r=rr(t,e,n);return dt(r)?r:null}i(Ke,"getFolderOrNull");async function lc(t,e){let n=X(t,e);if(n)return n;let r=je(e);return await Ih(t,r),await t.vault.create(e,"")}i(lc,"getOrCreateFile");async function Ih(t,e){let n=Ke(t,e);return n||await t.vault.createFolder(e)}i(Ih,"getOrCreateFolder");function G(t,e){if(cc(e))return e.path;let n=rr(t,e);return n?n.path:uc(e)}i(G,"getPath");function cc(t){return t instanceof it.TAbstractFile}i(cc,"isAbstractFile");function Mh(t,e){return gs(t,e,Fh)}i(Mh,"isBaseFile");function xt(t,e){return gs(t,e,$r)}i(xt,"isCanvasFile");function Z(t){return t instanceof it.TFile}i(Z,"isFile");function dt(t){return t instanceof it.TFolder}i(dt,"isFolder");function qe(t,e){return gs(t,e,zt)}i(qe,"isMarkdownFile");function Me(t,e){return qe(t,e)||xt(t,e)||Mh(t,e)}i(Me,"isNote");function ac(t,e,n){return n?t.vault.getAbstractFileByPathInsensitive(e):t.vault.getAbstractFileByPath(e)}i(ac,"getFileInternal");function uc(t){return(0,it.normalizePath)(sc("/",t))}i(uc,"getResolvedPath");var Uc=require("obsidian");var xs=cn(Cc(),1);i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ks="46.3.2",Kr="obsidian-dev-utils",xc=`.obsidian-dev-utils.code-highlighter-component textarea, .obsidian-dev-utils.code-highlighter-component pre, .obsidian-dev-utils.code-highlighter-component code {
  font-family: var(--font-monospace);
  line-height: var(--line-height-normal);
  margin: 0;
}
.obsidian-dev-utils.code-highlighter-component textarea, .obsidian-dev-utils.code-highlighter-component code {
  font-size: var(--code-size);
}
.obsidian-dev-utils.code-highlighter-component textarea {
  background: transparent;
  color: transparent;
  z-index: 2;
  width: 20em;
  height: 10em;
}
.obsidian-dev-utils.code-highlighter-component pre {
  position: absolute;
  pointer-events: none;
  border: var(--input-border-width) solid transparent;
  overflow: auto;
  inset: 0;
  padding: var(--size-4-1) var(--size-4-2);
  z-index: 1;
}
.obsidian-dev-utils.code-highlighter-component pre::after {
  content: "";
  display: block;
  height: var(--bottom-gap, 0);
}
.obsidian-dev-utils.code-highlighter-component pre.is-placeholder {
  opacity: 0.6;
}
.obsidian-dev-utils.code-highlighter-component code {
  display: block;
  padding: 0;
}

.obsidian-dev-utils input[type=url] {
  height: var(--input-height);
}
.obsidian-dev-utils input[type=month],
.obsidian-dev-utils input[type=tel],
.obsidian-dev-utils input[type=time],
.obsidian-dev-utils input[type=url],
.obsidian-dev-utils input[type=week] {
  -webkit-app-region: no-drag;
  background: var(--background-modifier-form-field);
  border: var(--input-border-width) solid var(--background-modifier-border);
  color: var(--text-normal);
  font-family: inherit;
  padding: var(--size-4-1) var(--size-4-2);
  font-size: var(--font-ui-small);
  border-radius: var(--input-radius);
  outline: none;
}
@media (hover: hover) {
  .obsidian-dev-utils input[type=month]:hover,
  .obsidian-dev-utils input[type=tel]:hover,
  .obsidian-dev-utils input[type=time]:hover,
  .obsidian-dev-utils input[type=url]:hover,
  .obsidian-dev-utils input[type=week]:hover {
    border-color: var(--background-modifier-border-hover);
    transition: box-shadow 0.15s ease-in-out, border 0.15s ease-in-out;
  }
}
.obsidian-dev-utils input[type=month]:active, .obsidian-dev-utils input[type=month]:focus,
.obsidian-dev-utils input[type=tel]:active,
.obsidian-dev-utils input[type=tel]:focus,
.obsidian-dev-utils input[type=time]:active,
.obsidian-dev-utils input[type=time]:focus,
.obsidian-dev-utils input[type=url]:active,
.obsidian-dev-utils input[type=url]:focus,
.obsidian-dev-utils input[type=week]:active,
.obsidian-dev-utils input[type=week]:focus {
  border-color: var(--background-modifier-border-focus);
  transition: box-shadow 0.15s ease-in-out, border 0.15s ease-in-out;
}
.obsidian-dev-utils input[type=month]:active, .obsidian-dev-utils input[type=month]:focus, .obsidian-dev-utils input[type=month]:focus-visible,
.obsidian-dev-utils input[type=tel]:active,
.obsidian-dev-utils input[type=tel]:focus,
.obsidian-dev-utils input[type=tel]:focus-visible,
.obsidian-dev-utils input[type=time]:active,
.obsidian-dev-utils input[type=time]:focus,
.obsidian-dev-utils input[type=time]:focus-visible,
.obsidian-dev-utils input[type=url]:active,
.obsidian-dev-utils input[type=url]:focus,
.obsidian-dev-utils input[type=url]:focus-visible,
.obsidian-dev-utils input[type=week]:active,
.obsidian-dev-utils input[type=week]:focus,
.obsidian-dev-utils input[type=week]:focus-visible {
  box-shadow: 0 0 0 2px var(--background-modifier-border-focus);
}
.obsidian-dev-utils input[type=month]::placeholder,
.obsidian-dev-utils input[type=tel]::placeholder,
.obsidian-dev-utils input[type=time]::placeholder,
.obsidian-dev-utils input[type=url]::placeholder,
.obsidian-dev-utils input[type=week]::placeholder {
  color: var(--text-faint);
}
.mod-rtl input[type=month],
.mod-rtl input[type=time],
.mod-rtl input[type=week],
.is-rtl input[type=month],
.is-rtl input[type=time],
.is-rtl input[type=week],
.rtl input[type=month],
.rtl input[type=time],
.rtl input[type=week] {
  direction: rtl;
}
.mod-rtl input[type=month]::-webkit-calendar-picker-indicator,
.mod-rtl input[type=time]::-webkit-calendar-picker-indicator,
.mod-rtl input[type=week]::-webkit-calendar-picker-indicator,
.is-rtl input[type=month]::-webkit-calendar-picker-indicator,
.is-rtl input[type=time]::-webkit-calendar-picker-indicator,
.is-rtl input[type=week]::-webkit-calendar-picker-indicator,
.rtl input[type=month]::-webkit-calendar-picker-indicator,
.rtl input[type=time]::-webkit-calendar-picker-indicator,
.rtl input[type=week]::-webkit-calendar-picker-indicator {
  right: var(--size-4-1);
  left: auto;
}

.obsidian-dev-utils input[type=month],
.obsidian-dev-utils input[type=time],
.obsidian-dev-utils input[type=week] {
  font-variant-numeric: tabular-nums;
  position: relative;
}
.obsidian-dev-utils input[type=month]::-webkit-datetime-edit-text,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-text,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-text {
  color: var(--text-faint);
  padding-inline-end: 0;
}
.obsidian-dev-utils input[type=month]::-webkit-calendar-picker-indicator,
.obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator,
.obsidian-dev-utils input[type=week]::-webkit-calendar-picker-indicator {
  position: absolute;
  left: var(--size-4-1);
  right: auto;
  opacity: 0.5;
}
.obsidian-dev-utils input[type=month]::-webkit-datetime-edit-month-field:active, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-month-field:focus, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-day-field:active, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-day-field:focus, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-year-field:active, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-year-field:focus,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-month-field:active,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-month-field:focus,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-day-field:active,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-day-field:focus,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-year-field:active,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-year-field:focus,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-month-field:active,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-month-field:focus,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-day-field:active,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-day-field:focus,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-year-field:active,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-year-field:focus {
  background-color: var(--text-selection);
  color: var(--text-normal);
  cursor: text;
}
.mod-rtl .obsidian-dev-utils input[type=month], .is-rtl .obsidian-dev-utils input[type=month], .rtl .obsidian-dev-utils input[type=month],
.mod-rtl .obsidian-dev-utils input[type=time],
.is-rtl .obsidian-dev-utils input[type=time],
.rtl .obsidian-dev-utils input[type=time],
.mod-rtl .obsidian-dev-utils input[type=week],
.is-rtl .obsidian-dev-utils input[type=week],
.rtl .obsidian-dev-utils input[type=week] {
  direction: rtl;
}
.mod-rtl .obsidian-dev-utils input[type=month]::-webkit-calendar-picker-indicator, .is-rtl .obsidian-dev-utils input[type=month]::-webkit-calendar-picker-indicator, .rtl .obsidian-dev-utils input[type=month]::-webkit-calendar-picker-indicator,
.mod-rtl .obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator,
.is-rtl .obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator,
.rtl .obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator,
.mod-rtl .obsidian-dev-utils input[type=week]::-webkit-calendar-picker-indicator,
.is-rtl .obsidian-dev-utils input[type=week]::-webkit-calendar-picker-indicator,
.rtl .obsidian-dev-utils input[type=week]::-webkit-calendar-picker-indicator {
  left: auto;
  right: var(--size-4-1);
}

body:not(.is-ios):not(.is-android) .obsidian-dev-utils input[type=month],
body:not(.is-ios):not(.is-android) .obsidian-dev-utils input[type=time],
body:not(.is-ios):not(.is-android) .obsidian-dev-utils input[type=week] {
  padding-inline-start: var(--size-4-6);
}

.obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator {
  margin-inline-start: 0;
}

.obsidian-dev-utilsprogress.loop {
  min-width: 200px;
}

.obsidian-dev-utils.modal-container .ok-button {
  margin-right: 10px;
  margin-top: 20px;
}

.obsidian-dev-utils .multiple-dropdown-component select,
.obsidian-dev-utils .multiple-dropdown-component select:focus,
.obsidian-dev-utils .multiple-dropdown-component .dropdown {
  height: auto;
  padding-top: 3px;
}
.obsidian-dev-utils .multiple-dropdown-component select option:checked,
.obsidian-dev-utils .multiple-dropdown-component select:focus option:checked,
.obsidian-dev-utils .multiple-dropdown-component .dropdown option:checked {
  background-color: #1967d2;
  color: #fff;
}

.obsidian-dev-utils.plugin-settings-tab a:focus {
  outline: 2px solid var(--link-color);
}

.obsidian-dev-utils.prompt-modal .text-box {
  width: 100%;
}

.obsidian-dev-utils.tri-state-checkbox-component input[type=checkbox]:indeterminate {
  appearance: checkbox;
}

.obsidian-dev-utils :invalid {
  box-shadow: 0 0 0 2px var(--text-error);
}
.obsidian-dev-utils input.metadata-input-text:active:invalid, .obsidian-dev-utils input.metadata-input-text:focus-visible:invalid, .obsidian-dev-utils input.metadata-input-text:focus:invalid,
.obsidian-dev-utils input[type=date]:active:invalid,
.obsidian-dev-utils input[type=date]:focus-visible:invalid,
.obsidian-dev-utils input[type=date]:focus:invalid,
.obsidian-dev-utils input[type=datetime-local]:active:invalid,
.obsidian-dev-utils input[type=datetime-local]:focus-visible:invalid,
.obsidian-dev-utils input[type=datetime-local]:focus:invalid,
.obsidian-dev-utils input[type=email]:active:invalid,
.obsidian-dev-utils input[type=email]:focus-visible:invalid,
.obsidian-dev-utils input[type=email]:focus:invalid,
.obsidian-dev-utils input[type=number]:active:invalid,
.obsidian-dev-utils input[type=number]:focus-visible:invalid,
.obsidian-dev-utils input[type=number]:focus:invalid,
.obsidian-dev-utils input[type=password]:active:invalid,
.obsidian-dev-utils input[type=password]:focus-visible:invalid,
.obsidian-dev-utils input[type=password]:focus:invalid,
.obsidian-dev-utils input[type=search]:active:invalid,
.obsidian-dev-utils input[type=search]:focus-visible:invalid,
.obsidian-dev-utils input[type=search]:focus:invalid,
.obsidian-dev-utils input[type=text]:active:invalid,
.obsidian-dev-utils input[type=text]:focus-visible:invalid,
.obsidian-dev-utils input[type=text]:focus:invalid,
.obsidian-dev-utils textarea:active:invalid,
.obsidian-dev-utils textarea:focus-visible:invalid,
.obsidian-dev-utils textarea:focus:invalid {
  box-shadow: 0 0 0 2px var(--text-error);
}
.obsidian-dev-utils.setting-component-wrapper {
  position: relative;
  display: inline-flex;
}
.obsidian-dev-utils.overlay-validator {
  caret-color: transparent;
  cursor: default;
  position: absolute;
  background-color: transparent;
  border: none;
  outline: none;
  pointer-events: none;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
}
.obsidian-dev-utils.tooltip.tooltip-validator {
  position: absolute;
  top: calc(100% + 8px);
  width: max-content;
}

/*# sourceMappingURL=data:application/json;charset=utf-8,%7B%22version%22:3,%22sourceRoot%22:%22%22,%22sources%22:%5B%22../src/styles/code-highlighter-component.scss%22,%22../src/styles/input.scss%22,%22../src/styles/input-time.scss%22,%22../src/styles/loop.scss%22,%22../src/styles/modal-container.scss%22,%22../src/styles/multiple-dropdown-component.scss%22,%22../src/styles/plugin-settings-tab.scss%22,%22../src/styles/prompt-modal.scss%22,%22../src/styles/tri-state-checkbox-component.scss%22,%22../src/styles/validation.scss%22%5D,%22names%22:%5B%5D,%22mappings%22:%22AAEI;EACE;EACA;EACA;;AAGF;EACE;;AAGF;EACE;EACA;EACA;EACA;EACA;;AAGF;EACE;EACA;EACA;EACA;EACA;EACA;EACA;;AAGF;EACE;EACA;EACA;;AAGF;EACE;;AAGF;EACE;EACA;;;ACzCJ;EACE;;AAGF;AAAA;AAAA;AAAA;AAAA;EAKE;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAGE;EACE;AAAA;AAAA;AAAA;AAAA;IACE;IACA,YACE;;;AAMR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAEE;EACA,YACE;;AAIJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAGE;;AAGF;AAAA;AAAA;AAAA;AAAA;EACE;;AASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAGE;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EACE;EACA;;;AC7DV;AAAA;AAAA;EAGE;EACA;;AAEA;AAAA;AAAA;EACE;EACA;;AAGF;AAAA;AAAA;EACE;EACA;EACA;EACA;;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAEE;EACA;EACA;;AAIK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAGP;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EACE;EACA;;;AAKF;AAAA;AAAA;EACE;;;AAMJ;EACE;;;ACjDJ;EACE;;;ACAA;EACE;EACA;;;ACFF;AAAA;AAAA;EAGE;EACA;;AAEA;AAAA;AAAA;EACE;EACA;;;ACRJ;EACE;;;ACDF;EACE;;;ACDF;EACE;;;ACEJ;EAJA;;AAoBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EApBJ;;AA0BA;EACE;EACA;;AAGF;EACE;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAGF;EACE;EACA;EACA%22,%22file%22:%22styles.css%22,%22sourcesContent%22:%5B%22.obsidian-dev-utils%20%7B%5Cn%20%20&.code-highlighter-component%20%7B%5Cn%20%20%20%20textarea,%20pre,%20code%20%7B%5Cn%20%20%20%20%20%20font-family:%20var(--font-monospace);%5Cn%20%20%20%20%20%20line-height:%20var(--line-height-normal);%5Cn%20%20%20%20%20%20margin:%200;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20textarea,%20code%20%7B%5Cn%20%20%20%20%20%20font-size:%20var(--code-size);%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20textarea%20%7B%5Cn%20%20%20%20%20%20background:%20transparent;%5Cn%20%20%20%20%20%20color:%20transparent;%5Cn%20%20%20%20%20%20z-index:%202;%5Cn%20%20%20%20%20%20width:%2020em;%5Cn%20%20%20%20%20%20height:%2010em;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20pre%20%7B%5Cn%20%20%20%20%20%20position:%20absolute;%5Cn%20%20%20%20%20%20pointer-events:%20none;%5Cn%20%20%20%20%20%20border:%20var(--input-border-width)%20solid%20transparent;%5Cn%20%20%20%20%20%20overflow:%20auto;%5Cn%20%20%20%20%20%20inset:%200;%5Cn%20%20%20%20%20%20padding:%20var(--size-4-1)%20var(--size-4-2);%5Cn%20%20%20%20%20%20z-index:%201;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20pre::after%20%7B%5Cn%20%20%20%20%20%20content:%20%5C%22%5C%22;%5Cn%20%20%20%20%20%20display:%20block;%5Cn%20%20%20%20%20%20height:%20var(--bottom-gap,%200);%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20pre.is-placeholder%20%7B%5Cn%20%20%20%20%20%20opacity:%200.6;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20code%20%7B%5Cn%20%20%20%20%20%20display:%20block;%5Cn%20%20%20%20%20%20padding:%200;%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20input%5Btype='url'%5D%20%7B%5Cn%20%20%20%20height:%20var(--input-height)%5Cn%20%20%7D%5Cn%5Cn%20%20input%5Btype='month'%5D,%5Cn%20%20input%5Btype='tel'%5D,%5Cn%20%20input%5Btype='time'%5D,%5Cn%20%20input%5Btype='url'%5D,%5Cn%20%20input%5Btype='week'%5D%20%7B%5Cn%20%20%20%20-webkit-app-region:%20no-drag;%5Cn%20%20%20%20background:%20var(--background-modifier-form-field);%5Cn%20%20%20%20border:%20var(--input-border-width)%20solid%20var(--background-modifier-border);%5Cn%20%20%20%20color:%20var(--text-normal);%5Cn%20%20%20%20font-family:%20inherit;%5Cn%20%20%20%20padding:%20var(--size-4-1)%20var(--size-4-2);%5Cn%20%20%20%20font-size:%20var(--font-ui-small);%5Cn%20%20%20%20border-radius:%20var(--input-radius);%5Cn%20%20%20%20outline:%20none;%5Cn%5Cn%20%20%20%20@at-root%20%7B%5Cn%20%20%20%20%20%20@media%20(hover:%20hover)%20%7B%5Cn%20%20%20%20%20%20%20%20&:hover%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20border-color:%20var(--background-modifier-border-hover);%5Cn%20%20%20%20%20%20%20%20%20%20transition:%5Cn%20%20%20%20%20%20%20%20%20%20%20%20box-shadow%200.15s%20ease-in-out,%5Cn%20%20%20%20%20%20%20%20%20%20%20%20border%200.15s%20ease-in-out;%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&:active,%5Cn%20%20%20%20&:focus%20%7B%5Cn%20%20%20%20%20%20border-color:%20var(--background-modifier-border-focus);%5Cn%20%20%20%20%20%20transition:%5Cn%20%20%20%20%20%20%20%20box-shadow%200.15s%20ease-in-out,%5Cn%20%20%20%20%20%20%20%20border%200.15s%20ease-in-out;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&:active,%5Cn%20%20%20%20&:focus,%5Cn%20%20%20%20&:focus-visible%20%7B%5Cn%20%20%20%20%20%20box-shadow:%200%200%200%202px%20var(--background-modifier-border-focus);%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&::placeholder%20%7B%5Cn%20%20%20%20%20%20color:%20var(--text-faint);%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20@at-root%20%7B%5Cn%20%20%20%20.mod-rtl,%5Cn%20%20%20%20.is-rtl,%5Cn%20%20%20%20.rtl%20%7B%5Cn%20%20%20%20%20%20&%20%7B%5Cn%20%20%20%20%20%20%20%20input%5Btype='month'%5D,%5Cn%20%20%20%20%20%20%20%20input%5Btype='time'%5D,%5Cn%20%20%20%20%20%20%20%20input%5Btype='week'%5D%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20direction:%20rtl;%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20&::-webkit-calendar-picker-indicator%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20right:%20var(--size-4-1);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20left:%20auto;%5Cn%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20input%5Btype='month'%5D,%5Cn%20%20input%5Btype='time'%5D,%5Cn%20%20input%5Btype='week'%5D%20%7B%5Cn%20%20%20%20font-variant-numeric:%20tabular-nums;%5Cn%20%20%20%20position:%20relative;%5Cn%5Cn%20%20%20%20&::-webkit-datetime-edit-text%20%7B%5Cn%20%20%20%20%20%20color:%20var(--text-faint);%5Cn%20%20%20%20%20%20padding-inline-end:%200;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&::-webkit-calendar-picker-indicator%20%7B%5Cn%20%20%20%20%20%20position:%20absolute;%5Cn%20%20%20%20%20%20left:%20var(--size-4-1);%5Cn%20%20%20%20%20%20right:%20auto;%5Cn%20%20%20%20%20%20opacity:%200.5;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&::-webkit-datetime-edit-month-field,%5Cn%20%20%20%20&::-webkit-datetime-edit-day-field,%5Cn%20%20%20%20&::-webkit-datetime-edit-year-field%20%7B%5Cn%20%20%20%20%20%20&:active,%5Cn%20%20%20%20%20%20&:focus%20%7B%5Cn%20%20%20%20%20%20%20%20background-color:%20var(--text-selection);%5Cn%20%20%20%20%20%20%20%20color:%20var(--text-normal);%5Cn%20%20%20%20%20%20%20%20cursor:%20text;%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20@at-root%20.mod-rtl%20&,%5Cn%20%20%20%20%20%20.is-rtl%20&,%5Cn%20%20%20%20%20%20.rtl%20&%20%7B%5Cn%20%20%20%20%20%20direction:%20rtl;%5Cn%5Cn%20%20%20%20%20%20&::-webkit-calendar-picker-indicator%20%7B%5Cn%20%20%20%20%20%20%20%20left:%20auto;%5Cn%20%20%20%20%20%20%20%20right:%20var(--size-4-1);%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20@at-root%20%7B%5Cn%20%20%20%20%20%20body:not(.is-ios):not(.is-android)%20&%20%7B%5Cn%20%20%20%20%20%20%20%20padding-inline-start:%20var(--size-4-6);%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20input%5Btype='time'%5D%20%7B%5Cn%20%20%20%20&::-webkit-calendar-picker-indicator%20%7B%5Cn%20%20%20%20%20%20margin-inline-start:%200;%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20&progress.loop%20%7B%5Cn%20%20%20%20min-width:%20200px;%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20&.modal-container%20%7B%5Cn%20%20%20%20.ok-button%20%7B%5Cn%20%20%20%20%20%20margin-right:%2010px;%5Cn%20%20%20%20%20%20margin-top:%2020px;%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20.multiple-dropdown-component%20%7B%5Cn%20%20%20%20select,%5Cn%20%20%20%20select:focus,%5Cn%20%20%20%20.dropdown%20%7B%5Cn%20%20%20%20%20%20height:%20auto;%5Cn%20%20%20%20%20%20padding-top:%203px;%5Cn%5Cn%20%20%20%20%20%20option:checked%20%7B%5Cn%20%20%20%20%20%20%20%20background-color:%20%231967d2;%5Cn%20%20%20%20%20%20%20%20color:%20%23fff;%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20&.plugin-settings-tab%20%7B%5Cn%20%20%20%20a:focus%20%7B%5Cn%20%20%20%20%20%20outline:%202px%20solid%20var(--link-color);%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20&.prompt-modal%20%7B%5Cn%20%20%20%20.text-box%20%7B%5Cn%20%20%20%20%20%20width:%20100%25;%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cr%5Cn%20%20&.tri-state-checkbox-component%20%7B%5Cr%5Cn%20%20%20%20input%5Btype='checkbox'%5D:indeterminate%20%7B%5Cr%5Cn%20%20%20%20%20%20appearance:%20checkbox;%5Cr%5Cn%20%20%20%20%7D%5Cr%5Cn%20%20%7D%5Cr%5Cn%7D%5Cr%5Cn%22,%22@mixin%20invalid%20%7B%5Cn%20%20box-shadow:%200%200%200%202px%20var(--text-error);%5Cn%7D%5Cn%5Cn.obsidian-dev-utils%20%7B%5Cn%20%20:invalid%20%7B%5Cn%20%20%20%20@include%20invalid;%5Cn%20%20%7D%5Cn%5Cn%20%20input.metadata-input-text,%5Cn%20%20input%5Btype='date'%5D,%5Cn%20%20input%5Btype='datetime-local'%5D,%5Cn%20%20input%5Btype='email'%5D,%5Cn%20%20input%5Btype='number'%5D,%5Cn%20%20input%5Btype='password'%5D,%5Cn%20%20input%5Btype='search'%5D,%5Cn%20%20input%5Btype='text'%5D,%5Cn%20%20textarea%20%7B%5Cn%20%20%20%20&:active,%5Cn%20%20%20%20&:focus-visible,%5Cn%20%20%20%20&:focus%20%7B%5Cn%20%20%20%20%20%20&:invalid%20%7B%5Cn%20%20%20%20%20%20%20%20@include%20invalid;%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20&.setting-component-wrapper%20%7B%5Cn%20%20%20%20position:%20relative;%5Cn%20%20%20%20display:%20inline-flex;%5Cn%20%20%7D%5Cn%5Cn%20%20&.overlay-validator%20%7B%5Cn%20%20%20%20caret-color:%20transparent;%5Cn%20%20%20%20cursor:%20default;%5Cn%20%20%20%20position:%20absolute;%5Cn%20%20%20%20background-color:%20transparent;%5Cn%20%20%20%20border:%20none;%5Cn%20%20%20%20outline:%20none;%5Cn%20%20%20%20pointer-events:%20none;%5Cn%20%20%20%20z-index:%209999;%5Cn%20%20%20%20left:%200;%5Cn%20%20%20%20top:%200;%5Cn%20%20%20%20width:%20100%25;%5Cn%20%20%20%20height:%20100%25;%5Cn%20%20%7D%5Cn%5Cn%20%20&.tooltip.tooltip-validator%20%7B%5Cn%20%20%20%20position:%20absolute;%5Cn%20%20%20%20top:%20calc(100%25%20+%208px);%5Cn%20%20%20%20width:%20max-content;%5Cn%20%20%7D%5Cn%7D%5Cn%22%5D%7D */
`;i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var As=class{static{i(this,"ValueWrapper")}constructor(e){this.value=e}};function nf(){let t=globalThis.app;if(t)return t;try{return globalThis.require("obsidian/app")}catch{throw new Error("Obsidian App global instance not found")}}i(nf,"getApp");function Pe(t,e,n){let o=t??rf()??globalThis;return o.obsidianDevUtilsState??={},o.obsidianDevUtilsState[e]??=new As(n)}i(Pe,"getObsidianDevUtilsState");function rf(){return typeof window>"u"?null:nf()}i(rf,"getAppOrNull");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Cs="__no-plugin-id-initialized__",vc=Cs;function qr(){return vc}i(qr,"getPluginId");function Ec(t){t&&(vc=t)}i(Ec,"setPluginId");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Sc=",",Gr="-";function Pc(){return{disable:of,enable:sf,get:Jr,set:ir}}i(Pc,"getDebugController");function Yr(t,e=0){let n=`${t}:${String(e)}`,r=Pe(null,"debuggers",new Map).value,o=r.get(n);return o||(o=or()(t),o.log=(s,...a)=>{af(t,e,s,...a)},r.set(n,o)),o}i(Yr,"getDebugger");function J(t){let e=qr(),n=e===Cs?"":`${e}:`;return Yr(`${n}${Kr}:${t}`)}i(J,"getLibDebugger");function pt(t,e,n,...r){if(!Fc()){t(n,...r);return}t(n,...r,`

---
Context stack trace:
`,Ic(e))}i(pt,"printWithStackTrace");function Tc(t){let e=or().enabled(t),n=e?"enabled":"disabled",r=e?"disable":"enable",o=Jr();ir(t),Yr(t)(`Debug messages for plugin ${t} are ${n}. See https://github.com/mnaoumov/obsidian-dev-utils/blob/main/docs/debugging.md how to ${r} them.`),ir(o)}i(Tc,"showInitialDebugMessage");function of(t){let e=new Set(Jr());for(let n of sr(t)){if(n.startsWith(Gr))continue;let r=Gr+n;e.has(n)&&e.delete(n),e.add(r)}ir(Array.from(e))}i(of,"disableNamespaces");function sf(t){let e=new Set(Jr());for(let n of sr(t)){if(!n.startsWith(Gr)){let r=Gr+n;e.has(r)&&e.delete(r)}e.add(n)}ir(Array.from(e))}i(sf,"enableNamespaces");function Jr(){return sr(or().load()??"")}i(Jr,"getNamespaces");function or(){return typeof window>"u"?xs.default:Pe(null,"debug",xs.default).value}i(or,"getSharedDebugLibInstance");function Fc(){return typeof window<"u"}i(Fc,"isInObsidian");function af(t,e,n,...r){if(!or().enabled(t))return;if(!Fc()){console.debug(n,...r);return}let o=4,s=new Error().stack?.split(`
`)??[];s.splice(0,o+e),console.debug(n,...r,`

---
Logger stack trace:
`,Ic(s.join(`
`)))}i(af,"logWithCaller");function Ic(t){return new tt("Debug mode: intentional placeholder error. See https://github.com/mnaoumov/obsidian-dev-utils/blob/main/docs/debugging.md.",t,void 0)}i(Ic,"makeStackTraceError");function ir(t){or().enable(sr(t).join(Sc))}i(ir,"setNamespaces");function sr(t){return typeof t=="string"?t.split(Sc).filter(Boolean):t.flatMap(sr)}i(sr,"toArray");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Mc=".",lf=[{constructor:ArrayBuffer,equalityComparer:uf},{constructor:Date,equalityComparer:df},{constructor:RegExp,equalityComparer:hf},{constructor:Map,equalityComparer:pf},{constructor:Set,equalityComparer:ff}];function Ye(t,e){if(t===e)return!0;if(typeof t!="object"||typeof e!="object"||t===null||e===null)return!1;let n=t.constructor,r=e.constructor;if(n!==r)return!1;if(n!==Object){let c=mf(t,e);if(c!==void 0)return c}let o=wn(t),s=wn(e);if(o.length!==s.length)return!1;let a=t,l=e;for(let c of o)if(!s.includes(c)||!Ye(a[c],l[c]))return!1;return!0}i(Ye,"deepEqual");function Pt(t){return typeof t!="object"||t===null?t:"default"in t?t.default:t}i(Pt,"extractDefaultExportInterop");function wn(t){let e=[],n=t;for(;n;){let r=Object.getOwnPropertyDescriptors(n);for(let[o,s]of Object.entries(r)){if(o==="__proto__"||typeof s.value=="function")continue;let a=typeof s.get=="function",l=typeof s.set=="function";if(a||l){a&&l&&e.push(o);continue}s.enumerable&&s.writable&&e.push(o)}n=Object.getPrototypeOf(n)}return e.sort()}i(wn,"getAllKeys");function yn(t,e){let n=t,r=e.split(Mc);for(let o of r){if(n===void 0)return;n=n[o]}return n}i(yn,"getNestedPropertyValue");function Lc(t,e,n){let r=new Error(`Property path ${e} not found`),o=t,s=e.split(Mc);for(let l of s.slice(0,-1)){if(o===void 0)throw r;o=o[l]}let a=s.at(-1);if(o===void 0||a===void 0)throw r;o[a]=n}i(Lc,"setNestedPropertyValue");function Wt(t,e={}){let n={functionHandlingMode:"exclude",maxDepth:-1,shouldCatchToJSONErrors:!1,shouldHandleCircularReferences:!1,shouldHandleErrors:!1,shouldHandleUndefined:!1,shouldSortKeys:!1,space:2,tokenSubstitutions:{circularReference:vs("CircularReference"),maxDepthLimitReached:vs("MaxDepthLimitReached"),toJSONFailed:vs("ToJSONFailed")}},r={...n,...e,tokenSubstitutions:{...n.tokenSubstitutions,...e.tokenSubstitutions}};r.maxDepth===-1&&(r.maxDepth=1/0);let o=[],a=Qr(t,"",0,!0,r,o,new WeakSet),l=JSON.stringify(a,null,r.space)??"";return l=ye(l,/"\[\[(?<Key>[A-Za-z]+)(?<Index>\d*)\]\]"/g,(c,u,d)=>cf({functionTexts:o,index:d?parseInt(d,10):0,key:u,substitutions:r.tokenSubstitutions})),l}i(Wt,"toJson");function cf(t){switch(t.key){case"CircularReference":return t.substitutions.circularReference;case"Function":return t.functionTexts[t.index]??St(new Error(`Function with index ${String(t.index)} not found`));case"MaxDepthLimitReached":return t.substitutions.maxDepthLimitReached;case"MaxDepthLimitReachedArray":return`Array(${String(t.index)})`;case"ToJSONFailed":return t.substitutions.toJSONFailed;case"Undefined":return"undefined";default:break}}i(cf,"applySubstitutions");function uf(t,e){if(t.byteLength!==e.byteLength)return!1;let n=new Uint8Array(t),r=new Uint8Array(e);return Ye(n,r)}i(uf,"deepEqualArrayBuffer");function df(t,e){return t.getTime()===e.getTime()}i(df,"deepEqualDate");function pf(t,e){if(t.size!==e.size)return!1;for(let[n,r]of t.entries())if(!e.has(n)||!Ye(r,e.get(n)))return!1;return!0}i(pf,"deepEqualMap");function hf(t,e){return t.source===e.source&&t.flags===e.flags}i(hf,"deepEqualRegExp");function ff(t,e){if(t.size!==e.size)return!1;for(let n of t){if(e.has(n))continue;let r=!1;for(let o of e)if(Ye(n,o)){r=!0;break}if(!r)return!1}return!0}i(ff,"deepEqualSet");function mf(t,e){for(let{constructor:n,equalityComparer:r}of lf)if(t instanceof n&&e instanceof n)return r(t,e)}i(mf,"deepEqualTyped");function gf(t,e,n,r,o,s){return e>r.maxDepth?kn("MaxDepthLimitReachedArray",t.length):t.map((a,l)=>Qr(a,String(l),e+1,n,r,o,s))}i(gf,"handleArray");function bf(t,e,n){if(n.shouldHandleCircularReferences)return kn("CircularReference");let r=t.constructor.name||"Object";throw new TypeError(`Converting circular structure to JSON
--> starting at object with constructor '${r}'
--- property '${e}' closes the circle`)}i(bf,"handleCircularReference");function wf(t,e,n){if(n.functionHandlingMode==="exclude")return;let r=e.length,o=n.functionHandlingMode==="full"?String(t):`function ${t.name||"anonymous"}() { /* ... */ }`;return e.push(o),kn("Function",r)}i(wf,"handleFunction");function yf(t,e,n,r,o,s,a){if(a.has(t))return bf(t,e,o);if(a.add(t),r){let l=Af(t,e,n,o,s,a);if(l!==void 0)return l}return Array.isArray(t)?gf(t,n,r,o,s,a):n>o.maxDepth?kn("MaxDepthLimitReached"):t instanceof Error&&o.shouldHandleErrors?Dr(t):kf(t,n,r,o,s,a)}i(yf,"handleObject");function kf(t,e,n,r,o,s){let a=Object.entries(t);return r.shouldSortKeys&&a.sort(([l],[c])=>l.localeCompare(c)),Object.fromEntries(a.map(([l,c])=>[l,Qr(c,l,e+1,n,r,o,s)]))}i(kf,"handlePlainObject");function vs(t){return`{ "[[${t}]]": null }`}i(vs,"makeObjectTokenSubstitution");function kn(t,e){return`[[${t}${e?String(e):""}]]`}i(kn,"makePlaceholder");function Qr(t,e,n,r,o,s,a){return t===void 0?n===0||o.shouldHandleUndefined?kn("Undefined"):void 0:typeof t=="function"?wf(t,s,o):typeof t!="object"||t===null?t:yf(t,e,n,r,o,s,a)}i(Qr,"toPlainObject");function Af(t,e,n,r,o,s){let a=t.toJSON;if(typeof a=="function")try{let l=a.call(t,e);return Qr(l,e,n,!1,r,o,s)}catch(l){if(r.shouldCatchToJSONErrors)return kn("ToJSONFailed");throw l}}i(Af,"tryHandleToJSON");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function Ss(t,e){e??=Ee(1);try{await t()}catch(n){let r=new tt(Or,e,n);if(Cf(r))return;Rr(r)}}i(Ss,"addErrorHandler");function An(t,e){return e??=Ee(1),(...n)=>{let r=Ee(1);e=`${e??""}
    at --- convertAsyncToSync --- (0)
${r}`,ee(()=>t(...n),e)}}i(An,"convertAsyncToSync");function Cf(t){let e=t;for(;!(e instanceof un);){if(!(e instanceof Error))return!1;e=e.cause}return J("Async:handleSilentError")(t),!0}i(Cf,"handleSilentError");function ee(t,e){e??=Ee(1),Ss(t,e)}i(ee,"invokeAsyncSafely");function Nc(t,e=0,n,r){r??=Se(),r.throwIfAborted(),n??=Ee(1),ee(async()=>{await Ts(e,r,!0),await t(r)},n)}i(Nc,"invokeAsyncSafelyAfterDelay");var xf=new WeakSet;async function Oc(){return new Promise(t=>{requestAnimationFrame(()=>{t()})})}i(Oc,"requestAnimationFrameAsync");async function Rc(t){let e=J("Async:retryWithTimeout"),n=t.stackTrace??Ee(1),o={...{retryDelayInMilliseconds:100,shouldRetryOnError:!1,timeoutInMilliseconds:5e3},...t.retryOptions};o.abortSignal?.throwIfAborted(),await Ps({context:{operationName:t.operationName??"",retryFn:t.operationFn},onTimeout:t.onTimeout,async operationFn(s){let a=nt(o.abortSignal,s);a.throwIfAborted();let l=0;for(;!a.aborted;){l++;let c;try{c=await t.operationFn(a)}catch(u){if(a.aborted||!o.shouldRetryOnError||xf.has(u))throw new tt("retryWithTimeout failed",n,u);Vt(u),c=!1}if(c){pt(e,n,`Retry completed successfully after ${String(l)} attempts`,{operationFn:t.operationFn,operationName:t.operationName??""});return}pt(e,n,`Retry attempt ${String(l)} completed unsuccessfully. Trying again in ${String(o.retryDelayInMilliseconds)} milliseconds`,{operationFn:t.operationFn,operationName:t.operationName??""}),await Ts(o.retryDelayInMilliseconds,s)}},operationName:t.operationName??"",stackTrace:n,timeoutInMilliseconds:o.timeoutInMilliseconds})}i(Rc,"retryWithTimeout");async function Ps(t){let e=t.stackTrace??Ee(1),n=performance.now(),r=new AbortController,o=new AbortController,s=null,a=!1,l=!1,c=J("Async:runWithTimeout"),u=t.onTimeout??h;if(await Promise.race([d(),p()]),a)return s;throw new tt("Run with timeout failed",e,r.signal.reason);async function d(){try{s=await t.operationFn(r.signal);let f=Math.trunc(performance.now()-n);pt(c,e,`Execution time: ${String(f)} milliseconds`,{context:t.context,operationFn:t.operationFn,operationName:t.operationName??""}),a=!0}catch(f){r.abort(f)}finally{l=!0,o.abort(new Error("Completed"))}}async function p(){if(await Ts(t.timeoutInMilliseconds,o.signal),l)return;let f=Math.trunc(performance.now()-n);pt(c,e,`Timed out after ${String(f)} milliseconds`,{context:t.context,operationFn:t.operationFn,operationName:t.operationName??""});let b={duration:f,onOperationCompleted(k){o.signal.addEventListener("abort",k)},operationName:t.operationName??"",terminateOperation(){let k=new Error(`Timed out after ${String(f)} milliseconds`);r.abort(k),o.abort(k)}};u(b),await ls(o.signal)}function h(f){f.terminateOperation()}}i(Ps,"runWithTimeout");async function Ts(t,e,n){await ls(nt(e,tc(t))),n&&e?.throwIfAborted()}i(Ts,"sleep");var $c=cn(Bc(),1);i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var M=(t=>(t.AlertModal="alert-modal",t.CancelButton="cancel-button",t.CheckboxComponent="checkbox-component",t.CodeHighlighterComponent="code-highlighter-component",t.ConfirmModal="confirm-modal",t.DateComponent="date-component",t.DateTimeComponent="datetime-component",t.EmailComponent="email-component",t.FileComponent="file-component",t.IsPlaceholder="is-placeholder",t.LibraryName="obsidian-dev-utils",t.MonthComponent="month-component",t.MultipleDropdownComponent="multiple-dropdown-component",t.MultipleEmailComponent="multiple-email-component",t.MultipleFileComponent="multiple-file-component",t.MultipleTextComponent="multiple-text-component",t.NumberComponent="number-component",t.OkButton="ok-button",t.OverlayValidator="overlay-validator",t.PasswordComponent="password-component",t.PluginSettingsTab="plugin-settings-tab",t.PromptModal="prompt-modal",t.SelectItemModal="select-item-modal",t.SettingComponentWrapper="setting-component-wrapper",t.TelephoneComponent="telephone-component",t.TextBox="text-box",t.TimeComponent="time-component",t.Tooltip="tooltip",t.TooltipArrow="tooltip-arrow",t.TooltipValidator="tooltip-validator",t.TriStateCheckboxComponent="tri-state-checkbox-component",t.TypedDropdownComponent="typed-dropdown-component",t.TypedMultipleDropdownComponent="typed-multiple-dropdown-component",t.UrlComponent="url-component",t.WeekComponent="week-component",t))(M||{});i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var _c=`${Kr}-styles`;function K(t,...e){t.addClass(M.LibraryName,qr(),...e)}i(K,"addPluginCssClasses");function Vc(t){let e=t;e.DEBUG=Pc()}i(Vc,"initDebugController");function zc(t,e){Ec(e),Tc(e);let n=Pe(t,"lastLibraryVersion","0.0.0");(0,$c.compareVersions)(ks,n.value)<=0||(n.value=ks,document.head.querySelector(`#${_c}`)?.remove(),document.head.createEl("style",{attr:{id:_c},text:xc}))}i(zc,"initPluginContext");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function ht(t){let n={...{abortSignal:Se(),buildNoticeMessage(){throw new Error("buildNoticeMessage is required")},items:[],noticeBeforeShownTimeoutInMilliseconds:500,noticeMinTimeoutInMilliseconds:2e3,processItem:_e,progressBarTitle:"",shouldContinueOnError:!0,shouldShowProgressBar:!0,uiUpdateThresholdInMilliseconds:100},...t},r=Ee(1),o=n.items,s=0,a=null,l=!1;ee(()=>p());let c=sleep(n.noticeMinTimeoutInMilliseconds),u=createEl("progress");K(u,"loop"),u.max=o.length;let d=performance.now();for(let h of o){if(n.abortSignal.aborted){a?.hide();return}s++;let f=`# ${String(s)} / ${String(o.length)}`,b=n.buildNoticeMessage(h,f);n.shouldShowProgressBar||a?.setMessage(b),J("Loop")(b);try{performance.now()-d>n.uiUpdateThresholdInMilliseconds&&(await Oc(),d=performance.now()),await n.processItem(h)}catch(k){if(console.error("Error processing item",h),!n.shouldContinueOnError)throw a?.hide(),new tt("loop failed",r,k);Rr(new tt(Or,r,k))}u.value++}a&&await c,a?.hide(),l=!0;async function p(){if(await sleep(n.noticeBeforeShownTimeoutInMilliseconds),l||(a=new Uc.Notice("",0),!n.shouldShowProgressBar))return;let h=createFragment();h.createDiv({text:n.progressBarTitle}),h.appendChild(u),a.setMessage(h)}i(p,"showNotice")}i(ht,"loop");var O=i(t=>typeof t=="string","isString"),ar=i(()=>{let t,e,n=new Promise((r,o)=>{t=r,e=o});return n.resolve=t,n.reject=e,n},"defer"),Wc=i(t=>t==null?"":""+t,"makeString"),vf=i((t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},"copy"),Ef=/###/g,Hc=i(t=>t&&t.indexOf("###")>-1?t.replace(Ef,"."):t,"cleanKey"),jc=i(t=>!t||O(t),"canNotTraverseDeeper"),lr=i((t,e,n)=>{let r=O(e)?e.split("."):e,o=0;for(;o<r.length-1;){if(jc(t))return{};let s=Hc(r[o]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++o}return jc(t)?{}:{obj:t,k:Hc(r[o])}},"getLastOfPath"),Kc=i((t,e,n)=>{let{obj:r,k:o}=lr(t,e,Object);if(r!==void 0||e.length===1){r[o]=n;return}let s=e[e.length-1],a=e.slice(0,e.length-1),l=lr(t,a,Object);for(;l.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),l=lr(t,a,Object),l?.obj&&typeof l.obj[`${l.k}.${s}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${s}`]=n},"setPath"),Sf=i((t,e,n,r)=>{let{obj:o,k:s}=lr(t,e,Object);o[s]=o[s]||[],o[s].push(n)},"pushPath"),ei=i((t,e)=>{let{obj:n,k:r}=lr(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},"getPath"),Pf=i((t,e,n)=>{let r=ei(t,n);return r!==void 0?r:ei(e,n)},"getPathWithDefaults"),eu=i((t,e,n)=>{for(let r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?O(t[r])||t[r]instanceof String||O(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):eu(t[r],e[r],n):t[r]=e[r]);return t},"deepExtend"),Cn=i(t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"regexEscape"),Tf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},Ff=i(t=>O(t)?t.replace(/[&<>"'\/]/g,e=>Tf[e]):t,"escape"),Ms=class{static{i(this,"RegExpCache")}constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){let n=this.regExpMap.get(e);if(n!==void 0)return n;let r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}},If=[" ",",","?","!",";"],Mf=new Ms(20),Lf=i((t,e,n)=>{e=e||"",n=n||"";let r=If.filter(a=>e.indexOf(a)<0&&n.indexOf(a)<0);if(r.length===0)return!0;let o=Mf.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`),s=!o.test(t);if(!s){let a=t.indexOf(n);a>0&&!o.test(t.substring(0,a))&&(s=!0)}return s},"looksLikeObjectPath"),Ls=i((t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;let r=e.split(n),o=t;for(let s=0;s<r.length;){if(!o||typeof o!="object")return;let a,l="";for(let c=s;c<r.length;++c)if(c!==s&&(l+=n),l+=r[c],a=o[l],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<r.length-1)continue;s+=c-s+1;break}o=a}return o},"deepFind"),cr=i(t=>t?.replace("_","-"),"getCleanedCode"),Nf={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}},Ns=class t{static{i(this,"Logger")}constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||Nf,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,o){return o&&!this.debug?null:(O(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new t(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new t(this.logger,e)}},ft=new Ns,xn=class{static{i(this,"EventEmitter")}constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);let o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([o,s])=>{for(let a=0;a<s;a++)o(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([o,s])=>{for(let a=0;a<s;a++)o.apply(o,[e,...n])})}},ti=class extends xn{static{i(this,"ResourceStore")}constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){let n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,o={}){let s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,a=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure,l;e.indexOf(".")>-1?l=e.split("."):(l=[e,n],r&&(Array.isArray(r)?l.push(...r):O(r)&&s?l.push(...r.split(s)):l.push(r)));let c=ei(this.data,l);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=l[0],n=l[1],r=l.slice(2).join(".")),c||!a||!O(r)?c:Ls(this.data?.[e]?.[n],r,s)}addResource(e,n,r,o,s={silent:!1}){let a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=[e,n];r&&(l=l.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(l=e.split("."),o=n,n=l[1]),this.addNamespaces(n),Kc(this.data,l,o),s.silent||this.emit("added",e,n,r,o)}addResources(e,n,r,o={silent:!1}){for(let s in r)(O(r[s])||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});o.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,o,s,a={silent:!1,skipCopy:!1}){let l=[e,n];e.indexOf(".")>-1&&(l=e.split("."),o=r,r=n,n=l[1]),this.addNamespaces(n);let c=ei(this.data,l)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?eu(c,r,s):c={...c,...r},Kc(this.data,l,c),a.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){let n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}},tu={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,o){return t.forEach(s=>{e=this.processors[s]?.process(e,n,r,o)??e}),e}},nu=Symbol("i18next/PATH_KEY");function Of(){let t=[],e=Object.create(null),n;return e.get=(r,o)=>(n?.revoke?.(),o===nu?t:(t.push(o),n=Proxy.revocable(r,e),n.proxy)),Proxy.revocable(Object.create(null),e).proxy}i(Of,"createProxy");function Os(t,e){let{[nu]:n}=t(Of());return n.join(e?.keySeparator??".")}i(Os,"keysFromSelector");var qc={},Fs=i(t=>!O(t)&&typeof t!="boolean"&&typeof t!="number","shouldHandleAsObject"),ni=class t extends xn{static{i(this,"Translator")}constructor(e,n={}){super(),vf(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ft.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){let r={...n};if(e==null)return!1;let o=this.resolve(e,r);if(o?.res===void 0)return!1;let s=Fs(o.res);return!(r.returnObjects===!1&&s)}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");let o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,s=n.ns||this.options.defaultNS||[],a=r&&e.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Lf(e,r,o);if(a&&!l){let c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:O(s)?[s]:s};let u=e.split(r);(r!==o||r===o&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),e=u.join(o)}return{key:e,namespaces:O(s)?[s]:s}}translate(e,n,r){let o=typeof n=="object"?{...n}:n;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),e==null)return"";typeof e=="function"&&(e=Os(e,{...this.options,...o})),Array.isArray(e)||(e=[String(e)]);let s=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,a=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],o),u=c[c.length-1],d=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");let p=o.lng||this.language,h=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p?.toLowerCase()==="cimode")return h?s?{res:`${u}${d}${l}`,usedKey:l,exactUsedKey:l,usedLng:p,usedNS:u,usedParams:this.getUsedParamsDetails(o)}:`${u}${d}${l}`:s?{res:l,usedKey:l,exactUsedKey:l,usedLng:p,usedNS:u,usedParams:this.getUsedParamsDetails(o)}:l;let f=this.resolve(e,o),b=f?.res,k=f?.usedKey||l,y=f?.exactUsedKey||l,w=["[object Number]","[object Function]","[object RegExp]"],C=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,P=o.count!==void 0&&!O(o.count),I=t.hasDefaultValue(o),A=P?this.pluralResolver.getSuffix(p,o.count,o):"",$=o.ordinal&&P?this.pluralResolver.getSuffix(p,o.count,{ordinal:!1}):"",H=P&&!o.ordinal&&o.count===0,R=H&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${A}`]||o[`defaultValue${$}`]||o.defaultValue,z=b;v&&!b&&I&&(z=R);let de=Fs(z),W=Object.prototype.toString.apply(z);if(v&&z&&de&&w.indexOf(W)<0&&!(O(C)&&Array.isArray(z))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let T=this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,z,{...o,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return s?(f.res=T,f.usedParams=this.getUsedParamsDetails(o),f):T}if(a){let T=Array.isArray(z),L=T?[]:{},N=T?y:k;for(let V in z)if(Object.prototype.hasOwnProperty.call(z,V)){let j=`${N}${a}${V}`;I&&!b?L[V]=this.translate(j,{...o,defaultValue:Fs(R)?R[V]:void 0,joinArrays:!1,ns:c}):L[V]=this.translate(j,{...o,joinArrays:!1,ns:c}),L[V]===j&&(L[V]=z[V])}b=L}}else if(v&&O(C)&&Array.isArray(b))b=b.join(C),b&&(b=this.extendTranslation(b,e,o,r));else{let T=!1,L=!1;!this.isValidLookup(b)&&I&&(T=!0,b=R),this.isValidLookup(b)||(L=!0,b=l);let V=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&L?void 0:b,j=I&&R!==b&&this.options.updateMissing;if(L||T||j){if(this.logger.log(j?"updateKey":"missingKey",p,u,l,j?R:b),a){let Q=this.resolve(l,{...o,keySeparator:!1});Q&&Q.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let pe=[],xe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&xe&&xe[0])for(let Q=0;Q<xe.length;Q++)pe.push(xe[Q]);else this.options.saveMissingTo==="all"?pe=this.languageUtils.toResolveHierarchy(o.lng||this.language):pe.push(o.lng||this.language);let m=i((Q,he,g)=>{let we=I&&g!==b?g:V;this.options.missingKeyHandler?this.options.missingKeyHandler(Q,u,he,we,j,o):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Q,u,he,we,j,o),this.emit("missingKey",Q,u,he,b)},"send");this.options.saveMissing&&(this.options.saveMissingPlurals&&P?pe.forEach(Q=>{let he=this.pluralResolver.getSuffixes(Q,o);H&&o[`defaultValue${this.options.pluralSeparator}zero`]&&he.indexOf(`${this.options.pluralSeparator}zero`)<0&&he.push(`${this.options.pluralSeparator}zero`),he.forEach(g=>{m([Q],l+g,o[`defaultValue${g}`]||R)})}):m(pe,l,R))}b=this.extendTranslation(b,e,o,f,r),L&&b===l&&this.options.appendNamespaceToMissingKey&&(b=`${u}${d}${l}`),(L||T)&&this.options.parseMissingKeyHandler&&(b=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${l}`:l,T?b:void 0,o))}return s?(f.res=b,f.usedParams=this.getUsedParamsDetails(o),f):b}extendTranslation(e,n,r,o,s){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});let c=O(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),u;if(c){let p=e.match(this.interpolator.nestingRegexp);u=p&&p.length}let d=r.replace&&!O(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language||o.usedLng,r),c){let p=e.match(this.interpolator.nestingRegexp),h=p&&p.length;u<h&&(r.nest=!1)}!r.lng&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>s?.[0]===p[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):this.translate(...p,n),r)),r.interpolation&&this.interpolator.reset()}let a=r.postProcess||this.options.postProcess,l=O(a)?[a]:a;return e!=null&&l?.length&&r.applyPostProcessor!==!1&&(e=tu.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,o,s,a,l;return O(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;let u=this.extractFromKey(c,n),d=u.key;o=d;let p=u.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));let h=n.count!==void 0&&!O(n.count),f=h&&!n.ordinal&&n.count===0,b=n.context!==void 0&&(O(n.context)||typeof n.context=="number")&&n.context!=="",k=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);p.forEach(y=>{this.isValidLookup(r)||(l=y,!qc[`${k[0]}-${y}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(qc[`${k[0]}-${y}`]=!0,this.logger.warn(`key "${o}" for languages "${k.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(w=>{if(this.isValidLookup(r))return;a=w;let C=[d];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(C,d,w,y,n);else{let P;h&&(P=this.pluralResolver.getSuffix(w,n.count,n));let I=`${this.options.pluralSeparator}zero`,A=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(n.ordinal&&P.indexOf(A)===0&&C.push(d+P.replace(A,this.options.pluralSeparator)),C.push(d+P),f&&C.push(d+I)),b){let $=`${d}${this.options.contextSeparator||"_"}${n.context}`;C.push($),h&&(n.ordinal&&P.indexOf(A)===0&&C.push($+P.replace(A,this.options.pluralSeparator)),C.push($+P),f&&C.push($+I))}}let v;for(;v=C.pop();)this.isValidLookup(r)||(s=v,r=this.getResource(w,y,v,n))}))})}),{res:r,usedKey:o,exactUsedKey:s,usedLng:a,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,o={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,r,o):this.resourceStore.getResource(e,n,r,o)}getUsedParamsDetails(e={}){let n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!O(e.replace),o=r?e.replace:e;if(r&&typeof e.count<"u"&&(o.count=e.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(let s of n)delete o[s]}return o}static hasDefaultValue(e){let n="defaultValue";for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}},ri=class{static{i(this,"LanguageUtil")}constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ft.create("languageUtils")}getScriptPartFromCode(e){if(e=cr(e),!e||e.indexOf("-")<0)return null;let n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=cr(e),!e||e.indexOf("-")<0)return e;let n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(O(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;let o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;let o=this.getScriptPartFromCode(r);if(this.isSupportedCode(o))return n=o;let s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(a=>{if(a===s)return a;if(!(a.indexOf("-")<0&&s.indexOf("-")<0)&&(a.indexOf("-")>0&&s.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===s||a.indexOf(s)===0&&s.length>1))return a})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),O(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){let r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),o=[],s=i(a=>{a&&(this.isSupportedCode(a)?o.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))},"addCode");return O(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):O(e)&&s(this.formatLanguageCode(e)),r.forEach(a=>{o.indexOf(a)<0&&s(this.formatLanguageCode(a))}),o}},Gc={zero:0,one:1,two:2,few:3,many:4,other:5},Yc={select:i(t=>t===1?"one":"other","select"),resolvedOptions:i(()=>({pluralCategories:["one","other"]}),"resolvedOptions")},Rs=class{static{i(this,"PluralResolver")}constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=ft.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){let r=cr(e==="dev"?"en":e),o=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:o});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Yc;if(!e.match(/-|_/))return Yc;let c=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(c,n)}return this.pluralRulesCache[s]=a,a}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(o=>`${n}${o}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((o,s)=>Gc[o]-Gc[s]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(e,n,r={}){let o=this.getRule(e,r);return o?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}},Jc=i((t,e,n,r=".",o=!0)=>{let s=Pf(t,e,n);return!s&&o&&O(n)&&(s=Ls(t,n,r),s===void 0&&(s=Ls(e,n,r))),s},"deepFindWithDefaults"),Is=i(t=>t.replace(/\$/g,"$$$$"),"regexSafe"),ii=class{static{i(this,"Interpolator")}constructor(e={}){this.logger=ft.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});let{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:s,prefixEscaped:a,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:p,nestingPrefix:h,nestingPrefixEscaped:f,nestingSuffix:b,nestingSuffixEscaped:k,nestingOptionsSeparator:y,maxReplaces:w,alwaysFormat:C}=e.interpolation;this.escape=n!==void 0?n:Ff,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=s?Cn(s):a||"{{",this.suffix=l?Cn(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=h?Cn(h):f||Cn("$t("),this.nestingSuffix=b?Cn(b):k||Cn(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=w||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let e=i((n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g"),"getOrResetRegExp");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,o){let s,a,l,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=i(f=>{if(f.indexOf(this.formatSeparator)<0){let w=Jc(n,c,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,r,{...o,...n,interpolationkey:f}):w}let b=f.split(this.formatSeparator),k=b.shift().trim(),y=b.join(this.formatSeparator).trim();return this.format(Jc(n,c,k,this.options.keySeparator,this.options.ignoreJSONStructure),y,r,{...o,...n,interpolationkey:k})},"handleFormat");this.resetRegExp();let d=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,p=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:i(f=>Is(f),"safeValue")},{regex:this.regexp,safeValue:i(f=>this.escapeValue?Is(this.escape(f)):Is(f),"safeValue")}].forEach(f=>{for(l=0;s=f.regex.exec(e);){let b=s[1].trim();if(a=u(b),a===void 0)if(typeof d=="function"){let y=d(e,s,o);a=O(y)?y:""}else if(o&&Object.prototype.hasOwnProperty.call(o,b))a="";else if(p){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${b} for interpolating ${e}`),a="";else!O(a)&&!this.useRawValueToEscape&&(a=Wc(a));let k=f.safeValue(a);if(e=e.replace(s[0],k),p?(f.regex.lastIndex+=a.length,f.regex.lastIndex-=s[0].length):f.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,n,r={}){let o,s,a,l=i((c,u)=>{let d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;let p=c.split(new RegExp(`${d}[ ]*{`)),h=`{${p[1]}`;c=p[0],h=this.interpolate(h,a);let f=h.match(/'/g),b=h.match(/"/g);((f?.length??0)%2===0&&!b||b.length%2!==0)&&(h=h.replace(/'/g,'"'));try{a=JSON.parse(h),u&&(a={...u,...a})}catch(k){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,k),`${c}${d}${h}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c},"handleHasOptions");for(;o=this.nestingRegexp.exec(e);){let c=[];a={...r},a=a.replace&&!O(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=/{.*}/.test(o[1])?o[1].lastIndexOf("}")+1:o[1].indexOf(this.formatSeparator);if(u!==-1&&(c=o[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),o[1]=o[1].slice(0,u)),s=n(l.call(this,o[1].trim(),a),a),s&&o[0]===e&&!O(s))return s;O(s)||(s=Wc(s)),s||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${e}`),s=""),c.length&&(s=c.reduce((d,p)=>this.format(d,p,r.lng,{...r,interpolationkey:o[1].trim()}),s.trim())),e=e.replace(o[0],s),this.regexp.lastIndex=0}return e}},Rf=i(t=>{let e=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){let r=t.split("(");e=r[0].toLowerCase().trim();let o=r[1].substring(0,r[1].length-1);e==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):e==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(a=>{if(a){let[l,...c]=a.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();n[d]||(n[d]=u),u==="false"&&(n[d]=!1),u==="true"&&(n[d]=!0),isNaN(u)||(n[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},"parseFormatStr"),Qc=i(t=>{let e={};return(n,r,o)=>{let s=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(s={...s,[o.interpolationkey]:void 0});let a=r+JSON.stringify(s),l=e[a];return l||(l=t(cr(r),o),e[a]=l),l(n)}},"createCachedFormatter"),Df=i(t=>(e,n,r)=>t(cr(n),r)(e),"createNonCachedFormatter"),Ds=class{static{i(this,"Formatter")}constructor(e={}){this.logger=ft.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";let r=n.cacheInBuiltFormats?Qc:Df;this.formats={number:r((o,s)=>{let a=new Intl.NumberFormat(o,{...s});return l=>a.format(l)}),currency:r((o,s)=>{let a=new Intl.NumberFormat(o,{...s,style:"currency"});return l=>a.format(l)}),datetime:r((o,s)=>{let a=new Intl.DateTimeFormat(o,{...s});return l=>a.format(l)}),relativetime:r((o,s)=>{let a=new Intl.RelativeTimeFormat(o,{...s});return l=>a.format(l,s.range||"day")}),list:r((o,s)=>{let a=new Intl.ListFormat(o,{...s});return l=>a.format(l)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Qc(n)}format(e,n,r,o={}){let s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(l=>l.indexOf(")")>-1)){let l=s.findIndex(c=>c.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,l)].join(this.formatSeparator)}return s.reduce((l,c)=>{let{formatName:u,formatOptions:d}=Rf(c);if(this.formats[u]){let p=l;try{let h=o?.formatParams?.[o.interpolationkey]||{},f=h.locale||h.lng||o.locale||o.lng||r;p=this.formats[u](l,f,{...d,...o,...h})}catch(h){this.logger.warn(h)}return p}else this.logger.warn(`there was no format function for ${u}`);return l},e)}},Bf=i((t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)},"removePending"),Bs=class extends xn{static{i(this,"Connector")}constructor(e,n,r,o={}){super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=ft.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,o.backend,o)}queueLoad(e,n,r,o){let s={},a={},l={},c={};return e.forEach(u=>{let d=!0;n.forEach(p=>{let h=`${u}|${p}`;!r.reload&&this.store.hasResourceBundle(u,p)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?a[h]===void 0&&(a[h]=!0):(this.state[h]=1,d=!1,a[h]===void 0&&(a[h]=!0),s[h]===void 0&&(s[h]=!0),c[p]===void 0&&(c[p]=!0)))}),d||(l[u]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,n,r){let o=e.split("|"),s=o[0],a=o[1];n&&this.emit("failedLoading",s,a,n),!n&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);let l={};this.queue.forEach(c=>{Sf(c.loaded,[s],a),Bf(c,e),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});let d=c.loaded[u];d.length&&d.forEach(p=>{l[u][p]===void 0&&(l[u][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,n,r,o=0,s=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:o,wait:s,callback:a});return}this.readingCalls++;let l=i((u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){let p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(u&&d&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,o+1,s*2,a)},s);return}a(u,d)},"resolver"),c=this.backend[r].bind(this.backend);if(c.length===2){try{let u=c(e,n);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,n,l)}prepareLoading(e,n,r={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();O(e)&&(e=this.languageUtils.toResolveHierarchy(e)),O(n)&&(n=[n]);let s=this.queueLoad(e,n,r,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){let r=e.split("|"),o=r[0],s=r[1];this.read(o,s,"read",void 0,void 0,(a,l)=>{a&&this.logger.warn(`${n}loading namespace ${s} for language ${o} failed`,a),!a&&l&&this.logger.log(`${n}loaded namespace ${s} for language ${o}`,l),this.loaded(e,a,l)})}saveMissing(e,n,r,o,s,a={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){let c={...a,isUpdate:s},u=this.backend.create.bind(this.backend);if(u.length<6)try{let d;u.length===5?d=u(e,n,r,o,c):d=u(e,n,r,o),d&&typeof d.then=="function"?d.then(p=>l(null,p)).catch(l):l(null,d)}catch(d){l(d)}else u(e,n,r,o,l,c)}!e||!e[0]||this.store.addResource(e[0],n,r,o)}}},Xc=i(()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:i(t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),O(t[1])&&(e.defaultValue=t[1]),O(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){let n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},"overloadTranslationOptionHandler"),interpolation:{escapeValue:!0,format:i(t=>t,"format"),prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),"get"),Zc=i(t=>(O(t.ns)&&(t.ns=[t.ns]),O(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),O(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),"transformOptions"),Zr=i(()=>{},"noop"),_f=i(t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})},"bindMemberFunctions"),_s=class t extends xn{static{i(this,"I18n")}constructor(e={},n){if(super(),this.options=Zc(e),this.services={},this.logger=ft,this.modules={external:[]},_f(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(O(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));let r=Xc();this.options={...r,...this.options,...Zc(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler);let o=i(u=>u?typeof u=="function"?new u:u:null,"createClassOnDemand");if(!this.options.isClone){this.modules.logger?ft.init(o(this.modules.logger),this.options):ft.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Ds;let d=new ri(this.options);this.store=new ti(this.options.resources,this.options);let p=this.services;p.logger=ft,p.resourceStore=this.store,p.languageUtils=d,p.pluralResolver=new Rs(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(p.formatter=o(u),p.formatter.init&&p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new ii(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new Bs(o(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",(f,...b)=>{this.emit(f,...b)}),this.modules.languageDetector&&(p.languageDetector=o(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=o(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new ni(this.services,this.options),this.translator.on("*",(f,...b)=>{this.emit(f,...b)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Zr),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});let l=ar(),c=i(()=>{let u=i((d,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),n(d,p)},"finish");if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)},"load");return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e,n=Zr){let r=n,o=O(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();let s=[],a=i(l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(u=>{u!=="cimode"&&s.indexOf(u)<0&&s.push(u)})},"append");o?a(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>a(c)),this.options.preload?.forEach?.(l=>a(l)),this.services.backendConnector.load(s,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,n,r){let o=ar();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Zr),this.services.backendConnector.reload(e,n,s=>{o.resolve(),r(s)}),o}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&tu.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){let r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;let r=ar();this.emit("languageChanging",e);let o=i(l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},"setLngProps"),s=i((l,c)=>{c?this.isLanguageChangingTo===e&&(o(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),n&&n(l,(...u)=>this.t(...u))},"done"),a=i(l=>{!e&&!l&&this.services.languageDetector&&(l=[]);let c=O(l)?l:l&&l[0],u=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(O(l)?[l]:l);u&&(this.language||o(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector?.cacheUserLanguage?.(u)),this.loadResources(u,d=>{s(d,u)})},"setLng");return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),r}getFixedT(e,n,r){let o=i((s,a,...l)=>{let c;typeof a!="object"?c=this.options.overloadTranslationOptionHandler([s,a].concat(l)):c={...a},c.lng=c.lng||o.lng,c.lngs=c.lngs||o.lngs,c.ns=c.ns||o.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||o.keyPrefix);let u=this.options.keySeparator||".",d;return c.keyPrefix&&Array.isArray(s)?d=s.map(p=>(typeof p=="function"&&(p=Os(p,{...this.options,...a})),`${c.keyPrefix}${u}${p}`)):(typeof s=="function"&&(s=Os(s,{...this.options,...a})),d=c.keyPrefix?`${c.keyPrefix}${u}${s}`:s),this.t(d,c)},"fixedT");return O(e)?o.lng=e:o.lngs=e,o.ns=n,o.keyPrefix=r,o}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;let a=i((l,c)=>{let u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2},"loadNotPending");if(n.precheck){let l=n.precheck(this,a);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!o||a(s,e)))}loadNamespaces(e,n){let r=ar();return this.options.ns?(O(e)&&(e=[e]),e.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){let r=ar();O(e)&&(e=[e]);let o=this.options.preload||[],s=e.filter(a=>o.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=o.concat(s),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{let o=new Intl.Locale(e);if(o&&o.getTextInfo){let s=o.getTextInfo();if(s&&s.direction)return s.direction}}catch{}let n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new ri(Xc());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){let r=new t(e,n);return r.createInstance=t.createInstance,r}cloneInstance(e={},n=Zr){let r=e.forkResourceStore;r&&delete e.forkResourceStore;let o={...this.options,...e,isClone:!0},s=new t(o);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(l=>{s[l]=this[l]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){let l=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},c[u]=Object.keys(c[u]).reduce((d,p)=>(d[p]={...c[u][p]},d),c[u]),c),{});s.store=new ti(l,o),s.services.resourceStore=s.store}return e.interpolation&&(s.services.interpolator=new ii(o)),s.translator=new ni(s.services,o),s.translator.on("*",(l,...c)=>{s.emit(l,...c)}),s.init(o,n),s.translator.options=o,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},ke=_s.createInstance(),jy=ke.createInstance,Ky=ke.dir,ru=ke.init,qy=ke.loadResources,Gy=ke.reloadResources,Yy=ke.use,Jy=ke.changeLanguage,Qy=ke.getFixedT,vt=ke.t,Xy=ke.exists,Zy=ke.setDefaultNamespace,e0=ke.hasLoadedNamespace,t0=ke.loadNamespaces,n0=ke.loadLanguages;var ou=require("obsidian");var iu=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var vn=class extends iu.Modal{static{i(this,"ModalBase")}constructor(e,n,r){super(e.app),this.resolve=n,K(this.containerEl,r),e.cssClass&&this.containerEl.addClass(e.cssClass)}};async function oi(t){return await new Promise(e=>{t(e).open()})}i(oi,"showModal");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var $s=class extends vn{static{i(this,"AlertModal")}options;constructor(e,n){super(e,n,M.AlertModal);let r={app:e.app,cssClass:"",message:e.message,okButtonText:vt(o=>o.obsidianDevUtils.buttons.ok),title:""};this.options={...r,...e}}onClose(){super.onClose(),this.resolve()}onOpen(){super.onOpen(),this.titleEl.setText(this.options.title),this.contentEl.createEl("p",{text:this.options.message});let e=new ou.ButtonComponent(this.contentEl);e.setButtonText(this.options.okButtonText),e.setCta(),e.onClick(this.close.bind(this)),e.setClass(M.OkButton)}};async function si(t){await oi(e=>new $s(t,e))}i(si,"alert");var pi=require("obsidian");var su=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ai=class extends su.Component{static{i(this,"AsyncEventsComponent")}registerAsyncEvent(e){li(this,e)}};function li(t,e){t.register(()=>{e.asyncEvents.offref(e)})}i(li,"registerAsyncEvent");var lu=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ci={obsidianDevUtils:{asyncWithNotice:{milliseconds:"milliseconds...",operation:"Operation",runningFor:"Running for",terminateOperation:"You can terminate the operation by clicking the button below, but be aware it might leave the vault in an inconsistent state.",timedOut:"The operation timed out after {{duration}} milliseconds."},buttons:{cancel:"Cancel",ok:"OK"},callout:{loadContent:"Load content for callout"},dataview:{itemsPerPage:"Items per page:",jumpToPage:"Jump to page:",pageHeader:"Page {{pageNumber}} of {{totalPages}}, Total items: {{totalItems}}"},metadataCache:{getBacklinksForFilePath:"Get backlinks for {{filePath}}"},notices:{attachmentIsStillUsed:"Attachment {{attachmentPath}} is still used by other notes. It will not be deleted.",unhandledError:"An unhandled error occurred. Please check the console for more information."},queue:{flushQueue:"Flush queue"},renameDeleteHandler:{handleDelete:"Handle delete: {{filePath}}",handleOrphanedRenames:"Handle orphaned renames",handleRename:"Handle rename: {{oldPath}} -> {{newPath}}",updatedLinks:"Updated {{linksCount}} links in {{filesCount}} files."},vault:{processFile:"Process file {{filePath}}"}}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Vs="en",$f={en:ci},ui=$f;i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var au="translation",zs=!1;async function Us(t,e=!0){zs||(zs=!0,await ru({fallbackLng:Vs,initAsync:e,interpolation:{escapeValue:!1},lng:(0,lu.getLanguage)(),resources:Object.fromEntries(Object.entries(t).map(([n,r])=>[n,{[au]:r}])),returnEmptyString:!1,returnNull:!1}),ke.addResourceBundle(Vs,au,ci,!0,!1))}i(Us,"initI18N");function Vf(t,e){return zs||(console.warn("I18N was not initialized, initializing default obsidian-dev-utils translations"),ee(()=>Us(ui,!1))),vt(t,e)}i(Vf,"tImpl");var E=Vf;i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function zf(t){let e=new Set;return t.workspace.iterateAllLeaves(n=>{e.add(n.getContainer())}),Array.from(e)}i(zf,"getAllContainers");function cu(t){return zf(t).map(e=>e.win)}i(cu,"getAllDomWindows");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var di=class extends pi.Plugin{static{i(this,"PluginBase")}events=new lt;get abortSignal(){if(!this._abortSignal)throw new Error("Abort signal not defined");return this._abortSignal}get settings(){return this.settingsManager.settingsWrapper.safeSettings}get settingsManager(){if(!this._settingsManager)throw new Error("Settings manager not defined");return this._settingsManager}get settingsTab(){if(!this._settingsTab)throw new Error("Settings tab not defined");return this._settingsTab}_abortSignal;_settingsManager=null;_settingsTab=null;lifecycleEventNames=new Set;notice;consoleDebug(e,...n){Yr(this.manifest.id,1)(e,...n)}async onExternalSettingsChange(){await super.onExternalSettingsChange?.(),await this._settingsManager?.loadFromFile(!1)}async onload(){await super.onload(),await this.onloadImpl(),Nc(this.afterLoad.bind(this))}onunload(){super.onunload(),ee(async()=>{try{await this.onunloadImpl()}finally{await this.triggerLifecycleEvent("unload")}})}registerDomWindowHandler(e){let n=window;e(n),this.app.workspace.onLayoutReady(()=>{for(let r of cu(this.app))r!==n&&e(r);this.registerEvent(this.app.workspace.on("window-open",r=>{e(r.win)}))})}registerForLifecycleEvent(e,n){ee(async()=>{await this.waitForLifecycleEvent(e),await n()})}registerPopupDocumentDomEvent(e,n,r){this.registerDomWindowHandler(o=>{this.registerDomEvent(o.document,e,n,r)})}registerPopupWindowDomEvent(e,n,r){this.registerDomWindowHandler(o=>{this.registerDomEvent(o,e,n,r)})}async waitForLifecycleEvent(e){this.lifecycleEventNames.has(e)||await new Promise(n=>{this.events.once(e,()=>{n()})})}createSettingsManager(){return null}createSettingsTab(){return null}createTranslationsMap(){return ui}handleAsyncError(e){this.showNotice(E(n=>n.obsidianDevUtils.notices.unhandledError))}async onLayoutReady(){await at()}async onloadImpl(){zc(this.app,this.manifest.id),this.registerDomWindowHandler(n=>{Vc(n)}),await Us(this.createTranslationsMap()),this.register(Ql(this.handleAsyncError.bind(this))),this._settingsManager=this.createSettingsManager(),this._settingsManager&&(li(this,this._settingsManager.on("loadSettings",this.onLoadSettings.bind(this))),li(this,this._settingsManager.on("saveSettings",this.onSaveSettings.bind(this)))),await this._settingsManager?.loadFromFile(!0),this._settingsTab=this.createSettingsTab(),this._settingsTab&&this.addSettingTab(this._settingsTab);let e=new AbortController;this._abortSignal=e.signal,this.register(()=>{e.abort(new un(`Plugin ${this.manifest.id} had been unloaded`))})}async onLoadSettings(e,n){await at()}async onSaveSettings(e,n,r){await at()}async onunloadImpl(){await at()}showNotice(e){this.notice&&this.notice.hide(),this.notice=new pi.Notice(`${this.manifest.name}
${e}`)}async afterLoad(){this.abortSignal.aborted||(await this.triggerLifecycleEvent("load"),this.app.workspace.onLayoutReady(An(this.onLayoutReadyBase.bind(this))))}async onLayoutReadyBase(){try{await this.onLayoutReady()}finally{await this.triggerLifecycleEvent("layoutReady")}}async triggerLifecycleEvent(e){this.lifecycleEventNames.add(e),await this.events.triggerAsync(e)}};var uu=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function hi(t){return Rc({...t,onTimeout:pu})}i(hi,"retryWithTimeoutNotice");async function du(t){return Ps({...t,onTimeout:pu})}i(du,"runWithTimeoutNotice");function pu(t){let e=Math.trunc(performance.now()-t.duration),n,r,o=1e3,s=new uu.Notice(createFragment(l=>{t.operationName&&(l.appendText(E(u=>u.obsidianDevUtils.asyncWithNotice.operation)),l.appendText(": "),l.appendText(t.operationName),l.createEl("br")),l.appendText(E(u=>u.obsidianDevUtils.asyncWithNotice.timedOut,{duration:t.duration})),l.createEl("br"),l.appendText(E(u=>u.obsidianDevUtils.asyncWithNotice.runningFor)),l.appendText(" "),n=l.createSpan(),l.appendText(" "),l.appendText(E(u=>u.obsidianDevUtils.asyncWithNotice.milliseconds)),l.createEl("br"),l.appendText(E(u=>u.obsidianDevUtils.asyncWithNotice.terminateOperation)),l.createEl("br"),l.createEl("button",{text:E(u=>u.obsidianDevUtils.buttons.cancel)}).addEventListener("click",()=>{t.terminateOperation(),clearInterval(r),s.hide()})}));a(),r=window.setInterval(a,o),t.onOperationCompleted(()=>{clearInterval(r),s.hide()});function a(){let l=Math.max(t.duration,Math.round((performance.now()-e)/o)*o);n.textContent=String(l)}i(a,"updateRunningTime")}i(pu,"onTimeoutNotice");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function hu(t,e,n,r){n.throwIfAborted();let o=J("Logger:invokeAsyncAndLog"),s=performance.now();r??=Ee(1),pt(o,r,`${t}:start`,{fn:e,timestampStart:s});try{await e(n);let a=performance.now(),l=Math.trunc(a-s);n.aborted&&(pt(o,r,`${t}:aborted`,{abortReason:n.reason,duration:l,fn:e,timestampEnd:a,timestampStart:s}),n.throwIfAborted()),pt(o,r,`${t}:end`,{duration:l,fn:e,timestampEnd:a,timestampStart:s})}catch(a){let l=performance.now();throw pt(o,r,`${t}:error`,{duration:Math.trunc(l-s),error:a,fn:e,timestampEnd:l,timestampStart:s}),a}}i(hu,"invokeAsyncAndLog");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function $e(t){let e=t.stackTrace??Ee(1);ee(()=>Uf(t),e)}i($e,"addToQueue");async function Uf(t){let e=t.abortSignal??Se();e.throwIfAborted();let r=t.timeoutInMilliseconds??6e4,o=t.stackTrace??Ee(1),s=t.operationName??"",a=fu(t.app).value;a.items.push({abortSignal:e,operationFn:t.operationFn,operationName:s,stackTrace:o,timeoutInMilliseconds:r}),a.promise=a.promise.then(()=>mu(t.app)),await a.promise}i(Uf,"addToQueueAndWait");function fu(t){return Pe(t,"queue",{items:[],promise:Promise.resolve()})}i(fu,"getQueue");async function mu(t){let e=fu(t).value,n=e.items[0];n&&(await Ss(()=>du({context:{queuedFn:n.operationFn},async operationFn(r){await hu(n.operationName||mu.name,n.operationFn,nt(r,n.abortSignal),n.stackTrace)},operationName:n.operationName,stackTrace:n.stackTrace,timeoutInMilliseconds:n.timeoutInMilliseconds})),e.items.shift())}i(mu,"processNextQueueItem");var Yi=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Tt=(t=>(t.DeleteNote="DeleteNote",t.RenameNote="RenameNote",t.Unknown="Unknown",t))(Tt||{}),bu="__DUMMY__";async function Ht(t){let{app:e,notePathOrFile:n,oldAttachmentPathOrFile:r,shouldSkipDuplicateCheck:o}=t,s=G(e,r),a=rt(s),l=Ie(s,a),c=X(e,s),u=e.vault.getAvailablePathForAttachments.extended;return u?u({attachmentFileBaseName:l,attachmentFileContent:c?await e.vault.readBinary(c):void 0,attachmentFileExtension:a.slice(1),attachmentFileStat:c?.stat,context:t.context,notePathOrFile:n,oldAttachmentPathOrFile:t.oldAttachmentPathOrFile,oldNotePathOrFile:t.oldNotePathOrFile,shouldSkipDuplicateCheck:o,shouldSkipMissingAttachmentFolderCreation:!0}):await Wf({app:e,attachmentFileBaseName:l,attachmentFileExtension:a.slice(1),notePathOrFile:n,shouldSkipDuplicateCheck:o,shouldSkipMissingAttachmentFolderCreation:!0})}i(Ht,"getAttachmentFilePath");async function En(t,e,n="Unknown"){return je(await Ht({app:t,context:n,notePathOrFile:e,oldAttachmentPathOrFile:bu,shouldSkipDuplicateCheck:!0}))}i(En,"getAttachmentFolderPath");async function Wf(t){let{app:e,attachmentFileExtension:n,notePathOrFile:r,shouldSkipDuplicateCheck:o,shouldSkipMissingAttachmentFolderCreation:s}=t,a=e.vault.getConfig("attachmentFolderPath"),l=a==="."||a==="./",c=a.startsWith("./")?_r(a,"./"):null,u=X(e,r);l?a=u?u.parent?.path??"":"":c&&(a=(u?u.parent?.getParentPrefix()??"":"")+c),a=nr(gu(a));let d=nr(gu(t.attachmentFileBaseName)),p=Ke(e,a,!0);!p&&c&&(p=s?fn(e,a,!0):await e.vault.createFolder(a));let h=p?.getParentPrefix()??"";return o?oc(h+d,n):e.vault.getAvailablePath(h+d,n)}i(Wf,"getAvailablePathForAttachments");async function Ws(t,e,n="Unknown"){let r=await En(t,e,n),o=await En(t,ie(q(e),`${bu}.${zt}`),n);return r!==o}i(Ws,"hasOwnAttachmentFolder");function gu(t){return t=ye(t,/(?:[\\/])+/g,"/"),t=ye(t,/^\/+|\/+$/g,""),t||"/"}i(gu,"normalizeSlashes");var Vn=require("obsidian");var Hf={};function jt(t,e){let n=e||Hf,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return yu(t,r,o)}i(jt,"toString");function yu(t,e,n){if(jf(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return wu(t.children,e,n)}return Array.isArray(t)?wu(t,e,n):""}i(yu,"one");function wu(t,e,n){let r=[],o=-1;for(;++o<t.length;)r[o]=yu(t[o],e,n);return r.join("")}i(wu,"all");function jf(t){return!!(t&&typeof t=="object")}i(jf,"node");var ku=document.createElement("i");function Sn(t){let e="&"+t+";";ku.innerHTML=e;let n=ku.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}i(Sn,"decodeNamedCharacterReference");function me(t,e,n,r){let o=t.length,s=0,a;if(e<0?e=-e>o?0:o+e:e=e>o?o:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(e,0),t.splice(...a),s+=1e4,e+=1e4}i(me,"splice");function Te(t,e){return t.length>0?(me(t,t.length,0,e),t):e}i(Te,"push");var Au={}.hasOwnProperty;function Cu(t){let e={},n=-1;for(;++n<t.length;)Kf(e,t[n]);return e}i(Cu,"combineExtensions");function Kf(t,e){let n;for(n in e){let o=(Au.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n],a;if(s)for(a in s){Au.call(o,a)||(o[a]=[]);let l=s[a];qf(o[a],Array.isArray(l)?l:l?[l]:[])}}}i(Kf,"syntaxExtension");function qf(t,e){let n=-1,r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);me(t,0,0,r)}i(qf,"constructs");function fi(t,e){let n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"\uFFFD":String.fromCodePoint(n)}i(fi,"decodeNumericCharacterReference");function Et(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}i(Et,"normalizeIdentifier");var Ve=Ft(/[A-Za-z]/),Fe=Ft(/[\dA-Za-z]/),xu=Ft(/[#-'*+\--9=?A-Z^-~]/);function ur(t){return t!==null&&(t<32||t===127)}i(ur,"asciiControl");var dr=Ft(/\d/),vu=Ft(/[\dA-Fa-f]/),Eu=Ft(/[!-/:-@[-`{-~]/);function F(t){return t!==null&&t<-2}i(F,"markdownLineEnding");function ne(t){return t!==null&&(t<0||t===32)}i(ne,"markdownLineEndingOrSpace");function D(t){return t===-2||t===-1||t===32}i(D,"markdownSpace");var Su=Ft(/\p{P}|\p{S}/u),Pu=Ft(/\s/);function Ft(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}i(Ft,"regexCheck");function _(t,e,n,r){let o=r?r-1:Number.POSITIVE_INFINITY,s=0;return a;function a(c){return D(c)?(t.enter(n),l(c)):e(c)}function l(c){return D(c)&&s++<o?(t.consume(c),l):(t.exit(n),e(c))}}i(_,"factorySpace");var Tu={tokenize:Gf};function Gf(t){let e=t.attempt(this.parser.constructs.contentInitial,r,o),n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),_(t,e,"linePrefix")}function o(l){return t.enter("paragraph"),s(l)}function s(l){let c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(l)}function a(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return F(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),a)}}i(Gf,"initializeContent");var Iu={tokenize:Yf},Fu={tokenize:Jf};function Yf(t){let e=this,n=[],r=0,o,s,a;return l;function l(v){if(r<n.length){let P=n[r];return e.containerState=P[1],t.attempt(P[0].continuation,c,u)(v)}return u(v)}function c(v){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,o&&C();let P=e.events.length,I=P,A;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){A=e.events[I][1].end;break}w(r);let $=P;for(;$<e.events.length;)e.events[$][1].end={...A},$++;return me(e.events,I+1,0,e.events.slice(P)),e.events.length=$,u(v)}return l(v)}function u(v){if(r===n.length){if(!o)return h(v);if(o.currentConstruct&&o.currentConstruct.concrete)return b(v);e.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Fu,d,p)(v)}function d(v){return o&&C(),w(r),h(v)}function p(v){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,b(v)}function h(v){return e.containerState={},t.attempt(Fu,f,b)(v)}function f(v){return r++,n.push([e.currentConstruct,e.containerState]),h(v)}function b(v){if(v===null){o&&C(),w(0),t.consume(v);return}return o=o||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:s}),k(v)}function k(v){if(v===null){y(t.exit("chunkFlow"),!0),w(0),t.consume(v);return}return F(v)?(t.consume(v),y(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(v),k)}function y(v,P){let I=e.sliceStream(v);if(P&&I.push(null),v.previous=s,s&&(s.next=v),s=v,o.defineSkip(v.start),o.write(I),e.parser.lazy[v.start.line]){let A=o.events.length;for(;A--;)if(o.events[A][1].start.offset<a&&(!o.events[A][1].end||o.events[A][1].end.offset>a))return;let $=e.events.length,H=$,R,z;for(;H--;)if(e.events[H][0]==="exit"&&e.events[H][1].type==="chunkFlow"){if(R){z=e.events[H][1].end;break}R=!0}for(w(r),A=$;A<e.events.length;)e.events[A][1].end={...z},A++;me(e.events,H+1,0,e.events.slice($)),e.events.length=A}}function w(v){let P=n.length;for(;P-- >v;){let I=n[P];e.containerState=I[1],I[0].exit.call(e,t)}n.length=v}function C(){o.write([null]),s=void 0,o=void 0,e.containerState._closeFlow=void 0}}i(Yf,"initializeDocument");function Jf(t,e,n){return _(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}i(Jf,"tokenizeContainer");function Pn(t){if(t===null||ne(t)||Pu(t))return 1;if(Su(t))return 2}i(Pn,"classifyCharacter");function Tn(t,e,n){let r=[],o=-1;for(;++o<t.length;){let s=t[o].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}i(Tn,"resolveAll");var pr={name:"attention",resolveAll:Qf,tokenize:Xf};function Qf(t,e){let n=-1,r,o,s,a,l,c,u,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;let p={...t[r][1].end},h={...t[n][1].start};Mu(p,-c),Mu(h,c),a={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},s={type:c>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},o={type:c>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},t[r][1].end={...a.start},t[n][1].start={...l.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=Te(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=Te(u,[["enter",o,e],["enter",a,e],["exit",a,e],["enter",s,e]]),u=Te(u,Tn(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=Te(u,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",o,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,u=Te(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,me(t,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}i(Qf,"resolveAllAttention");function Xf(t,e){let n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=Pn(r),s;return a;function a(c){return s=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===s)return t.consume(c),l;let u=t.exit("attentionSequence"),d=Pn(c),p=!d||d===2&&o||n.includes(c),h=!o||o===2&&d||n.includes(r);return u._open=!!(s===42?p:p&&(o||!h)),u._close=!!(s===42?h:h&&(d||!p)),e(c)}}i(Xf,"tokenizeAttention");function Mu(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}i(Mu,"movePoint");var Hs={name:"autolink",tokenize:Zf};function Zf(t,e,n){let r=0;return o;function o(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(f){return Ve(f)?(t.consume(f),a):f===64?n(f):u(f)}function a(f){return f===43||f===45||f===46||Fe(f)?(r=1,l(f)):u(f)}function l(f){return f===58?(t.consume(f),r=0,c):(f===43||f===45||f===46||Fe(f))&&r++<32?(t.consume(f),l):(r=0,u(f))}function c(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||ur(f)?n(f):(t.consume(f),c)}function u(f){return f===64?(t.consume(f),d):xu(f)?(t.consume(f),u):n(f)}function d(f){return Fe(f)?p(f):n(f)}function p(f){return f===46?(t.consume(f),r=0,d):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):h(f)}function h(f){if((f===45||Fe(f))&&r++<63){let b=f===45?h:p;return t.consume(f),b}return n(f)}}i(Zf,"tokenizeAutolink");var It={partial:!0,tokenize:em};function em(t,e,n){return r;function r(s){return D(s)?_(t,o,"linePrefix")(s):o(s)}function o(s){return s===null||F(s)?e(s):n(s)}}i(em,"tokenizeBlankLine");var mi={continuation:{tokenize:nm},exit:rm,name:"blockQuote",tokenize:tm};function tm(t,e,n){let r=this;return o;function o(a){if(a===62){let l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),s}return n(a)}function s(a){return D(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}i(tm,"tokenizeBlockQuoteStart");function nm(t,e,n){let r=this;return o;function o(a){return D(a)?_(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return t.attempt(mi,e,n)(a)}}i(nm,"tokenizeBlockQuoteContinuation");function rm(t){t.exit("blockQuote")}i(rm,"exit");var gi={name:"characterEscape",tokenize:im};function im(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),o}function o(s){return Eu(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}i(im,"tokenizeCharacterEscape");var bi={name:"characterReference",tokenize:om};function om(t,e,n){let r=this,o=0,s,a;return l;function l(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),c}function c(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,a=Fe,d(p))}function u(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,a=vu,d):(t.enter("characterReferenceValue"),s=7,a=dr,d(p))}function d(p){if(p===59&&o){let h=t.exit("characterReferenceValue");return a===Fe&&!Sn(r.sliceSerialize(h))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(p)&&o++<s?(t.consume(p),d):n(p)}}i(om,"tokenizeCharacterReference");var Lu={partial:!0,tokenize:am},wi={concrete:!0,name:"codeFenced",tokenize:sm};function sm(t,e,n){let r=this,o={partial:!0,tokenize:I},s=0,a=0,l;return c;function c(A){return u(A)}function u(A){let $=r.events[r.events.length-1];return s=$&&$[1].type==="linePrefix"?$[2].sliceSerialize($[1],!0).length:0,l=A,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(A)}function d(A){return A===l?(a++,t.consume(A),d):a<3?n(A):(t.exit("codeFencedFenceSequence"),D(A)?_(t,p,"whitespace")(A):p(A))}function p(A){return A===null||F(A)?(t.exit("codeFencedFence"),r.interrupt?e(A):t.check(Lu,k,P)(A)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(A))}function h(A){return A===null||F(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(A)):D(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),_(t,f,"whitespace")(A)):A===96&&A===l?n(A):(t.consume(A),h)}function f(A){return A===null||F(A)?p(A):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),b(A))}function b(A){return A===null||F(A)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(A)):A===96&&A===l?n(A):(t.consume(A),b)}function k(A){return t.attempt(o,P,y)(A)}function y(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),w}function w(A){return s>0&&D(A)?_(t,C,"linePrefix",s+1)(A):C(A)}function C(A){return A===null||F(A)?t.check(Lu,k,P)(A):(t.enter("codeFlowValue"),v(A))}function v(A){return A===null||F(A)?(t.exit("codeFlowValue"),C(A)):(t.consume(A),v)}function P(A){return t.exit("codeFenced"),e(A)}function I(A,$,H){let R=0;return z;function z(N){return A.enter("lineEnding"),A.consume(N),A.exit("lineEnding"),de}function de(N){return A.enter("codeFencedFence"),D(N)?_(A,W,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):W(N)}function W(N){return N===l?(A.enter("codeFencedFenceSequence"),T(N)):H(N)}function T(N){return N===l?(R++,A.consume(N),T):R>=a?(A.exit("codeFencedFenceSequence"),D(N)?_(A,L,"whitespace")(N):L(N)):H(N)}function L(N){return N===null||F(N)?(A.exit("codeFencedFence"),$(N)):H(N)}}}i(sm,"tokenizeCodeFenced");function am(t,e,n){let r=this;return o;function o(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}i(am,"tokenizeNonLazyContinuation");var hr={name:"codeIndented",tokenize:cm},lm={partial:!0,tokenize:um};function cm(t,e,n){let r=this;return o;function o(u){return t.enter("codeIndented"),_(t,s,"linePrefix",5)(u)}function s(u){let d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?c(u):F(u)?t.attempt(lm,a,c)(u):(t.enter("codeFlowValue"),l(u))}function l(u){return u===null||F(u)?(t.exit("codeFlowValue"),a(u)):(t.consume(u),l)}function c(u){return t.exit("codeIndented"),e(u)}}i(cm,"tokenizeCodeIndented");function um(t,e,n){let r=this;return o;function o(a){return r.parser.lazy[r.now().line]?n(a):F(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o):_(t,s,"linePrefix",5)(a)}function s(a){let l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):F(a)?o(a):n(a)}}i(um,"tokenizeFurtherStart");var js={name:"codeText",previous:pm,resolve:dm,tokenize:hm};function dm(t){let e=t.length-4,n=3,r,o;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)o===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(o=r):(r===e||t[r][1].type==="lineEnding")&&(t[o][1].type="codeTextData",r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),e-=r-o-2,r=o+2),o=void 0);return t}i(dm,"resolveCodeText");function pm(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}i(pm,"previous");function hm(t,e,n){let r=this,o=0,s,a;return l;function l(h){return t.enter("codeText"),t.enter("codeTextSequence"),c(h)}function c(h){return h===96?(t.consume(h),o++,c):(t.exit("codeTextSequence"),u(h))}function u(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),u):h===96?(a=t.enter("codeTextSequence"),s=0,p(h)):F(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),u):(t.enter("codeTextData"),d(h))}function d(h){return h===null||h===32||h===96||F(h)?(t.exit("codeTextData"),u(h)):(t.consume(h),d)}function p(h){return h===96?(t.consume(h),s++,p):s===o?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(a.type="codeTextData",d(h))}}i(hm,"tokenizeCodeText");var yi=class{static{i(this,"SpliceBuffer")}constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){let r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){let o=n||0;this.setCursor(Math.trunc(e));let s=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return r&&fr(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),fr(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),fr(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){let n=this.left.splice(e,Number.POSITIVE_INFINITY);fr(this.right,n.reverse())}else{let n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);fr(this.left,n.reverse())}}};function fr(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}i(fr,"chunkedPush");function ki(t){let e={},n=-1,r,o,s,a,l,c,u,d=new yi(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,fm(d,n)),n=e[n],u=!0);else if(r[1]._container){for(s=n,o=void 0;s--;)if(a=d.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(o&&(d.get(o)[1].type="lineEndingBlank"),a[1].type="lineEnding",o=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;o&&(r[1].end={...d.get(o)[1].start},l=d.slice(o,n),l.unshift(r),d.splice(o,n-o+1,l))}}return me(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}i(ki,"subtokenize");function fm(t,e){let n=t.get(e)[1],r=t.get(e)[2],o=e-1,s=[],a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));let l=a.events,c=[],u={},d,p,h=-1,f=n,b=0,k=0,y=[k];for(;f;){for(;t.get(++o)[1]!==f;);s.push(o),f._tokenizer||(d=r.sliceStream(f),f.next||d.push(null),p&&a.defineSkip(f.start),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),p=f,f=f.next}for(f=n;++h<l.length;)l[h][0]==="exit"&&l[h-1][0]==="enter"&&l[h][1].type===l[h-1][1].type&&l[h][1].start.line!==l[h][1].end.line&&(k=h+1,y.push(k),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(a.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),h=y.length;h--;){let w=l.slice(y[h],y[h+1]),C=s.pop();c.push([C,C+w.length-1]),t.splice(C,2,w)}for(c.reverse(),h=-1;++h<c.length;)u[b+c[h][0]]=b+c[h][1],b+=c[h][1]-c[h][0]-1;return u}i(fm,"subcontent");var Ks={resolve:gm,tokenize:bm},mm={partial:!0,tokenize:wm};function gm(t){return ki(t),t}i(gm,"resolveContent");function bm(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),o(l)}function o(l){return l===null?s(l):F(l)?t.check(mm,a,s)(l):(t.consume(l),o)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function a(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}i(bm,"tokenizeContent");function wm(t,e,n){let r=this;return o;function o(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),_(t,s,"linePrefix")}function s(a){if(a===null||F(a))return n(a);let l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}i(wm,"tokenizeContinuation");function Ai(t,e,n,r,o,s,a,l,c){let u=c||Number.POSITIVE_INFINITY,d=0;return p;function p(w){return w===60?(t.enter(r),t.enter(o),t.enter(s),t.consume(w),t.exit(s),h):w===null||w===32||w===41||ur(w)?n(w):(t.enter(r),t.enter(a),t.enter(l),t.enter("chunkString",{contentType:"string"}),k(w))}function h(w){return w===62?(t.enter(s),t.consume(w),t.exit(s),t.exit(o),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),f(w))}function f(w){return w===62?(t.exit("chunkString"),t.exit(l),h(w)):w===null||w===60||F(w)?n(w):(t.consume(w),w===92?b:f)}function b(w){return w===60||w===62||w===92?(t.consume(w),f):f(w)}function k(w){return!d&&(w===null||w===41||ne(w))?(t.exit("chunkString"),t.exit(l),t.exit(a),t.exit(r),e(w)):d<u&&w===40?(t.consume(w),d++,k):w===41?(t.consume(w),d--,k):w===null||w===32||w===40||ur(w)?n(w):(t.consume(w),w===92?y:k)}function y(w){return w===40||w===41||w===92?(t.consume(w),k):k(w)}}i(Ai,"factoryDestination");function Ci(t,e,n,r,o,s){let a=this,l=0,c;return u;function u(f){return t.enter(r),t.enter(o),t.consume(f),t.exit(o),t.enter(s),d}function d(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(f):f===93?(t.exit(s),t.enter(o),t.consume(f),t.exit(o),t.exit(r),e):F(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),p(f))}function p(f){return f===null||f===91||f===93||F(f)||l++>999?(t.exit("chunkString"),d(f)):(t.consume(f),c||(c=!D(f)),f===92?h:p)}function h(f){return f===91||f===92||f===93?(t.consume(f),l++,p):p(f)}}i(Ci,"factoryLabel");function xi(t,e,n,r,o,s){let a;return l;function l(h){return h===34||h===39||h===40?(t.enter(r),t.enter(o),t.consume(h),t.exit(o),a=h===40?41:h,c):n(h)}function c(h){return h===a?(t.enter(o),t.consume(h),t.exit(o),t.exit(r),e):(t.enter(s),u(h))}function u(h){return h===a?(t.exit(s),c(a)):h===null?n(h):F(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),_(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===a||h===null||F(h)?(t.exit("chunkString"),u(h)):(t.consume(h),h===92?p:d)}function p(h){return h===a||h===92?(t.consume(h),d):d(h)}}i(xi,"factoryTitle");function Kt(t,e){let n;return r;function r(o){return F(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),n=!0,r):D(o)?_(t,r,n?"linePrefix":"lineSuffix")(o):e(o)}}i(Kt,"factoryWhitespace");var qs={name:"definition",tokenize:km},ym={partial:!0,tokenize:Am};function km(t,e,n){let r=this,o;return s;function s(f){return t.enter("definition"),a(f)}function a(f){return Ci.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return o=Et(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),c):n(f)}function c(f){return ne(f)?Kt(t,u)(f):u(f)}function u(f){return Ai(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function d(f){return t.attempt(ym,p,p)(f)}function p(f){return D(f)?_(t,h,"whitespace")(f):h(f)}function h(f){return f===null||F(f)?(t.exit("definition"),r.parser.defined.push(o),e(f)):n(f)}}i(km,"tokenizeDefinition");function Am(t,e,n){return r;function r(l){return ne(l)?Kt(t,o)(l):n(l)}function o(l){return xi(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return D(l)?_(t,a,"whitespace")(l):a(l)}function a(l){return l===null||F(l)?e(l):n(l)}}i(Am,"tokenizeTitleBefore");var Gs={name:"hardBreakEscape",tokenize:Cm};function Cm(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),o}function o(s){return F(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}i(Cm,"tokenizeHardBreakEscape");var Ys={name:"headingAtx",resolve:xm,tokenize:vm};function xm(t,e){let n=t.length-2,r=3,o,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(o={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},me(t,r,n-r+1,[["enter",o,e],["enter",s,e],["exit",s,e],["exit",o,e]])),t}i(xm,"resolveHeadingAtx");function vm(t,e,n){let r=0;return o;function o(d){return t.enter("atxHeading"),s(d)}function s(d){return t.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(t.consume(d),a):d===null||ne(d)?(t.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(t.enter("atxHeadingSequence"),c(d)):d===null||F(d)?(t.exit("atxHeading"),e(d)):D(d)?_(t,l,"whitespace")(d):(t.enter("atxHeadingText"),u(d))}function c(d){return d===35?(t.consume(d),c):(t.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||ne(d)?(t.exit("atxHeadingText"),l(d)):(t.consume(d),u)}}i(vm,"tokenizeHeadingAtx");var Nu=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Js=["pre","script","style","textarea"];var Qs={concrete:!0,name:"htmlFlow",resolveTo:Pm,tokenize:Tm},Em={partial:!0,tokenize:Im},Sm={partial:!0,tokenize:Fm};function Pm(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}i(Pm,"resolveToHtmlFlow");function Tm(t,e,n){let r=this,o,s,a,l,c;return u;function u(g){return d(g)}function d(g){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(g),p}function p(g){return g===33?(t.consume(g),h):g===47?(t.consume(g),s=!0,k):g===63?(t.consume(g),o=3,r.interrupt?e:m):Ve(g)?(t.consume(g),a=String.fromCharCode(g),y):n(g)}function h(g){return g===45?(t.consume(g),o=2,f):g===91?(t.consume(g),o=5,l=0,b):Ve(g)?(t.consume(g),o=4,r.interrupt?e:m):n(g)}function f(g){return g===45?(t.consume(g),r.interrupt?e:m):n(g)}function b(g){let we="CDATA[";return g===we.charCodeAt(l++)?(t.consume(g),l===we.length?r.interrupt?e:W:b):n(g)}function k(g){return Ve(g)?(t.consume(g),a=String.fromCharCode(g),y):n(g)}function y(g){if(g===null||g===47||g===62||ne(g)){let we=g===47,Bt=a.toLowerCase();return!we&&!s&&Js.includes(Bt)?(o=1,r.interrupt?e(g):W(g)):Nu.includes(a.toLowerCase())?(o=6,we?(t.consume(g),w):r.interrupt?e(g):W(g)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(g):s?C(g):v(g))}return g===45||Fe(g)?(t.consume(g),a+=String.fromCharCode(g),y):n(g)}function w(g){return g===62?(t.consume(g),r.interrupt?e:W):n(g)}function C(g){return D(g)?(t.consume(g),C):z(g)}function v(g){return g===47?(t.consume(g),z):g===58||g===95||Ve(g)?(t.consume(g),P):D(g)?(t.consume(g),v):z(g)}function P(g){return g===45||g===46||g===58||g===95||Fe(g)?(t.consume(g),P):I(g)}function I(g){return g===61?(t.consume(g),A):D(g)?(t.consume(g),I):v(g)}function A(g){return g===null||g===60||g===61||g===62||g===96?n(g):g===34||g===39?(t.consume(g),c=g,$):D(g)?(t.consume(g),A):H(g)}function $(g){return g===c?(t.consume(g),c=null,R):g===null||F(g)?n(g):(t.consume(g),$)}function H(g){return g===null||g===34||g===39||g===47||g===60||g===61||g===62||g===96||ne(g)?I(g):(t.consume(g),H)}function R(g){return g===47||g===62||D(g)?v(g):n(g)}function z(g){return g===62?(t.consume(g),de):n(g)}function de(g){return g===null||F(g)?W(g):D(g)?(t.consume(g),de):n(g)}function W(g){return g===45&&o===2?(t.consume(g),V):g===60&&o===1?(t.consume(g),j):g===62&&o===4?(t.consume(g),Q):g===63&&o===3?(t.consume(g),m):g===93&&o===5?(t.consume(g),xe):F(g)&&(o===6||o===7)?(t.exit("htmlFlowData"),t.check(Em,he,T)(g)):g===null||F(g)?(t.exit("htmlFlowData"),T(g)):(t.consume(g),W)}function T(g){return t.check(Sm,L,he)(g)}function L(g){return t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),N}function N(g){return g===null||F(g)?T(g):(t.enter("htmlFlowData"),W(g))}function V(g){return g===45?(t.consume(g),m):W(g)}function j(g){return g===47?(t.consume(g),a="",pe):W(g)}function pe(g){if(g===62){let we=a.toLowerCase();return Js.includes(we)?(t.consume(g),Q):W(g)}return Ve(g)&&a.length<8?(t.consume(g),a+=String.fromCharCode(g),pe):W(g)}function xe(g){return g===93?(t.consume(g),m):W(g)}function m(g){return g===62?(t.consume(g),Q):g===45&&o===2?(t.consume(g),m):W(g)}function Q(g){return g===null||F(g)?(t.exit("htmlFlowData"),he(g)):(t.consume(g),Q)}function he(g){return t.exit("htmlFlow"),e(g)}}i(Tm,"tokenizeHtmlFlow");function Fm(t,e,n){let r=this;return o;function o(a){return F(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}i(Fm,"tokenizeNonLazyContinuationStart");function Im(t,e,n){return r;function r(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),t.attempt(It,e,n)}}i(Im,"tokenizeBlankLineBefore");var Xs={name:"htmlText",tokenize:Mm};function Mm(t,e,n){let r=this,o,s,a;return l;function l(m){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(m),c}function c(m){return m===33?(t.consume(m),u):m===47?(t.consume(m),I):m===63?(t.consume(m),v):Ve(m)?(t.consume(m),H):n(m)}function u(m){return m===45?(t.consume(m),d):m===91?(t.consume(m),s=0,b):Ve(m)?(t.consume(m),C):n(m)}function d(m){return m===45?(t.consume(m),f):n(m)}function p(m){return m===null?n(m):m===45?(t.consume(m),h):F(m)?(a=p,j(m)):(t.consume(m),p)}function h(m){return m===45?(t.consume(m),f):p(m)}function f(m){return m===62?V(m):m===45?h(m):p(m)}function b(m){let Q="CDATA[";return m===Q.charCodeAt(s++)?(t.consume(m),s===Q.length?k:b):n(m)}function k(m){return m===null?n(m):m===93?(t.consume(m),y):F(m)?(a=k,j(m)):(t.consume(m),k)}function y(m){return m===93?(t.consume(m),w):k(m)}function w(m){return m===62?V(m):m===93?(t.consume(m),w):k(m)}function C(m){return m===null||m===62?V(m):F(m)?(a=C,j(m)):(t.consume(m),C)}function v(m){return m===null?n(m):m===63?(t.consume(m),P):F(m)?(a=v,j(m)):(t.consume(m),v)}function P(m){return m===62?V(m):v(m)}function I(m){return Ve(m)?(t.consume(m),A):n(m)}function A(m){return m===45||Fe(m)?(t.consume(m),A):$(m)}function $(m){return F(m)?(a=$,j(m)):D(m)?(t.consume(m),$):V(m)}function H(m){return m===45||Fe(m)?(t.consume(m),H):m===47||m===62||ne(m)?R(m):n(m)}function R(m){return m===47?(t.consume(m),V):m===58||m===95||Ve(m)?(t.consume(m),z):F(m)?(a=R,j(m)):D(m)?(t.consume(m),R):V(m)}function z(m){return m===45||m===46||m===58||m===95||Fe(m)?(t.consume(m),z):de(m)}function de(m){return m===61?(t.consume(m),W):F(m)?(a=de,j(m)):D(m)?(t.consume(m),de):R(m)}function W(m){return m===null||m===60||m===61||m===62||m===96?n(m):m===34||m===39?(t.consume(m),o=m,T):F(m)?(a=W,j(m)):D(m)?(t.consume(m),W):(t.consume(m),L)}function T(m){return m===o?(t.consume(m),o=void 0,N):m===null?n(m):F(m)?(a=T,j(m)):(t.consume(m),T)}function L(m){return m===null||m===34||m===39||m===60||m===61||m===96?n(m):m===47||m===62||ne(m)?R(m):(t.consume(m),L)}function N(m){return m===47||m===62||ne(m)?R(m):n(m)}function V(m){return m===62?(t.consume(m),t.exit("htmlTextData"),t.exit("htmlText"),e):n(m)}function j(m){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),pe}function pe(m){return D(m)?_(t,xe,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(m):xe(m)}function xe(m){return t.enter("htmlTextData"),a(m)}}i(Mm,"tokenizeHtmlText");var qt={name:"labelEnd",resolveAll:Rm,resolveTo:Dm,tokenize:Bm},Lm={tokenize:_m},Nm={tokenize:$m},Om={tokenize:Vm};function Rm(t){let e=-1,n=[];for(;++e<t.length;){let r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){let o=r.type==="labelImage"?4:2;r.type="data",e+=o}}return t.length!==n.length&&me(t,0,t.length,n),t}i(Rm,"resolveAllLabelEnd");function Dm(t,e){let n=t.length,r=0,o,s,a,l;for(;n--;)if(o=t[n][1],s){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;t[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(s=n,o.type!=="labelLink")){r=2;break}}else o.type==="labelEnd"&&(a=n);let c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[a][1].end}},d={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[a-2][1].start}};return l=[["enter",c,e],["enter",u,e]],l=Te(l,t.slice(s+1,s+r+3)),l=Te(l,[["enter",d,e]]),l=Te(l,Tn(e.parser.constructs.insideSpan.null,t.slice(s+r+4,a-3),e)),l=Te(l,[["exit",d,e],t[a-2],t[a-1],["exit",u,e]]),l=Te(l,t.slice(a+1)),l=Te(l,[["exit",c,e]]),me(t,s,t.length,l),t}i(Dm,"resolveToLabelEnd");function Bm(t,e,n){let r=this,o=r.events.length,s,a;for(;o--;)if((r.events[o][1].type==="labelImage"||r.events[o][1].type==="labelLink")&&!r.events[o][1]._balanced){s=r.events[o][1];break}return l;function l(h){return s?s._inactive?p(h):(a=r.parser.defined.includes(Et(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),c):n(h)}function c(h){return h===40?t.attempt(Lm,d,a?d:p)(h):h===91?t.attempt(Nm,d,a?u:p)(h):a?d(h):p(h)}function u(h){return t.attempt(Om,d,p)(h)}function d(h){return e(h)}function p(h){return s._balanced=!0,n(h)}}i(Bm,"tokenizeLabelEnd");function _m(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),o}function o(p){return ne(p)?Kt(t,s)(p):s(p)}function s(p){return p===41?d(p):Ai(t,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function a(p){return ne(p)?Kt(t,c)(p):d(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?xi(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):d(p)}function u(p){return ne(p)?Kt(t,d)(p):d(p)}function d(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}i(_m,"tokenizeResource");function $m(t,e,n){let r=this;return o;function o(l){return Ci.call(r,t,s,a,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(Et(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function a(l){return n(l)}}i($m,"tokenizeReferenceFull");function Vm(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),o}function o(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}i(Vm,"tokenizeReferenceCollapsed");var Zs={name:"labelStartImage",resolveAll:qt.resolveAll,tokenize:zm};function zm(t,e,n){let r=this;return o;function o(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}i(zm,"tokenizeLabelStartImage");var ea={name:"labelStartLink",resolveAll:qt.resolveAll,tokenize:Um};function Um(t,e,n){let r=this;return o;function o(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}i(Um,"tokenizeLabelStartLink");var mr={name:"lineEnding",tokenize:Wm};function Wm(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),_(t,e,"linePrefix")}}i(Wm,"tokenizeLineEnding");var Gt={name:"thematicBreak",tokenize:Hm};function Hm(t,e,n){let r=0,o;return s;function s(u){return t.enter("thematicBreak"),a(u)}function a(u){return o=u,l(u)}function l(u){return u===o?(t.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||F(u))?(t.exit("thematicBreak"),e(u)):n(u)}function c(u){return u===o?(t.consume(u),r++,c):(t.exit("thematicBreakSequence"),D(u)?_(t,l,"whitespace")(u):l(u))}}i(Hm,"tokenizeThematicBreak");var Ae={continuation:{tokenize:Gm},exit:Jm,name:"list",tokenize:qm},jm={partial:!0,tokenize:Qm},Km={partial:!0,tokenize:Ym};function qm(t,e,n){let r=this,o=r.events[r.events.length-1],s=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,a=0;return l;function l(f){let b=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:dr(f)){if(r.containerState.type||(r.containerState.type=b,t.enter(b,{_container:!0})),b==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(Gt,n,u)(f):u(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(f)}return n(f)}function c(f){return dr(f)&&++a<10?(t.consume(f),c):(!r.interrupt||a<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),u(f)):n(f)}function u(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(It,r.interrupt?n:d,t.attempt(jm,h,p))}function d(f){return r.containerState.initialBlankLine=!0,s++,h(f)}function p(f){return D(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}i(qm,"tokenizeListStart");function Gm(t,e,n){let r=this;return r.containerState._closeFlow=void 0,t.check(It,o,s);function o(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,_(t,e,"listItemIndent",r.containerState.size+1)(l)}i(o,"onBlank");function s(l){return r.containerState.furtherBlankLines||!D(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(Km,e,a)(l))}i(s,"notBlank");function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,_(t,t.attempt(Ae,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}i(a,"notInCurrentItem")}i(Gm,"tokenizeListContinuation");function Ym(t,e,n){let r=this;return _(t,o,"listItemIndent",r.containerState.size+1);function o(s){let a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(s):n(s)}}i(Ym,"tokenizeIndent");function Jm(t){t.exit(this.containerState.type)}i(Jm,"tokenizeListEnd");function Qm(t,e,n){let r=this;return _(t,o,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(s){let a=r.events[r.events.length-1];return!D(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}i(Qm,"tokenizeListItemPrefixWhitespace");var vi={name:"setextUnderline",resolveTo:Xm,tokenize:Zm};function Xm(t,e){let n=t.length,r,o,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(o=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);let a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[o][1].type="setextHeadingText",s?(t.splice(o,0,["enter",a,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}i(Xm,"resolveToSetextUnderline");function Zm(t,e,n){let r=this,o;return s;function s(u){let d=r.events.length,p;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){p=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),o=u,a(u)):n(u)}function a(u){return t.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===o?(t.consume(u),l):(t.exit("setextHeadingLineSequence"),D(u)?_(t,c,"lineSuffix")(u):c(u))}function c(u){return u===null||F(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}i(Zm,"tokenizeSetextUnderline");var Ou={tokenize:eg};function eg(t){let e=this,n=t.attempt(It,r,t.attempt(this.parser.constructs.flowInitial,o,_(t,t.attempt(this.parser.constructs.flow,o,t.attempt(Ks,o)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function o(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}i(eg,"initializeFlow");var Ru={resolveAll:$u()},Du=_u("string"),Bu=_u("text");function _u(t){return{resolveAll:$u(t==="text"?tg:void 0),tokenize:e};function e(n){let r=this,o=this.parser.constructs[t],s=n.attempt(o,a,l);return a;function a(d){return u(d)?s(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),s(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;let p=o[d],h=-1;if(p)for(;++h<p.length;){let f=p[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}i(_u,"initializeFactory");function $u(t){return e;function e(n,r){let o=-1,s;for(;++o<=n.length;)s===void 0?n[o]&&n[o][1].type==="data"&&(s=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==s+2&&(n[s][1].end=n[o-1][1].end,n.splice(s+2,o-s-2),o=s+2),s=void 0);return t?t(n,r):n}}i($u,"createResolver");function tg(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){let r=t[n-1][1],o=e.sliceStream(r),s=o.length,a=-1,l=0,c;for(;s--;){let u=o[s];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(u===-2)c=!0,l++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){let u={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}i(tg,"resolveAllLineSuffixes");var ta={};zl(ta,{attentionMarkers:()=>cg,contentInitial:()=>rg,disable:()=>ug,document:()=>ng,flow:()=>og,flowInitial:()=>ig,insideSpan:()=>lg,string:()=>sg,text:()=>ag});var ng={42:Ae,43:Ae,45:Ae,48:Ae,49:Ae,50:Ae,51:Ae,52:Ae,53:Ae,54:Ae,55:Ae,56:Ae,57:Ae,62:mi},rg={91:qs},ig={[-2]:hr,[-1]:hr,32:hr},og={35:Ys,42:Gt,45:[vi,Gt],60:Qs,61:vi,95:Gt,96:wi,126:wi},sg={38:bi,92:gi},ag={[-5]:mr,[-4]:mr,[-3]:mr,33:Zs,38:bi,42:pr,60:[Hs,Xs],91:ea,92:[Gs,gi],93:qt,95:pr,96:js},lg={null:[pr,Ru]},cg={null:[42,95]},ug={null:[]};function Vu(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0},o={},s=[],a=[],l=[],c=!0,u={attempt:R($),check:R(H),consume:P,enter:I,exit:A,interrupt:R(H,{interrupt:!0})},d={code:null,containerState:{},defineSkip:w,events:[],now:y,parser:t,previous:null,sliceSerialize:b,sliceStream:k,write:f},p=e.tokenize.call(d,u),h;return e.resolveAll&&s.push(e),d;function f(T){return a=Te(a,T),C(),a[a.length-1]!==null?[]:(z(e,0),d.events=Tn(s,d.events,d),d.events)}i(f,"write");function b(T,L){return pg(k(T),L)}i(b,"sliceSerialize");function k(T){return dg(a,T)}i(k,"sliceStream");function y(){let{_bufferIndex:T,_index:L,line:N,column:V,offset:j}=r;return{_bufferIndex:T,_index:L,line:N,column:V,offset:j}}i(y,"now");function w(T){o[T.line]=T.column,W()}i(w,"defineSkip");function C(){let T;for(;r._index<a.length;){let L=a[r._index];if(typeof L=="string")for(T=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===T&&r._bufferIndex<L.length;)v(L.charCodeAt(r._bufferIndex));else v(L)}}i(C,"main");function v(T){c=void 0,h=T,p=p(T)}i(v,"go");function P(T){F(T)?(r.line++,r.column=1,r.offset+=T===-3?2:1,W()):T!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=T,c=!0}i(P,"consume");function I(T,L){let N=L||{};return N.type=T,N.start=y(),d.events.push(["enter",N,d]),l.push(N),N}i(I,"enter");function A(T){let L=l.pop();return L.end=y(),d.events.push(["exit",L,d]),L}i(A,"exit");function $(T,L){z(T,L.from)}i($,"onsuccessfulconstruct");function H(T,L){L.restore()}i(H,"onsuccessfulcheck");function R(T,L){return N;function N(V,j,pe){let xe,m,Q,he;return Array.isArray(V)?we(V):"tokenize"in V?we([V]):g(V);function g(fe){return Jn;function Jn(kt){let _t=kt!==null&&fe[kt],an=kt!==null&&fe.null,ss=[...Array.isArray(_t)?_t:_t?[_t]:[],...Array.isArray(an)?an:an?[an]:[]];return we(ss)(kt)}}function we(fe){return xe=fe,m=0,fe.length===0?pe:Bt(fe[m])}function Bt(fe){return Jn;function Jn(kt){return he=de(),Q=fe,fe.partial||(d.currentConstruct=fe),fe.name&&d.parser.constructs.disable.null.includes(fe.name)?Ir(kt):fe.tokenize.call(L?Object.assign(Object.create(d),L):d,u,os,Ir)(kt)}}function os(fe){return c=!0,T(Q,he),j}function Ir(fe){return c=!0,he.restore(),++m<xe.length?Bt(xe[m]):pe}}}i(R,"constructFactory");function z(T,L){T.resolveAll&&!s.includes(T)&&s.push(T),T.resolve&&me(d.events,L,d.events.length-L,T.resolve(d.events.slice(L),d)),T.resolveTo&&(d.events=T.resolveTo(d.events,d))}i(z,"addResult");function de(){let T=y(),L=d.previous,N=d.currentConstruct,V=d.events.length,j=Array.from(l);return{from:V,restore:pe};function pe(){r=T,d.previous=L,d.currentConstruct=N,d.events.length=V,l=j,W()}}i(de,"store");function W(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}i(W,"accountForPotentialSkip")}i(Vu,"createTokenizer");function dg(t,e){let n=e.start._index,r=e.start._bufferIndex,o=e.end._index,s=e.end._bufferIndex,a;if(n===o)a=[t[n].slice(r,s)];else{if(a=t.slice(n,o),r>-1){let l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}s>0&&a.push(t[o].slice(0,s))}return a}i(dg,"sliceChunks");function pg(t,e){let n=-1,r=[],o;for(;++n<t.length;){let s=t[n],a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&o)continue;a=" ";break}default:a=String.fromCharCode(s)}o=s===-2,r.push(a)}return r.join("")}i(pg,"serializeChunks");function na(t){let r={constructs:Cu([ta,...(t||{}).extensions||[]]),content:o(Tu),defined:[],document:o(Iu),flow:o(Ou),lazy:{},string:o(Du),text:o(Bu)};return r;function o(s){return a;function a(l){return Vu(r,s,l)}}}i(na,"parse");function ra(t){for(;!ki(t););return t}i(ra,"postprocess");var zu=/[\0\t\n\r]/g;function ia(){let t=1,e="",n=!0,r;return o;function o(s,a,l){let c=[],u,d,p,h,f;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),p=0,e="",n&&(s.charCodeAt(0)===65279&&p++,n=void 0);p<s.length;){if(zu.lastIndex=p,u=zu.exec(s),h=u&&u.index!==void 0?u.index:s.length,f=s.charCodeAt(h),!u){e=s.slice(p);break}if(f===10&&p===h&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<h&&(c.push(s.slice(p,h)),t+=h-p),f){case 0:{c.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,c.push(-2);t++<d;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:r=!0,t=1}p=h+1}return l&&(r&&c.push(-5),e&&c.push(e),c.push(null)),c}}i(ia,"preprocess");var hg=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Ei(t){return t.replace(hg,fg)}i(Ei,"decodeString");function fg(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){let o=n.charCodeAt(1),s=o===120||o===88;return fi(n.slice(s?2:1),s?16:10)}return Sn(n)||t}i(fg,"decode");function Mt(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Uu(t.position):"start"in t||"end"in t?Uu(t):"line"in t||"column"in t?oa(t):""}i(Mt,"stringifyPosition");function oa(t){return Wu(t&&t.line)+":"+Wu(t&&t.column)}i(oa,"point");function Uu(t){return oa(t&&t.start)+"-"+oa(t&&t.end)}i(Uu,"position");function Wu(t){return t&&typeof t=="number"?t:1}i(Wu,"index");var ju={}.hasOwnProperty;function sa(t,e,n){return typeof e!="string"&&(n=e,e=void 0),mg(n)(ra(na(n).document().write(ia()(t,e,!0))))}i(sa,"fromMarkdown");function mg(t){let e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s($l),autolinkProtocol:R,autolinkEmail:R,atxHeading:s(Dl),blockQuote:s(kt),characterEscape:R,characterReference:R,codeFenced:s(_t),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(_t,a),codeText:s(an,a),codeTextData:R,data:R,codeFlowValue:R,definition:s(ss),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(rh),hardBreakEscape:s(Bl),hardBreakTrailing:s(Bl),htmlFlow:s(_l,a),htmlFlowData:R,htmlText:s(_l,a),htmlTextData:R,image:s(ih),label:a,link:s($l),listItem:s(oh),listItemValue:h,listOrdered:s(Vl,p),listUnordered:s(Vl),paragraph:s(sh),reference:g,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(Dl),strong:s(ah),thematicBreak:s(ch)},exit:{atxHeading:c(),atxHeadingSequence:I,autolink:c(),autolinkEmail:Jn,autolinkProtocol:fe,blockQuote:c(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:Bt,characterReferenceMarkerNumeric:Bt,characterReferenceValue:os,characterReference:Ir,codeFenced:c(y),codeFencedFence:k,codeFencedFenceInfo:f,codeFencedFenceMeta:b,codeFlowValue:z,codeIndented:c(w),codeText:c(N),codeTextData:z,data:z,definition:c(),definitionDestinationString:P,definitionLabelString:C,definitionTitleString:v,emphasis:c(),hardBreakEscape:c(W),hardBreakTrailing:c(W),htmlFlow:c(T),htmlFlowData:z,htmlText:c(L),htmlTextData:z,image:c(j),label:xe,labelText:pe,lineEnding:de,link:c(V),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:we,resourceDestinationString:m,resourceTitleString:Q,resource:he,setextHeading:c(H),setextHeadingLineSequence:$,setextHeadingText:A,strong:c(),thematicBreak:c()}};Ku(e,(t||{}).mdastExtensions||[]);let n={};return r;function r(x){let S={type:"root",children:[]},B={stack:[S],tokenStack:[],config:e,enter:l,exit:u,buffer:a,resume:d,data:n},U=[],Y=-1;for(;++Y<x.length;)if(x[Y][1].type==="listOrdered"||x[Y][1].type==="listUnordered")if(x[Y][0]==="enter")U.push(Y);else{let Ze=U.pop();Y=o(x,Ze,Y)}for(Y=-1;++Y<x.length;){let Ze=e[x[Y][0]];ju.call(Ze,x[Y][1].type)&&Ze[x[Y][1].type].call(Object.assign({sliceSerialize:x[Y][2].sliceSerialize},B),x[Y][1])}if(B.tokenStack.length>0){let Ze=B.tokenStack[B.tokenStack.length-1];(Ze[1]||Hu).call(B,void 0,Ze[0])}for(S.position={start:Lt(x.length>0?x[0][1].start:{line:1,column:1,offset:0}),end:Lt(x.length>0?x[x.length-2][1].end:{line:1,column:1,offset:0})},Y=-1;++Y<e.transforms.length;)S=e.transforms[Y](S)||S;return S}function o(x,S,B){let U=S-1,Y=-1,Ze=!1,$t,At,Qn,Xn;for(;++U<=B;){let Be=x[U];switch(Be[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Be[0]==="enter"?Y++:Y--,Xn=void 0;break}case"lineEndingBlank":{Be[0]==="enter"&&($t&&!Xn&&!Y&&!Qn&&(Qn=U),Xn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Xn=void 0}if(!Y&&Be[0]==="enter"&&Be[1].type==="listItemPrefix"||Y===-1&&Be[0]==="exit"&&(Be[1].type==="listUnordered"||Be[1].type==="listOrdered")){if($t){let ln=U;for(At=void 0;ln--;){let Ct=x[ln];if(Ct[1].type==="lineEnding"||Ct[1].type==="lineEndingBlank"){if(Ct[0]==="exit")continue;At&&(x[At][1].type="lineEndingBlank",Ze=!0),Ct[1].type="lineEnding",At=ln}else if(!(Ct[1].type==="linePrefix"||Ct[1].type==="blockQuotePrefix"||Ct[1].type==="blockQuotePrefixWhitespace"||Ct[1].type==="blockQuoteMarker"||Ct[1].type==="listItemIndent"))break}Qn&&(!At||Qn<At)&&($t._spread=!0),$t.end=Object.assign({},At?x[At][1].start:Be[1].end),x.splice(At||U,0,["exit",$t,Be[2]]),U++,B++}if(Be[1].type==="listItemPrefix"){let ln={type:"listItem",_spread:!1,start:Object.assign({},Be[1].start),end:void 0};$t=ln,x.splice(U,0,["enter",ln,Be[2]]),U++,B++,Qn=void 0,Xn=!0}}}return x[S][1]._spread=Ze,B}function s(x,S){return B;function B(U){l.call(this,x(U),U),S&&S.call(this,U)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(x,S,B){this.stack[this.stack.length-1].children.push(x),this.stack.push(x),this.tokenStack.push([S,B||void 0]),x.position={start:Lt(S.start),end:void 0}}function c(x){return S;function S(B){x&&x.call(this,B),u.call(this,B)}}function u(x,S){let B=this.stack.pop(),U=this.tokenStack.pop();if(U)U[0].type!==x.type&&(S?S.call(this,x,U[0]):(U[1]||Hu).call(this,x,U[0]));else throw new Error("Cannot close `"+x.type+"` ("+Mt({start:x.start,end:x.end})+"): it\u2019s not open");B.position.end=Lt(x.end)}function d(){return jt(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function h(x){if(this.data.expectingFirstListItemValue){let S=this.stack[this.stack.length-2];S.start=Number.parseInt(this.sliceSerialize(x),10),this.data.expectingFirstListItemValue=void 0}}function f(){let x=this.resume(),S=this.stack[this.stack.length-1];S.lang=x}function b(){let x=this.resume(),S=this.stack[this.stack.length-1];S.meta=x}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){let x=this.resume(),S=this.stack[this.stack.length-1];S.value=x.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){let x=this.resume(),S=this.stack[this.stack.length-1];S.value=x.replace(/(\r?\n|\r)$/g,"")}function C(x){let S=this.resume(),B=this.stack[this.stack.length-1];B.label=S,B.identifier=Et(this.sliceSerialize(x)).toLowerCase()}function v(){let x=this.resume(),S=this.stack[this.stack.length-1];S.title=x}function P(){let x=this.resume(),S=this.stack[this.stack.length-1];S.url=x}function I(x){let S=this.stack[this.stack.length-1];if(!S.depth){let B=this.sliceSerialize(x).length;S.depth=B}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function $(x){let S=this.stack[this.stack.length-1];S.depth=this.sliceSerialize(x).codePointAt(0)===61?1:2}function H(){this.data.setextHeadingSlurpLineEnding=void 0}function R(x){let B=this.stack[this.stack.length-1].children,U=B[B.length-1];(!U||U.type!=="text")&&(U=lh(),U.position={start:Lt(x.start),end:void 0},B.push(U)),this.stack.push(U)}function z(x){let S=this.stack.pop();S.value+=this.sliceSerialize(x),S.position.end=Lt(x.end)}function de(x){let S=this.stack[this.stack.length-1];if(this.data.atHardBreak){let B=S.children[S.children.length-1];B.position.end=Lt(x.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(S.type)&&(R.call(this,x),z.call(this,x))}function W(){this.data.atHardBreak=!0}function T(){let x=this.resume(),S=this.stack[this.stack.length-1];S.value=x}function L(){let x=this.resume(),S=this.stack[this.stack.length-1];S.value=x}function N(){let x=this.resume(),S=this.stack[this.stack.length-1];S.value=x}function V(){let x=this.stack[this.stack.length-1];if(this.data.inReference){let S=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=S,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function j(){let x=this.stack[this.stack.length-1];if(this.data.inReference){let S=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=S,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function pe(x){let S=this.sliceSerialize(x),B=this.stack[this.stack.length-2];B.label=Ei(S),B.identifier=Et(S).toLowerCase()}function xe(){let x=this.stack[this.stack.length-1],S=this.resume(),B=this.stack[this.stack.length-1];if(this.data.inReference=!0,B.type==="link"){let U=x.children;B.children=U}else B.alt=S}function m(){let x=this.resume(),S=this.stack[this.stack.length-1];S.url=x}function Q(){let x=this.resume(),S=this.stack[this.stack.length-1];S.title=x}function he(){this.data.inReference=void 0}function g(){this.data.referenceType="collapsed"}function we(x){let S=this.resume(),B=this.stack[this.stack.length-1];B.label=S,B.identifier=Et(this.sliceSerialize(x)).toLowerCase(),this.data.referenceType="full"}function Bt(x){this.data.characterReferenceType=x.type}function os(x){let S=this.sliceSerialize(x),B=this.data.characterReferenceType,U;B?(U=fi(S,B==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):U=Sn(S);let Y=this.stack[this.stack.length-1];Y.value+=U}function Ir(x){let S=this.stack.pop();S.position.end=Lt(x.end)}function fe(x){z.call(this,x);let S=this.stack[this.stack.length-1];S.url=this.sliceSerialize(x)}function Jn(x){z.call(this,x);let S=this.stack[this.stack.length-1];S.url="mailto:"+this.sliceSerialize(x)}function kt(){return{type:"blockquote",children:[]}}function _t(){return{type:"code",lang:null,meta:null,value:""}}function an(){return{type:"inlineCode",value:""}}function ss(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function rh(){return{type:"emphasis",children:[]}}function Dl(){return{type:"heading",depth:0,children:[]}}function Bl(){return{type:"break"}}function _l(){return{type:"html",value:""}}function ih(){return{type:"image",title:null,url:"",alt:null}}function $l(){return{type:"link",title:null,url:"",children:[]}}function Vl(x){return{type:"list",ordered:x.type==="listOrdered",start:null,spread:x._spread,children:[]}}function oh(x){return{type:"listItem",spread:x._spread,checked:null,children:[]}}function sh(){return{type:"paragraph",children:[]}}function ah(){return{type:"strong",children:[]}}function lh(){return{type:"text",value:""}}function ch(){return{type:"thematicBreak"}}}i(mg,"compiler");function Lt(t){return{line:t.line,column:t.column,offset:t.offset}}i(Lt,"point");function Ku(t,e){let n=-1;for(;++n<e.length;){let r=e[n];Array.isArray(r)?Ku(t,r):gg(t,r)}}i(Ku,"configure");function gg(t,e){let n;for(n in e)if(ju.call(e,n))switch(n){case"canContainEols":{let r=e[n];r&&t[n].push(...r);break}case"transforms":{let r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{let r=e[n];r&&Object.assign(t[n],r);break}}}i(gg,"extension");function Hu(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Mt({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Mt({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Mt({start:e.start,end:e.end})+") is still open")}i(Hu,"defaultOnError");function Fn(t){let e=this;e.parser=n;function n(r){return sa(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}i(n,"parser")}i(Fn,"remarkParse");var qu={}.hasOwnProperty;function Gu(t,e){let n=e||{};function r(o,...s){let a=r.invalid,l=r.handlers;if(o&&qu.call(o,t)){let c=String(o[t]);a=qu.call(l,c)?l[c]:r.unknown}if(a)return a.call(this,o,...s)}return i(r,"one"),r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}i(Gu,"zwitch");var bg={}.hasOwnProperty;function aa(t,e){let n=-1,r;if(e.extensions)for(;++n<e.extensions.length;)aa(t,e.extensions[n]);for(r in e)if(bg.call(e,r))switch(r){case"extensions":break;case"unsafe":{Yu(t[r],e[r]);break}case"join":{Yu(t[r],e[r]);break}case"handlers":{wg(t[r],e[r]);break}default:t.options[r]=e[r]}return t}i(aa,"configure");function Yu(t,e){e&&t.push(...e)}i(Yu,"list");function wg(t,e){e&&Object.assign(t,e)}i(wg,"map");function Ju(t,e,n,r){let o=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);let a=n.indentLines(n.containerFlow(t,s.current()),yg);return o(),a}i(Ju,"blockquote");function yg(t,e,n){return">"+(n?"":" ")+t}i(yg,"map");function Si(t,e){return Qu(t,e.inConstruct,!0)&&!Qu(t,e.notInConstruct,!1)}i(Si,"patternInScope");function Qu(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}i(Qu,"listInScope");function la(t,e,n,r){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&Si(n.stack,n.unsafe[o]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}i(la,"hardBreak");function Xu(t,e){let n=String(t),r=n.indexOf(e),o=r,s=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===o?++s>a&&(a=s):s=1,o=r+e.length,r=n.indexOf(e,o);return a}i(Xu,"longestStreak");function gr(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}i(gr,"formatCodeAsIndented");function Zu(t){let e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}i(Zu,"checkFence");function ed(t,e,n,r){let o=Zu(n),s=t.value||"",a=o==="`"?"GraveAccent":"Tilde";if(gr(t,n)){let p=n.enter("codeIndented"),h=n.indentLines(s,kg);return p(),h}let l=n.createTracker(r),c=o.repeat(Math.max(Xu(s,o)+1,3)),u=n.enter("codeFenced"),d=l.move(c);if(t.lang){let p=n.enter(`codeFencedLang${a}`);d+=l.move(n.safe(t.lang,{before:d,after:" ",encode:["`"],...l.current()})),p()}if(t.lang&&t.meta){let p=n.enter(`codeFencedMeta${a}`);d+=l.move(" "),d+=l.move(n.safe(t.meta,{before:d,after:`
`,encode:["`"],...l.current()})),p()}return d+=l.move(`
`),s&&(d+=l.move(s+`
`)),d+=l.move(c),u(),d}i(ed,"code");function kg(t,e,n){return(n?"":"    ")+t}i(kg,"map");function In(t){let e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}i(In,"checkQuote");function td(t,e,n,r){let o=In(n),s=o==='"'?"Quote":"Apostrophe",a=n.enter("definition"),l=n.enter("label"),c=n.createTracker(r),u=c.move("[");return u+=c.move(n.safe(n.associationId(t),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(t.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=c.move(" "+o),u+=c.move(n.safe(t.title,{before:u,after:o,...c.current()})),u+=c.move(o),l()),a(),u}i(td,"definition");function nd(t){let e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}i(nd,"checkEmphasis");function ze(t){return"&#x"+t.toString(16).toUpperCase()+";"}i(ze,"encodeCharacterReference");function Mn(t,e,n){let r=Pn(t),o=Pn(e);return r===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}i(Mn,"encodeInfo");ca.peek=Ag;function ca(t,e,n,r){let o=nd(n),s=n.enter("emphasis"),a=n.createTracker(r),l=a.move(o),c=a.move(n.containerPhrasing(t,{after:o,before:l,...a.current()})),u=c.charCodeAt(0),d=Mn(r.before.charCodeAt(r.before.length-1),u,o);d.inside&&(c=ze(u)+c.slice(1));let p=c.charCodeAt(c.length-1),h=Mn(r.after.charCodeAt(0),p,o);h.inside&&(c=c.slice(0,-1)+ze(p));let f=a.move(o);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},l+c+f}i(ca,"emphasis");function Ag(t,e,n){return n.options.emphasis||"*"}i(Ag,"emphasisPeek");var Ln=i((function(t){if(t==null)return Eg;if(typeof t=="function")return Pi(t);if(typeof t=="object")return Array.isArray(t)?Cg(t):xg(t);if(typeof t=="string")return vg(t);throw new Error("Expected function, string, or object as test")}),"convert");function Cg(t){let e=[],n=-1;for(;++n<t.length;)e[n]=Ln(t[n]);return Pi(r);function r(...o){let s=-1;for(;++s<e.length;)if(e[s].apply(this,o))return!0;return!1}}i(Cg,"anyFactory");function xg(t){let e=t;return Pi(n);function n(r){let o=r,s;for(s in t)if(o[s]!==e[s])return!1;return!0}}i(xg,"propertiesFactory");function vg(t){return Pi(e);function e(n){return n&&n.type===t}}i(vg,"typeFactory");function Pi(t){return e;function e(n,r,o){return!!(Sg(n)&&t.call(this,n,typeof r=="number"?r:void 0,o||void 0))}}i(Pi,"castFactory");function Eg(){return!0}i(Eg,"ok");function Sg(t){return t!==null&&typeof t=="object"&&"type"in t}i(Sg,"looksLikeANode");function rd(t){return"\x1B[33m"+t+"\x1B[39m"}i(rd,"color");var id=[],Ti=!0,Yt=!1,Fi="skip";function ua(t,e,n,r){let o;typeof e=="function"&&typeof n!="function"?(r=n,n=e):o=e;let s=Ln(o),a=r?-1:1;l(t,void 0,[])();function l(c,u,d){let p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){let f=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(h,"name",{value:"node ("+rd(c.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=id,b,k,y;if((!e||s(c,u,d[d.length-1]||void 0))&&(f=Pg(n(c,d)),f[0]===Yt))return f;if("children"in c&&c.children){let w=c;if(w.children&&f[0]!==Fi)for(k=(r?w.children.length:-1)+a,y=d.concat(w);k>-1&&k<w.children.length;){let C=w.children[k];if(b=l(C,k,y)(),b[0]===Yt)return b;k=typeof b[1]=="number"?b[1]:k+a}}return f}}i(l,"factory")}i(ua,"visitParents");function Pg(t){return Array.isArray(t)?t:typeof t=="number"?[Ti,t]:t==null?id:[t]}i(Pg,"toResult");function br(t,e,n,r){let o,s,a;typeof e=="function"&&typeof n!="function"?(s=void 0,a=e,o=n):(s=e,a=n,o=r),ua(t,s,l,o);function l(c,u){let d=u[u.length-1],p=d?d.children.indexOf(c):void 0;return a(c,p,d)}i(l,"overload")}i(br,"visit");function Ii(t,e){let n=!1;return br(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Yt}),!!((!t.depth||t.depth<3)&&jt(t)&&(e.options.setext||n))}i(Ii,"formatHeadingAsSetext");function od(t,e,n,r){let o=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(Ii(t,n)){let d=n.enter("headingSetext"),p=n.enter("phrasing"),h=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return p(),d(),h+`
`+(o===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}let a="#".repeat(o),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(a+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=ze(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),c(),l(),u}i(od,"heading");da.peek=Tg;function da(t){return t.value||""}i(da,"html");function Tg(){return"<"}i(Tg,"htmlPeek");pa.peek=Fg;function pa(t,e,n,r){let o=In(n),s=o==='"'?"Quote":"Apostrophe",a=n.enter("image"),l=n.enter("label"),c=n.createTracker(r),u=c.move("![");return u+=c.move(n.safe(t.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(t.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(t.url,{before:u,after:t.title?" ":")",...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=c.move(" "+o),u+=c.move(n.safe(t.title,{before:u,after:o,...c.current()})),u+=c.move(o),l()),u+=c.move(")"),a(),u}i(pa,"image");function Fg(){return"!"}i(Fg,"imagePeek");ha.peek=Ig;function ha(t,e,n,r){let o=t.referenceType,s=n.enter("imageReference"),a=n.enter("label"),l=n.createTracker(r),c=l.move("!["),u=n.safe(t.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),a();let d=n.stack;n.stack=[],a=n.enter("reference");let p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return a(),n.stack=d,s(),o==="full"||!u||u!==p?c+=l.move(p+"]"):o==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}i(ha,"imageReference");function Ig(){return"!"}i(Ig,"imageReferencePeek");fa.peek=Mg;function fa(t,e,n){let r=t.value||"",o="`",s=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(r);)o+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){let a=n.unsafe[s],l=n.compilePattern(a),c;if(a.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return o+r+o}i(fa,"inlineCode");function Mg(){return"`"}i(Mg,"inlineCodePeek");function ma(t,e){let n=jt(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}i(ma,"formatLinkAsAutolink");ga.peek=Lg;function ga(t,e,n,r){let o=In(n),s=o==='"'?"Quote":"Apostrophe",a=n.createTracker(r),l,c;if(ma(t,n)){let d=n.stack;n.stack=[],l=n.enter("autolink");let p=a.move("<");return p+=a.move(n.containerPhrasing(t,{before:p,after:">",...a.current()})),p+=a.move(">"),l(),n.stack=d,p}l=n.enter("link"),c=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(t,{before:u,after:"](",...a.current()})),u+=a.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(t.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(c=n.enter("destinationRaw"),u+=a.move(n.safe(t.url,{before:u,after:t.title?" ":")",...a.current()}))),c(),t.title&&(c=n.enter(`title${s}`),u+=a.move(" "+o),u+=a.move(n.safe(t.title,{before:u,after:o,...a.current()})),u+=a.move(o),c()),u+=a.move(")"),l(),u}i(ga,"link");function Lg(t,e,n){return ma(t,n)?"<":"["}i(Lg,"linkPeek");ba.peek=Ng;function ba(t,e,n,r){let o=t.referenceType,s=n.enter("linkReference"),a=n.enter("label"),l=n.createTracker(r),c=l.move("["),u=n.containerPhrasing(t,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),a();let d=n.stack;n.stack=[],a=n.enter("reference");let p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return a(),n.stack=d,s(),o==="full"||!u||u!==p?c+=l.move(p+"]"):o==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}i(ba,"linkReference");function Ng(){return"["}i(Ng,"linkReferencePeek");function Nn(t){let e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}i(Nn,"checkBullet");function sd(t){let e=Nn(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}i(sd,"checkBulletOther");function ad(t){let e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}i(ad,"checkBulletOrdered");function Mi(t){let e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}i(Mi,"checkRule");function ld(t,e,n,r){let o=n.enter("list"),s=n.bulletCurrent,a=t.ordered?ad(n):Nn(n),l=t.ordered?a==="."?")":".":sd(n),c=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){let d=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),Mi(n)===a&&d){let p=-1;for(;++p<t.children.length;){let h=t.children[p];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=l),n.bulletCurrent=a;let u=n.containerFlow(t,r);return n.bulletLastUsed=a,n.bulletCurrent=s,o(),u}i(ld,"list");function cd(t){let e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}i(cd,"checkListItemIndent");function ud(t,e,n,r){let o=cd(n),s=n.bulletCurrent||Nn(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let a=s.length+1;(o==="tab"||o==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);let l=n.createTracker(r);l.move(s+" ".repeat(a-s.length)),l.shift(a);let c=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,l.current()),d);return c(),u;function d(p,h,f){return h?(f?"":" ".repeat(a))+p:(f?s:s+" ".repeat(a-s.length))+p}i(d,"map")}i(ud,"listItem");function dd(t,e,n,r){let o=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(t,r);return s(),o(),a}i(dd,"paragraph");var wa=Ln(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function pd(t,e,n,r){return(t.children.some(function(a){return wa(a)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}i(pd,"root");function hd(t){let e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}i(hd,"checkStrong");ya.peek=Og;function ya(t,e,n,r){let o=hd(n),s=n.enter("strong"),a=n.createTracker(r),l=a.move(o+o),c=a.move(n.containerPhrasing(t,{after:o,before:l,...a.current()})),u=c.charCodeAt(0),d=Mn(r.before.charCodeAt(r.before.length-1),u,o);d.inside&&(c=ze(u)+c.slice(1));let p=c.charCodeAt(c.length-1),h=Mn(r.after.charCodeAt(0),p,o);h.inside&&(c=c.slice(0,-1)+ze(p));let f=a.move(o+o);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},l+c+f}i(ya,"strong");function Og(t,e,n){return n.options.strong||"*"}i(Og,"strongPeek");function fd(t,e,n,r){return n.safe(t.value,r)}i(fd,"text");function md(t){let e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}i(md,"checkRuleRepetition");function gd(t,e,n){let r=(Mi(n)+(n.options.ruleSpaces?" ":"")).repeat(md(n));return n.options.ruleSpaces?r.slice(0,-1):r}i(gd,"thematicBreak");var bd={blockquote:Ju,break:la,code:ed,definition:td,emphasis:ca,hardBreak:la,heading:od,html:da,image:pa,imageReference:ha,inlineCode:fa,link:ga,linkReference:ba,list:ld,listItem:ud,paragraph:dd,root:pd,strong:ya,text:fd,thematicBreak:gd};var wd=[Rg];function Rg(t,e,n,r){if(e.type==="code"&&gr(e,r)&&(t.type==="list"||t.type===e.type&&gr(t,r)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===e.type||e.type==="definition"||e.type==="heading"&&Ii(e,r))?void 0:n.spread?1:0}i(Rg,"joinDefaults");var Jt=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],yd=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Jt},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Jt},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Jt},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Jt},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Jt},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Jt},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Jt},{atBreak:!0,character:"~"}];function kd(t){return t.label||!t.identifier?t.label||"":Ei(t.identifier)}i(kd,"association");function Ad(t){if(!t._compiled){let e=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}i(Ad,"compilePattern");function Cd(t,e,n){let r=e.indexStack,o=t.children||[],s=[],a=-1,l=n.before,c;r.push(-1);let u=e.createTracker(n);for(;++a<o.length;){let d=o[a],p;if(r[r.length-1]=a,a+1<o.length){let b=e.handle.handlers[o[a+1].type];b&&b.peek&&(b=b.peek),p=b?b(o[a+1],t,e,{before:"",after:"",...u.current()}).charAt(0):""}else p=n.after;s.length>0&&(l==="\r"||l===`
`)&&d.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),l=" ",u=e.createTracker(n),u.move(s.join("")));let h=e.handle(d,t,e,{...u.current(),after:p,before:l});c&&c===h.slice(0,1)&&(h=ze(c.charCodeAt(0))+h.slice(1));let f=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,c=void 0,f&&(s.length>0&&f.before&&l===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+ze(l.charCodeAt(0))),f.after&&(c=p)),u.move(h),s.push(h),l=h.slice(-1)}return r.pop(),s.join("")}i(Cd,"containerPhrasing");function xd(t,e,n){let r=e.indexStack,o=t.children||[],s=e.createTracker(n),a=[],l=-1;for(r.push(-1);++l<o.length;){let c=o[l];r[r.length-1]=l,a.push(s.move(e.handle(c,t,e,{before:`
`,after:`
`,...s.current()}))),c.type!=="list"&&(e.bulletLastUsed=void 0),l<o.length-1&&a.push(s.move(Dg(c,o[l+1],t,e)))}return r.pop(),a.join("")}i(xd,"containerFlow");function Dg(t,e,n,r){let o=r.join.length;for(;o--;){let s=r.join[o](t,e,n,r);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}i(Dg,"between");var Bg=/\r?\n|\r/g;function vd(t,e){let n=[],r=0,o=0,s;for(;s=Bg.exec(t);)a(t.slice(r,s.index)),n.push(s[0]),r=s.index+s[0].length,o++;return a(t.slice(r)),n.join("");function a(l){n.push(e(l,o,!l))}i(a,"one")}i(vd,"indentLines");function Sd(t,e,n){let r=(n.before||"")+(e||"")+(n.after||""),o=[],s=[],a={},l=-1;for(;++l<t.unsafe.length;){let d=t.unsafe[l];if(!Si(t.stack,d))continue;let p=t.compilePattern(d),h;for(;h=p.exec(r);){let f="before"in d||!!d.atBreak,b="after"in d,k=h.index+(f?h[1].length:0);o.includes(k)?(a[k].before&&!f&&(a[k].before=!1),a[k].after&&!b&&(a[k].after=!1)):(o.push(k),a[k]={before:f,after:b})}}o.sort(_g);let c=n.before?n.before.length:0,u=r.length-(n.after?n.after.length:0);for(l=-1;++l<o.length;){let d=o[l];d<c||d>=u||d+1<u&&o[l+1]===d+1&&a[d].after&&!a[d+1].before&&!a[d+1].after||o[l-1]===d-1&&a[d].before&&!a[d-1].before&&!a[d-1].after||(c!==d&&s.push(Ed(r.slice(c,d),"\\")),c=d,/[!-/:-@[-`{-~]/.test(r.charAt(d))&&(!n.encode||!n.encode.includes(r.charAt(d)))?s.push("\\"):(s.push(ze(r.charCodeAt(d))),c++))}return s.push(Ed(r.slice(c,u),n.after)),s.join("")}i(Sd,"safe");function _g(t,e){return t-e}i(_g,"numerical");function Ed(t,e){let n=/\\(?=[!-/:-@[-`{-~])/g,r=[],o=[],s=t+e,a=-1,l=0,c;for(;c=n.exec(s);)r.push(c.index);for(;++a<r.length;)l!==r[a]&&o.push(t.slice(l,r[a])),o.push("\\"),l=r[a];return o.push(t.slice(l)),o.join("")}i(Ed,"escapeBackslashes");function Pd(t){let e=t||{},n=e.now||{},r=e.lineShift||0,o=n.line||1,s=n.column||1;return{move:c,current:a,shift:l};function a(){return{now:{line:o,column:s},lineShift:r}}function l(u){r+=u}function c(u){let d=u||"",p=d.split(/\r?\n|\r/g),h=p[p.length-1];return o+=p.length-1,s=p.length===1?s+h.length:1+h.length+r,d}}i(Pd,"track");function ka(t,e){let n=e||{},r={associationId:kd,containerPhrasing:Ug,containerFlow:Wg,createTracker:Pd,compilePattern:Ad,enter:s,handlers:{...bd},handle:void 0,indentLines:vd,indexStack:[],join:[...wd],options:{},safe:Hg,stack:[],unsafe:[...yd]};aa(r,n),r.options.tightDefinitions&&r.join.push(zg),r.handle=Gu("type",{invalid:$g,unknown:Vg,handlers:r.handlers});let o=r.handle(t,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return o&&o.charCodeAt(o.length-1)!==10&&o.charCodeAt(o.length-1)!==13&&(o+=`
`),o;function s(a){return r.stack.push(a),l;function l(){r.stack.pop()}i(l,"exit")}i(s,"enter")}i(ka,"toMarkdown");function $g(t){throw new Error("Cannot handle value `"+t+"`, expected node")}i($g,"invalid");function Vg(t){let e=t;throw new Error("Cannot handle unknown node `"+e.type+"`")}i(Vg,"unknown");function zg(t,e){if(t.type==="definition"&&t.type===e.type)return 0}i(zg,"joinDefinition");function Ug(t,e){return Cd(t,this,e)}i(Ug,"containerPhrasingBound");function Wg(t,e){return xd(t,this,e)}i(Wg,"containerFlowBound");function Hg(t,e){return Sd(this,t,e)}i(Hg,"safeBound");function Li(t){let e=this;e.compiler=n;function n(r){return ka(r,{...e.data("settings"),...t,extensions:e.data("toMarkdownExtensions")||[]})}i(n,"compiler")}i(Li,"remarkStringify");function Aa(t){if(t)throw t}i(Aa,"bail");var Di=cn(Dd(),1);function wr(t){if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}i(wr,"isPlainObject");function Ca(){let t=[],e={run:n,use:r};return e;function n(...o){let s=-1,a=o.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...o);function l(c,...u){let d=t[++s],p=-1;if(c){a(c);return}for(;++p<o.length;)(u[p]===null||u[p]===void 0)&&(u[p]=o[p]);o=u,d?Bd(d,l)(...u):a(null,...u)}i(l,"next")}function r(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return t.push(o),e}}i(Ca,"trough");function Bd(t,e){let n;return r;function r(...a){let l=t.length>a.length,c;l&&a.push(o);try{c=t.apply(this,a)}catch(u){let d=u;if(l&&n)throw d;return o(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,o):c instanceof Error?o(c):s(c))}function o(a,...l){n||(n=!0,e(a,...l))}function s(a){o(null,a)}}i(Bd,"wrap");var ce=class extends Error{static{i(this,"VFileMessage")}constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let o="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?o=e:!s.cause&&e&&(a=!0,o=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){let c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){let c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}let l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=l?l.line:void 0,this.name=Mt(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}};ce.prototype.file="";ce.prototype.name="";ce.prototype.reason="";ce.prototype.message="";ce.prototype.stack="";ce.prototype.column=void 0;ce.prototype.line=void 0;ce.prototype.ancestors=void 0;ce.prototype.cause=void 0;ce.prototype.fatal=void 0;ce.prototype.place=void 0;ce.prototype.ruleId=void 0;ce.prototype.source=void 0;var Je=cn(require("node:path"),1);var xa=cn(require("node:process"),1);var va=require("node:url");function Oi(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}i(Oi,"isUrl");var Ea=["history","path","basename","stem","extname","dirname"],yr=class{static{i(this,"VFile")}constructor(e){let n;e?Oi(e)?n={path:e}:typeof e=="string"||jg(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":xa.default.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Ea.length;){let s=Ea[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let o;for(o in n)Ea.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?Je.default.basename(this.path):void 0}set basename(e){Pa(e,"basename"),Sa(e,"basename"),this.path=Je.default.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Je.default.dirname(this.path):void 0}set dirname(e){_d(this.basename,"dirname"),this.path=Je.default.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Je.default.extname(this.path):void 0}set extname(e){if(Sa(e,"extname"),_d(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Je.default.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Oi(e)&&(e=(0,va.fileURLToPath)(e)),Pa(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Je.default.basename(this.path,this.extname):void 0}set stem(e){Pa(e,"stem"),Sa(e,"stem"),this.path=Je.default.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){let o=this.message(e,n,r);throw o.fatal=!0,o}info(e,n,r){let o=this.message(e,n,r);return o.fatal=void 0,o}message(e,n,r){let o=new ce(e,n,r);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}};function Sa(t,e){if(t&&t.includes(Je.default.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Je.default.sep+"`")}i(Sa,"assertPart");function Pa(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}i(Pa,"assertNonEmpty");function _d(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}i(_d,"assertPath");function jg(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}i(jg,"isUint8Array");var $d=i((function(t){let r=this.constructor.prototype,o=r[t],s=i(function(){return o.apply(s,arguments)},"apply");return Object.setPrototypeOf(s,r),s}),"CallableInstance");var Kg={}.hasOwnProperty,Ma=class t extends $d{static{i(this,"Processor")}constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ca()}copy(){let e=new t,n=-1;for(;++n<this.attachers.length;){let r=this.attachers[n];e.use(...r)}return e.data((0,Di.default)(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Ia("data",this.frozen),this.namespace[e]=n,this):Kg.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Ia("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;let e=this;for(;++this.freezeIndex<this.attachers.length;){let[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);let o=n.call(e,...r);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();let n=Ri(e),r=this.parser||this.Parser;return Ta("parse",r),r(String(n),n)}process(e,n){let r=this;return this.freeze(),Ta("process",this.parser||this.Parser),Fa("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(s,a){let l=Ri(e),c=r.parse(l);r.run(c,l,function(d,p,h){if(d||!p||!h)return u(d);let f=p,b=r.stringify(f,h);Gg(b)?h.value=b:h.result=b,u(d,h)});function u(d,p){d||!p?a(d):s?s(p):n(void 0,p)}i(u,"realDone")}i(o,"executor")}processSync(e){let n=!1,r;return this.freeze(),Ta("processSync",this.parser||this.Parser),Fa("processSync",this.compiler||this.Compiler),this.process(e,o),zd("processSync","process",n),r;function o(s,a){n=!0,Aa(s),r=a}i(o,"realDone")}run(e,n,r){Vd(e),this.freeze();let o=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,l){let c=Ri(n);o.run(e,c,u);function u(d,p,h){let f=p||e;d?l(d):a?a(f):r(void 0,f,h)}i(u,"realDone")}i(s,"executor")}runSync(e,n){let r=!1,o;return this.run(e,n,s),zd("runSync","run",r),o;function s(a,l){Aa(a),o=l,r=!0}i(s,"realDone")}stringify(e,n){this.freeze();let r=Ri(n),o=this.compiler||this.Compiler;return Fa("stringify",o),Vd(e),o(e,r)}use(e,...n){let r=this.attachers,o=this.namespace;if(Ia("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){let[d,...p]=u;c(d,p)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(o.settings=(0,Di.default)(!0,o.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){let p=u[d];s(p)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let p=-1,h=-1;for(;++p<r.length;)if(r[p][0]===u){h=p;break}if(h===-1)r.push([u,...d]);else if(d.length>0){let[f,...b]=d,k=r[h][1];wr(k)&&wr(f)&&(f=(0,Di.default)(!0,k,f)),r[h]=[u,f,...b]}}}},La=new Ma().freeze();function Ta(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}i(Ta,"assertParser");function Fa(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}i(Fa,"assertCompiler");function Ia(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}i(Ia,"assertUnfrozen");function Vd(t){if(!wr(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}i(Vd,"assertNode");function zd(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}i(zd,"assertDone");function Ri(t){return qg(t)?t:new yr(t)}i(Ri,"vfile");function qg(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}i(qg,"looksLikeAVFile");function Gg(t){return typeof t=="string"||Yg(t)}i(Gg,"looksLikeAValue");function Yg(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}i(Yg,"isUint8Array");var Ud=La().use(Fn).use(Li).freeze();var Oa={d:i((t,e)=>{for(var n in e)Oa.o(e,n)&&!Oa.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},"d"),o:i((t,e)=>Object.prototype.hasOwnProperty.call(t,e),"o")},Ra={};Oa.d(Ra,{Z:i(()=>Zg,"Z"),$:i(()=>Kd,"$")});var On={horizontalTab:-2,virtualSpace:-1,nul:0,eof:null,space:32};function Wd(t){return t<On.nul||t===On.space}i(Wd,"n");function Na(t){return t<On.horizontalTab}i(Na,"i");var Jg={553:t=>{t.exports=function(e){var n,r;return e._compiled||(n=e.before?"(?:"+e.before+")":"",r=e.after?"(?:"+e.after+")":"",e.atBreak&&(n="[\\r\\n][\\t ]*"+n),e._compiled=new RegExp((n?"("+n+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(r||""),"g")),e._compiled}},112:t=>{function e(n,r,o){var s;if(!r)return o;for(typeof r=="string"&&(r=[r]),s=-1;++s<r.length;)if(n.indexOf(r[s])!==-1)return!0;return!1}i(e,"t"),t.exports=function(n,r){return e(n,r.inConstruct,!0)&&!e(n,r.notInConstruct)}},113:(t,e,n)=>{t.exports=function(l,c,u){for(var d,p,h,f,b,k,y,w,C=(u.before||"")+(c||"")+(u.after||""),v=[],P=[],I={},A=-1;++A<l.unsafe.length;)if(f=l.unsafe[A],o(l.stack,f))for(b=r(f);k=b.exec(C);)d="before"in f||f.atBreak,p="after"in f,h=k.index+(d?k[1].length:0),v.indexOf(h)===-1?(v.push(h),I[h]={before:d,after:p}):(I[h].before&&!d&&(I[h].before=!1),I[h].after&&!p&&(I[h].after=!1));for(v.sort(s),y=u.before?u.before.length:0,w=C.length-(u.after?u.after.length:0),A=-1;++A<v.length;)(h=v[A])<y||h>=w||h+1<w&&v[A+1]===h+1&&I[h].after&&!I[h+1].before&&!I[h+1].after||(y!==h&&P.push(a(C.slice(y,h),"\\")),y=h,!/[!-/:-@[-`{-~]/.test(C.charAt(h))||u.encode&&u.encode.indexOf(C.charAt(h))!==-1?(P.push("&#x"+C.charCodeAt(h).toString(16).toUpperCase()+";"),y++):P.push("\\"));return P.push(a(C.slice(y,w),u.after)),P.join("")};var r=n(553),o=n(112);function s(l,c){return l-c}i(s,"a");function a(l,c){for(var u,d=/\\(?=[!-/:-@[-`{-~])/g,p=[],h=[],f=-1,b=0,k=l+c;u=d.exec(k);)p.push(u.index);for(;++f<p.length;)b!==p[f]&&h.push(l.slice(b,p[f])),h.push("\\"),b=p[f];return h.push(l.slice(b)),h.join("")}i(a,"o")}},Hd={};function mt(t){var e=Hd[t];if(e!==void 0)return e.exports;var n=Hd[t]={exports:{}};return Jg[t](n,n.exports,mt),n.exports}i(mt,"s");mt.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return mt.d(e,{a:e}),e},mt.d=(t,e)=>{for(var n in e)mt.o(e,n)&&!mt.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},mt.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Da={};(()=>{function t(o={}){let s=o.permalinks||[],a=o.pageResolver||(h=>[h.replace(/ /g,"_").toLowerCase()]),l=o.newClassName||"new",c=o.wikiLinkClassName||"internal",u=o.hrefTemplate||(h=>`#/page/${h}`),d;function p(h){return h[h.length-1]}return i(p,"s"),{enter:{wikiLink:i(function(h){d={type:"wikiLink",value:null,data:{alias:null,permalink:null,exists:null}},this.enter(d,h)},"wikiLink")},exit:{wikiLinkTarget:i(function(h){let f=this.sliceSerialize(h);p(this.stack).value=f},"wikiLinkTarget"),wikiLinkAlias:i(function(h){let f=this.sliceSerialize(h);p(this.stack).data.alias=f},"wikiLinkAlias"),wikiLink:i(function(h){this.exit(h);let f=d,b=a(f.value),k=b.find((P=>s.indexOf(P)!==-1)),y=k!==void 0,w;w=y?k:b[0]||"";let C=f.value;f.data.alias&&(C=f.data.alias);let v=c;y||(v+=" "+l),f.data.alias=C,f.data.permalink=w,f.data.exists=y,f.data.hName="a",f.data.hProperties={className:v,href:u(w)},f.data.hChildren=[{type:"text",value:C}]},"wikiLink")}}}i(t,"e"),mt.d(Da,{V:i(()=>t,"V"),x:i(()=>r,"x")});var e=mt(113),n=mt.n(e);function r(o={}){let s=o.aliasDivider||":";return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]},{character:"]",inConstruct:["label","reference"]}],handlers:{wikiLink:i(function(a,l,c){let u=c.enter("wikiLink"),d=n()(c,a.value,{before:"[",after:"]"}),p=n()(c,a.data.alias,{before:"[",after:"]"}),h;return h=p!==d?`[[${d}${s}${p}]]`:`[[${d}]]`,u(),h},"wikiLink")}}}i(r,"n")})();var Qg=Da.V,Xg=Da.x,jd=!1;function Kd(t={}){let e=this.data();function n(r,o){e[r]?e[r].push(o):e[r]=[o]}i(n,"a"),!jd&&(this.Parser&&this.Parser.prototype&&this.Parser.prototype.blockTokenizers||this.Compiler&&this.Compiler.prototype&&this.Compiler.prototype.visitors)&&(jd=!0,console.warn("[remark-wiki-link] Warning: please upgrade to remark 13 to use this plugin")),n("micromarkExtensions",(function(){var r=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).aliasDivider||":",o="]]";return{text:{91:{tokenize:i(function(s,a,l){var c,u,d=0,p=0,h=0;return function(C){return C!=="[[".charCodeAt(p)?l(C):(s.enter("wikiLink"),s.enter("wikiLinkMarker"),f(C))};function f(C){return p===2?(s.exit("wikiLinkMarker"),(function(v){return Na(v)||v===On.eof?l(v):(s.enter("wikiLinkData"),s.enter("wikiLinkTarget"),b(v))})(C)):C!=="[[".charCodeAt(p)?l(C):(s.consume(C),p++,f)}function b(C){return C===r.charCodeAt(d)?c?(s.exit("wikiLinkTarget"),s.enter("wikiLinkAliasMarker"),k(C)):l(C):C===o.charCodeAt(h)?c?(s.exit("wikiLinkTarget"),s.exit("wikiLinkData"),s.enter("wikiLinkMarker"),w(C)):l(C):Na(C)||C===On.eof?l(C):(Wd(C)||(c=!0),s.consume(C),b)}function k(C){return d===r.length?(s.exit("wikiLinkAliasMarker"),s.enter("wikiLinkAlias"),y(C)):C!==r.charCodeAt(d)?l(C):(s.consume(C),d++,k)}function y(C){return C===o.charCodeAt(h)?u?(s.exit("wikiLinkAlias"),s.exit("wikiLinkData"),s.enter("wikiLinkMarker"),w(C)):l(C):Na(C)||C===On.eof?l(C):(Wd(C)||(u=!0),s.consume(C),y)}function w(C){return h===2?(s.exit("wikiLinkMarker"),s.exit("wikiLink"),a(C)):C!==o.charCodeAt(h)?l(C):(s.consume(C),h++,w)}},"tokenize")}}}})(t)),n("fromMarkdownExtensions",Qg(t)),n("toMarkdownExtensions",Xg(t))}i(Kd,"k");var Zg=Kd,qP=Ra.Z,qd=Ra.$;i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var eb=/^[A-Za-z][A-Za-z0-9+\-.]*:\S+$/;function Ba(t){if(/\s/.test(t))return!1;if(t.includes("://"))try{return new URL(t),!0}catch{return!1}return eb.test(t)}i(Ba,"isUrl");var Qt=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Bi(t){let e=(0,Qt.getFrontMatterInfo)(t);return(0,Qt.parseYaml)(e.frontmatter)??{}}i(Bi,"parseFrontmatter");function Gd(t,e){let n=(0,Qt.getFrontMatterInfo)(t);if(Object.keys(e).length===0)return t.slice(n.contentStart);let r=(0,Qt.stringifyYaml)(e);return n.exists?ic(t,r,n.from,n.to):`---
${r}---
${t}`}i(Gd,"setFrontmatter");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Ne(t){if(!ve(t))return!1;let e=t;return e.startOffset!==void 0&&e.endOffset!==void 0}i(Ne,"isFrontmatterLinkCacheWithOffsets");function _i(t){return Ne(t)?t:{...t,endOffset:t.original.length,startOffset:0}}i(_i,"toFrontmatterLinkCacheWithOffsets");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Yd(t){return _a(t)&&t.type==="file"}i(Yd,"isCanvasFileNodeReference");function _a(t){return ve(t)&&!!t.isCanvas}i(_a,"isCanvasReference");function Xt(t,e){return Ne(t)?{newContent:e,oldContent:t.original.slice(t.startOffset,t.endOffset),reference:t}:{newContent:e,oldContent:t.original,reference:t}}i(Xt,"referenceToFileChange");function Jd(t){return t.sort((e,n)=>{if(ve(e)&&ve(n)){let r=Ne(e)?e.startOffset:0,o=Ne(n)?n.startOffset:0;return e.key.localeCompare(n.key)||Number(Ne(n))-Number(Ne(e))||r-o}return et(e)&&et(n)?e.position.start.offset-n.position.start.offset:ve(e)?1:-1})}i(Jd,"sortReferences");var Ar=require("obsidian");var kr=require("@codemirror/state"),$a=require("@codemirror/view");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Qd=new WeakMap;function Va(t){let e=Zd(t);t.cm.dispatch({effects:e.reconfigure([kr.EditorState.readOnly.of(!0),$a.EditorView.editable.of(!1)])})}i(Va,"lockEditor");function Xd(t){let e=Zd(t);t.cm.dispatch({effects:e.reconfigure([kr.EditorState.readOnly.of(!1),$a.EditorView.editable.of(!0)])})}i(Xd,"unlockEditor");function Zd(t){let e=Qd.get(t);return e||(e=new kr.Compartment,Qd.set(t,e)),e}i(Zd,"ensureCompartment");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function Rn(t,e,n){let r=oe(t,e);if(r.path===n)return n;let o=je(n);await Dn(t,o);let s=$i(t,n);try{await t.vault.copy(r,s)}catch(a){if(!await t.vault.exists(s))throw a}return s}i(Rn,"copySafe");async function Dn(t,e){if(await t.vault.adapter.exists(e))return!1;try{return await t.vault.createFolder(e),!0}catch(n){if(!await t.vault.exists(e))throw n;return!0}}i(Dn,"createFolderSafe");function $i(t,e){let n=rt(e);return t.vault.getAvailablePath(ie(q(e),Ie(e,n)),n.slice(1))}i($i,"getAvailablePath");function Bn(t){return t.vault.getMarkdownFiles().sort((e,n)=>e.path.localeCompare(n.path))}i(Bn,"getMarkdownFilesSorted");function za(t,e,n){let r=G(t,e);if(t.vault.adapter.insensitive){let o=q(n),s=Ie(n),a;for(;a=Ke(t,o,!0),!a;)s=ie(Ie(o),s),o=q(o);n=ie(a.getParentPrefix(),s)}return r.toLowerCase()===n.toLowerCase()?n:$i(t,n)}i(za,"getSafeRenamePath");async function Vi(t,e){let n=await _n(t,G(t,e));return n.files.length===0&&n.folders.length===0}i(Vi,"isEmptyFolder");async function _n(t,e){let n=G(t,e),r={files:[],folders:[]};if((await t.vault.adapter.stat(n))?.type!=="folder")return r;try{return await t.vault.adapter.list(n)}catch(o){if(await t.vault.exists(n))throw o;return r}}i(_n,"listSafe");async function ep(t,e,n,r={}){let s={...{shouldFailOnMissingFile:!0,shouldLockEditorWhileProcessing:!0,timeoutInMilliseconds:500},...r},a=new AbortController;s.abortSignal=nt(s.abortSignal,a.signal);let l=G(t,e),c=null;if(s.shouldLockEditorWhileProcessing){for(let u of t.workspace.getLeavesOfType(Mr.Markdown))u.view instanceof Ar.MarkdownView&&u.view.file?.path===l&&Va(u.view.editor);c=t.workspace.on("active-leaf-change",u=>{u?.view instanceof Ar.MarkdownView&&u.view.file?.path===l&&Va(u.view.editor)})}try{await hi({async operationFn(u){u.throwIfAborted();let d=await Ua(t,e);if(u.throwIfAborted(),d===null)return b();let p=await pn(n,u,d);if(u.throwIfAborted(),p===null)return!1;let h=!0;if(!await tp(t,e,async k=>{u.throwIfAborted(),await t.vault.process(k,y=>(u.throwIfAborted(),y!==d?(J("Vault:process")("Content has changed since it was read. Retrying...",{actualContent:y,expectedContent:d,path:k.path}),h=!1,y):p)),u.throwIfAborted()}))return b();return h;function b(){if(s.shouldFailOnMissingFile)throw new Error(`File '${l}' not found`);return!0}},operationName:E(u=>u.obsidianDevUtils.vault.processFile,{filePath:l}),retryOptions:s})}finally{c?.e.offref(c);for(let u of t.workspace.getLeavesOfType(Mr.Markdown))u.view instanceof Ar.MarkdownView&&u.view.file?.path===l&&Xd(u.view.editor)}}i(ep,"process");async function Ua(t,e){let n=null;return await tp(t,e,async r=>{await zi(t,r),n=await t.vault.read(r)}),n}i(Ua,"readSafe");async function $n(t,e,n){let r=oe(t,e,!1,!0),o=za(t,e,n);if(r.path.toLowerCase()===o.toLowerCase())return r.path!==n&&await t.vault.rename(r,o),o;let s=je(o);await Dn(t,s);try{await t.vault.rename(r,o)}catch(a){if(!await t.vault.exists(o)||await t.vault.exists(r.path))throw a}return o}i($n,"renameSafe");async function zi(t,e){if(!qe(t,e))return;let n=G(t,e);for(let r of t.workspace.getLeavesOfType(Mr.Markdown))r.view instanceof Ar.MarkdownView&&r.view.file?.path===n&&r.view.dirty&&await r.view.save()}i(zi,"saveNote");async function tp(t,e,n){let r=G(t,e),o=X(t,r);if(!o||o.deleted)return!1;try{return await n(o),!0}catch(s){if(o=X(t,r),!o||o.deleted)return!1;throw s}}i(tp,"invokeFileActionSafe");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function Hi(t,e,n,r,o=!0){t.throwIfAborted();let s=await pn(r,t,e);if(t.throwIfAborted(),s===null)return null;let{frontmatter:a,hasFrontmatterError:l}=lb(e,n);if(!db(s,e,a,n))return o?null:e;s=ub(s);let{frontmatterChanged:c,newContent:u}=ob(s,e,l,n);return await sb(t,a,c,n),t.throwIfAborted(),ab(u,a,c)}i(Hi,"applyContentChanges");async function Cr(t,e,n,r={},o=!0){await ep(t,e,async(s,a)=>xt(t,e)?await ib(s,a,G(t,e),n,o):await Hi(s,a,G(t,e),n,o),r)}i(Cr,"applyFileChanges");function xr(t){return _a(t.reference)}i(xr,"isCanvasChange");function tb(t){return xr(t)&&t.reference.type==="file"}i(tb,"isCanvasFileNodeChange");function nb(t){return xr(t)&&t.reference.type==="text"}i(nb,"isCanvasTextNodeChange");function Zt(t){return et(t.reference)}i(Zt,"isContentChange");function Ui(t){return ve(t.reference)}i(Ui,"isFrontmatterChange");function Wi(t){return Ne(t.reference)}i(Wi,"isFrontmatterChangeWithOffsets");function rb(t){return Wi(t)?t:{...t,reference:_i(t.reference)}}i(rb,"toFrontmatterChangeWithOffsets");async function ib(t,e,n,r,o=!0){let s=await pn(r,t,e);if(t.throwIfAborted(),s===null)return null;let a=cb(e),l=new Map;for(let c of s){if(!xr(c)){let d="Only canvas changes are supported for canvas files";throw console.error(d,{change:c,path:n}),new Error(d)}let u=a.nodes[c.reference.nodeIndex];if(!u){let d="Node not found";throw console.error(d,{nodeIndex:c.reference.nodeIndex,path:n}),new Error(d)}if(tb(c)){if(u.file!==c.oldContent)return J("FileChange:applyCanvasChanges")("Content mismatch",{actualContent:u.file,expectedContent:c.oldContent,nodeIndex:c.reference.nodeIndex,path:n,type:"file"}),null;u.file=c.newContent}else if(nb(c)){let d=l.get(c.reference.nodeIndex);d||(d=[],l.set(c.reference.nodeIndex,d)),d.push(c)}}for(let[c,u]of l.entries()){let d=a.nodes[c];if(!d){let h="Node not found";throw console.error(h,{nodeIndex:c,path:n}),new Error(h)}if(typeof d.text!="string"){let h="Node text is not a string";throw console.error(h,{nodeIndex:c,path:n}),new Error(h)}let p=u.map(h=>Xt(h.reference.originalReference,h.newContent));d.text=await Hi(t,d.text,`${n}.node${String(c)}.VIRTUAL_FILE.md`,p,o)}return JSON.stringify(a,null,"	")}i(ib,"applyCanvasChanges");function ob(t,e,n,r){let o="",s=0,a={newContent:"",oldContent:"",reference:{link:"",original:"",position:{end:{col:0,line:0,offset:0},start:{col:0,line:0,offset:0}}}},l=new Map;for(let c of t)if(Zt(c))if(s<=c.reference.position.start.offset)o+=e.slice(s,c.reference.position.start.offset),o+=c.newContent,s=c.reference.position.end.offset,a=c;else{let u=c.reference.position.start.offset-a.reference.position.start.offset,d=c.reference.position.end.offset-a.reference.position.start.offset;if(a.newContent.slice(u,d)!==c.oldContent){let h="Overlapping changes";throw console.error(h,{change:c,lastContentChange:a}),new Error(h)}o=o.slice(0,o.length-a.newContent.length)+a.newContent.slice(0,u)+c.newContent+a.newContent.slice(d)}else if(Ui(c))if(n)console.error(`Cannot apply frontmatter change in ${r}, because frontmatter parsing failed`,{change:c});else{let u=l.get(c.reference.key);u||(u=[],l.set(c.reference.key,u)),u.push(rb(c))}return o+=e.slice(s),{frontmatterChanged:l,newContent:o}}i(ob,"applyContentChangesToText");async function sb(t,e,n,r){for(let[o,s]of n.entries()){let a=yn(e,o);if(typeof a!="string")return;let l=s.map(u=>({newContent:u.newContent,oldContent:u.oldContent,reference:{link:"",original:"",position:{end:{col:u.reference.endOffset,line:0,offset:u.reference.endOffset},start:{col:u.reference.startOffset,line:0,offset:u.reference.startOffset}}}})),c=await Hi(t,a,`${r}.frontmatter.${o}.VIRTUAL_FILE.md`,l);if(c===null)return;Lc(e,o,c)}}i(sb,"applyFrontmatterChangesWithOffsets");function ab(t,e,n){return n.size>0?Gd(t,e):t}i(ab,"buildFinalContent");function lb(t,e){let n={},r=!1;try{n=Bi(t)}catch(o){Vt(new Error(`Frontmatter parsing failed in ${e}`,{cause:o})),r=!0}return{frontmatter:n,hasFrontmatterError:r}}i(lb,"parseFrontmatterSafely");function cb(t){let e;try{e=JSON.parse(t)}catch{e=null}return(e===null||typeof e!="object")&&(e={}),e}i(cb,"parseJsonSafe");function ub(t){return t.sort((e,n)=>Zt(e)&&Zt(n)?e.reference.position.start.offset-n.reference.position.start.offset:Wi(e)&&Wi(n)?e.reference.key.localeCompare(n.reference.key)||e.reference.startOffset-n.reference.startOffset:Ui(e)&&Ui(n)?e.reference.key.localeCompare(n.reference.key):Zt(e)?-1:1),t.filter((e,n)=>e.oldContent===e.newContent?!1:n===0?!0:!Ye(e,t[n-1]))}i(ub,"sortAndFilterChanges");function db(t,e,n,r){let o=J("FileChange:validateChanges");for(let s of t)if(Zt(s)){let a=s.reference.position.start.offset,l=s.reference.position.end.offset,c=e.slice(a,l);if(c!==s.oldContent)return o("Content mismatch",{actualContent:c,endOffset:l,expectedContent:s.oldContent,path:r,startOffset:a}),!1}else if(Wi(s)){let a=yn(n,s.reference.key);if(typeof a!="string")return o("Property value is not a string",{frontmatterKey:s.reference.key,path:r,propertyValue:a}),!1;let l=a.slice(s.reference.startOffset,s.reference.endOffset);if(l!==s.oldContent)return o("Content mismatch",{actualContent:l,expectedContent:s.oldContent,frontmatterKey:s.reference.key,path:r,startOffset:s.reference.startOffset}),!1}else if(Ui(s)){let a=yn(n,s.reference.key);if(a!==s.oldContent)return o("Content mismatch",{actualContent:a,expectedContent:s.oldContent,frontmatterKey:s.reference.key,path:r}),!1}return!0}i(db,"validateChanges");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function np(t){await new Promise(e=>{t.metadataCache.onCleanCache(e)})}i(np,"ensureMetadataCacheReady");function Ue(t){let e=[];return t.links&&e.push(...t.links),t.embeds&&e.push(...t.embeds),t.frontmatterLinks&&e.push(...t.frontmatterLinks),Jd(e),e=e.filter((n,r)=>{if(r===0)return!0;let o=e[r-1];if(!o)return!0;if(et(n)&&et(o))return n.position.start.offset!==o.position.start.offset;if(ve(n)&&ve(o)){let s=Ne(n)?n.startOffset:0,a=Ne(o)?o.startOffset:0;return n.key!==o.key||Ne(n)!==Ne(o)||s!==a}return!0}),e}i(Ue,"getAllLinks");function Wa(t,e){let n=oe(t,e,!0);return vr(t,[n],()=>t.metadataCache.getBacklinksForFile(n))}i(Wa,"getBacklinksForFileOrPath");async function Oe(t,e,n={}){let r=t.metadataCache.getBacklinksForFile.safe;if(r)return r(e);let o=new Wl;return await hi({async operationFn(s){s.throwIfAborted();let a=oe(t,e);await np(t),s.throwIfAborted(),o=Wa(t,a);for(let l of o.keys()){s.throwIfAborted();let c=X(t,l);if(!c)return!1;await zi(t,c),s.throwIfAborted();let u=await Ua(t,c);if(s.throwIfAborted(),!u)return!1;let d=Bi(u),p=o.get(l);if(!p)return!1;for(let h of p){let f;if(et(h))f=u.slice(h.position.start.offset,h.position.end.offset);else if(ve(h)){let b=yn(d,h.key);if(typeof b!="string")return!1;let k=_i(h);f=b.slice(k.startOffset,k.endOffset)}else return!0;if(f!==h.original)return!1}}return!0},operationName:E(s=>s.obsidianDevUtils.metadataCache.getBacklinksForFilePath,{filePath:G(t,e)}),retryOptions:n}),o}i(Oe,"getBacklinksForFileSafe");async function Qe(t,e){let n=X(t,e);try{if(!n)return null;if(n.deleted)return t.metadataCache.getFileCache(n);await zi(t,n);let r=t.metadataCache.fileCache[n.path];return r&&r.mtime===n.stat.mtime&&r.size===n.stat.size&&t.metadataCache.metadataCache[r.hash]||(await t.metadataCache.computeFileMetadataAsync(n),await np(t)),t.metadataCache.getFileCache(n)}catch(r){if(!n||n.deleted)return null;throw r}}i(Qe,"getCacheSafe");function rp(t,e,n){let r=oe(t,e,!0);if(!r.deleted)throw new Error("File is existing");t.metadataCache.fileCache[r.path]={hash:r.path,mtime:0,size:0},t.metadataCache.metadataCache[r.path]=n}i(rp,"registerFileCacheForNonExistingFile");function ip(t,e){let n=lp(t);for(let r of e)for(;r.deleted;){let o=n.get(r.path)??0;o++,n.set(r.path,o),t.vault.fileMap[r.path]=r,Z(r)&&t.metadataCache.uniqueFileLookup.add(r.name.toLowerCase(),r),r=fn(t,je(r.path),!0)}}i(ip,"registerFiles");function vr(t,e,n){try{return ip(t,e),n()}finally{ap(t,e)}}i(vr,"tempRegisterFilesAndRun");async function op(t,e,n){try{return ip(t,e),await n()}finally{ap(t,e)}}i(op,"tempRegisterFilesAndRunAsync");function sp(t,e){let n=oe(t,e,!0);if(!n.deleted)throw new Error("File is existing");delete t.metadataCache.fileCache[n.path],delete t.metadataCache.metadataCache[n.path]}i(sp,"unregisterFileCacheForNonExistingFile");function ap(t,e){let n=lp(t);for(let r of e)for(;r.deleted;){let o=n.get(r.path)??1;o--,n.set(r.path,o),o===0&&(n.delete(r.path),delete t.vault.fileMap[r.path],Z(r)&&t.metadataCache.uniqueFileLookup.remove(r.name.toLowerCase(),r)),r=fn(t,je(r.path),!0)}}i(ap,"unregisterFiles");function lp(t){return Pe(t,"registeredFilesCounts",new Map).value}i(lp,"getRegisteredFilesCounts");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function cp(t){return t.vault.getConfig("newLinkFormat")}i(cp,"getNewLinkFormat");function Ha(t){return!t.vault.getConfig("useMarkdownLinks")}i(Ha,"shouldUseWikilinks");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var pb="\\|",hb=/[\\\x00\x08\x0B\x0C\x0E-\x1F ]/g,fb=/[\\[\]<>_*~=`$]/g,dp=/(?<!\\)\|/g,pp="|",ji=(t=>(t.AbsolutePathInVault="AbsolutePathInVault",t.ObsidianSettingsDefault="ObsidianSettingsDefault",t.RelativePathToTheSource="RelativePathToTheSource",t.ShortestPathWhenPossible="ShortestPathWhenPossible",t))(ji||{}),Ka=(t=>(t.Markdown="Markdown",t.ObsidianSettingsDefault="ObsidianSettingsDefault",t.PreserveExisting="PreserveExisting",t.Wikilink="Wikilink",t))(Ka||{});function mb(t){let e=We(t.app,t.link,t.oldSourcePathOrFile??t.newSourcePathOrFile);return e?tn({app:t.app,link:t.link,linkStyle:t.linkStyle,newSourcePathOrFile:t.newSourcePathOrFile,newTargetPathOrFile:e,oldSourcePathOrFile:t.oldSourcePathOrFile,shouldUpdateFileNameAlias:t.shouldUpdateFileNameAlias}):t.link.original}i(mb,"convertLink");async function en(t,e,n,r={}){await Cr(t,e,async(o,s)=>{let a=await Qe(t,e);o.throwIfAborted();let l=oe(t,e),c=await t.vault.cachedRead(l);return o.throwIfAborted(),s!==c?null:await Fb(a,xt(t,e),n,o)},r)}i(en,"editLinks");function qa(t){return ye(t,hb,({substring:e})=>encodeURIComponent(e))}i(qa,"encodeUrl");function gb(t){return ye(t,fb,"\\$&")}i(gb,"escapeAlias");function We(t,e,n,r=!1){let{linkPath:o}=Nt(e.link),s=G(t,n),a=t.metadataCache.getFirstLinkpathDest(o,s);if(a)return a;if(!r)return null;if(o.startsWith("/"))return oe(t,o,!0);let l=ie(q(s),`./${o}`);return l.startsWith("../")?null:oe(t,l,!0)}i(We,"extractLinkFile");function Ki(t){let{app:e}=t,n={isEmptyEmbedAliasAllowed:!0},r=Mb(e).map(s=>s());t=Object.assign({},n,...r,t);let o=oe(e,t.targetPathOrFile,t.isNonExistingFileAllowed);return vr(e,[o],()=>Sb(t))}i(Ki,"generateMarkdownLink");function ja(t){let e=t.isEmbed?"!":"";if(t.isWikilink){let l=t.alias?`|${t.alias}`:"";return`${e}[[${t.url}${l}]]`}let n=t.alias??"",o=t.shouldEscapeAlias??!1?gb(n):n,s=t.shouldUseAngleBrackets?`<${t.url}>`:qa(t.url),a=t.title?` ${JSON.stringify(t.title)}`:"";return`${e}[${o}](${s}${a})`}i(ja,"generateRawMarkdownLink");function zn(t){let e=bb(t);return e[0]?.raw===t?e[0]:null}i(zn,"parseLink");function bb(t){let e=new Set,n="![",r="@[",o="@",a=ye(t,/\[(?<LinkAlias>!\[.*?\]\(.+?\))\]\((?<Link>.+?)\)/g,(f,b,k)=>`[${o.repeat(b.length)}](${k})`),l=ye(a,n,f=>(e.add(f.offset),r)),u=Ud().use(Fn).use(qd,{aliasDivider:pp}).parse(l),d=[],p=[];br(u,f=>{let b;switch(f.type){case"link":b=Ob(f,t);break;case"wikiLink":b=Rb(f,t);break;default:return}e.has(b.startOffset-1)&&(b.isEmbed=!0,b.startOffset--,b.raw=`!${b.raw}`),d.push(b)}),d.sort((f,b)=>f.startOffset-b.startOffset);let h=0;for(let f of d)up(t,h,f.startOffset-1,p),h=f.endOffset+1;return up(t,h,t.length-1,p),d.push(...p),d.sort((f,b)=>f.startOffset-b.startOffset),d}i(bb,"parseLinks");function wb(t){let{app:e,displayText:n,isWikilink:r,newSourcePathOrFile:o,oldSourcePathOrFile:s,oldTargetPath:a,targetPathOrFile:l}=t;if(r===!1)return!1;if(!n)return!0;let c=oe(e,l,!0),u=G(e,o),d=G(e,s??o),p=q(u),h=q(d),f=new Set;for(let k of[c.path,a]){if(!k)continue;let y=G(e,k);f.add(y),f.add(Ie(y)),f.add(hn(p,y)),f.add(hn(h,y))}for(let k of[d,u])f.add(e.metadataCache.fileToLinktext(c,k,!1));let b=ye((0,Vn.normalizePath)(n.split(" > ")[0]??""),/^\.\//g,"").toLowerCase();for(let k of f){if(k.toLowerCase()===b)return!0;let y=q(k),w=Ie(k,rt(k));if(ie(y,w).toLowerCase()===b)return!0}return!1}i(wb,"shouldResetAlias");function Nt(t){let e=(0,Vn.parseLinktext)(nr(t));return{linkPath:e.path,subpath:e.subpath}}i(Nt,"splitSubpath");function yb(t){return zn(t)?.hasAngleBrackets??!1}i(yb,"testAngleBrackets");function qi(t){return zn(t)?.isEmbed??!1}i(qi,"testEmbed");function kb(t){return zn(t)?.url.startsWith("./")??!1}i(kb,"testLeadingDot");function Ab(t){return zn(t)?.url.startsWith("/")??!1}i(Ab,"testLeadingSlash");function Er(t){return zn(t)?.isWikilink??!1}i(Er,"testWikilink");function Cb(t){return ye(t,/(?<Backslashes>\\+)(?<SpecialCharacter>[!"#$%&'()*+,-./:;<=>?@[\\\]^_`{|}~])/g,(e,n,r)=>{let s=n.length,a=Math.floor(s/2);return"\\".repeat(a)+r})}i(Cb,"unescapeAlias");function tn(t){let{app:e,link:n,linkStyle:r,newSourcePathOrFile:o,newTargetPathOrFile:s,oldSourcePathOrFile:a,oldTargetPathOrFile:l,shouldUpdateFileNameAlias:c}=t;if(!s)return n.original;let u=oe(e,s,!0),d=G(e,a??o),p=G(e,l??s),h=fp(e,n.original,r),{subpath:f}=Nt(n.link),b=!c;if(xt(e,o)&&Yd(n))return u.path+f;let k=zn(n.original),y;return h&&k?.alias&&(y=k.alias,b=!0),y??=wb({app:e,displayText:n.displayText,isWikilink:h,newSourcePathOrFile:o,oldSourcePathOrFile:a,oldTargetPath:p,targetPathOrFile:u})?void 0:k?.alias,b||(y===Ie(p,rt(p))?y=u.basename:y===Ie(p)&&(y=u.name)),Ki({alias:y,app:e,isSingleSubpathAllowed:d===p&&!!k?.alias,linkStyle:r,originalLink:n.original,sourcePathOrFile:o,subpath:f,targetPathOrFile:u})}i(tn,"updateLink");async function Gi(t){let{app:e,linkStyle:n,newSourcePathOrFile:r,oldSourcePathOrFile:o,shouldUpdateEmbedOnlyLinks:s,shouldUpdateFileNameAlias:a}=t;xt(e,r)&&!e.internalPlugins.getEnabledPluginById(He.Canvas)||await en(e,r,l=>{let c=qi(l.original);if(!(s!==void 0&&s!==c))return mb({app:e,link:l,linkStyle:n,newSourcePathOrFile:r,oldSourcePathOrFile:o,shouldUpdateFileNameAlias:a})},t)}i(Gi,"updateLinksInFile");function xb(t,e,n){if(e||n)return t;try{return decodeURIComponent(t)}catch(r){return console.error(`Failed to decode URL ${t}`,r),t}}i(xb,"decodeUrlSafely");function vb(t,e,n){return e<n?t.slice(e,n):void 0}i(vb,"extractAlias");function up(t,e,n,r){if(e>n)return;let o=t.slice(e,n+1);ye(o,/(?<Url>\S+)/g,(s,a)=>{Ba(a)&&r.push({encodedUrl:qa(a),endOffset:e+s.offset+a.length,hasAngleBrackets:!1,isEmbed:!1,isExternal:!0,isWikilink:!1,raw:a,startOffset:e+s.offset,url:a})})}i(up,"extractTextLinks");function Eb(t,e,n,r,o){n==="/"&&(n="");let s;if(e.path===n&&r&&o.isSingleSubpathAllowed)s="";else switch(o.linkPathStyle){case"AbsolutePathInVault":s=e.path,o.shouldUseLeadingSlashForAbsolutePaths&&!s.startsWith("/")&&(s=`/${s}`);break;case"RelativePathToTheNote":s=hn(q(n),e.path),o.shouldUseLeadingDotForRelativePaths&&!s.startsWith(".")&&(s=`./${s}`);break;case"ShortestPathWhenPossible":{let a=qe(t,e)?e.basename:e.name,l=t.metadataCache.getLinkpathDest(a,n);s=l.length===1&&l[0]===e?e.name:e.path;break}default:throw new Error(`Invalid link path style: ${o.linkPathStyle}.`)}return s=o.isWikilink?cs(s,`.${zt}`):s,s+=r,s}i(Eb,"generateLinkText");function Sb(t){let{app:e}=t,n=oe(e,t.targetPathOrFile,t.isNonExistingFileAllowed),r=G(e,t.sourcePathOrFile),o=t.subpath??"",s=Lb(t,n),a=Eb(e,n,r,o,s);return s.isWikilink?Tb(a,t.alias,s.isEmbed):Pb(a,n,t,s)}i(Sb,"generateMarkdownLinkImpl");function Pb(t,e,n,r){let{app:o}=n,s=n.alias??"";return!s&&(qe(o,e)||!n.isEmptyEmbedAliasAllowed)&&(s=!n.shouldIncludeAttachmentExtensionToEmbedAlias||qe(o,e)?e.basename:e.name,n.shouldEscapeAlias=!0),ja({alias:s,isEmbed:r.isEmbed,isWikilink:!1,shouldEscapeAlias:n.shouldEscapeAlias??!1,shouldUseAngleBrackets:r.shouldUseAngleBrackets,url:t})}i(Pb,"generateMarkdownStyleLink");function Tb(t,e,n){return e?.toLowerCase()===t.toLowerCase()?ja({isEmbed:n,isWikilink:!0,url:e}):ja({alias:e,isEmbed:n,isWikilink:!0,url:t})}i(Tb,"generateWikiLink");async function Fb(t,e,n,r){if(r??=Se(),r.throwIfAborted(),!t)return[];let o=[],s=(t.sections??[]).filter(a=>a.type==="table").map(a=>({end:a.position.end.offset,start:a.position.start.offset}));for(let a of Ue(t)){r.throwIfAborted();let l=await n(a,r);if(r.throwIfAborted(),l===void 0)continue;let c=Xt(a,l);if(e)if(xr(c))o.push(c);else{let u="Unsupported file change";throw console.error(u,c),new Error(u)}else Db(c,s)&&(c.newContent=c.newContent.replaceAll(dp,pb)),o.push(c)}return o}i(Fb,"getFileChanges");function Ib(t,e){switch(e??"ObsidianSettingsDefault"){case"AbsolutePathInVault":return"AbsolutePathInVault";case"RelativePathToTheSource":return"RelativePathToTheNote";case"ShortestPathWhenPossible":return"ShortestPathWhenPossible";case"ObsidianSettingsDefault":{let n=cp(t);switch(n){case"absolute":return"AbsolutePathInVault";case"relative":return"RelativePathToTheNote";case"shortest":return"ShortestPathWhenPossible";default:throw new Error(`Invalid link format: ${n}.`)}}default:throw new Error(`Invalid link path style: ${e}.`)}}i(Ib,"getFinalLinkPathStyle");function Mb(t){return Pe(t,"generateMarkdownLinkDefaultOptionsFns",[]).value}i(Mb,"getGenerateMarkdownLinkDefaultOptionsFns");function Lb(t,e){let{app:n}=t;return{isEmbed:t.isEmbed??(t.originalLink?qi(t.originalLink):void 0)??(!(0,Vn.requireApiVersion)("1.10.0")&&!qe(n,e)),isSingleSubpathAllowed:t.isSingleSubpathAllowed??!0,isWikilink:fp(n,t.originalLink,t.linkStyle),linkPathStyle:Ib(n,t.linkPathStyle),shouldUseAngleBrackets:t.shouldUseAngleBrackets??(t.originalLink?yb(t.originalLink):void 0)??!1,shouldUseLeadingDotForRelativePaths:t.shouldUseLeadingDotForRelativePaths??(t.originalLink?kb(t.originalLink):void 0)??!1,shouldUseLeadingSlashForAbsolutePaths:t.shouldUseLeadingSlashForAbsolutePaths??(t.originalLink?Ab(t.originalLink):void 0)??!1}}i(Lb,"getLinkConfig");function hp(t,e){return e.slice(t.position?.start.offset??0,t.position?.end.offset??0)}i(hp,"getRawLink");function Nb(t,e){return t.startsWith("<")||e.startsWith("<")}i(Nb,"hasAngleBracketsInLink");function Ob(t,e){let o=hp(t,e),s=t.children[0]?.position?.start.offset??1,a=t.children.at(-1)?.position?.end.offset??1,l=e.slice(a+2,(t.position?.end.offset??0)-1),c=Nb(o,l),u=Ba(t.url),d=xb(t.url,u,c),p=vb(e,s,a);return{alias:p,encodedUrl:u?qa(d):void 0,endOffset:t.position?.end.offset??0,hasAngleBrackets:c,isEmbed:!1,isExternal:u,isWikilink:!1,raw:o,startOffset:t.position?.start.offset??0,title:t.title??void 0,unescapedAlias:p===void 0?void 0:Cb(p),url:d}}i(Ob,"parseLinkNode");function Rb(t,e){return{alias:e.includes(pp)?t.data.alias:void 0,endOffset:t.position?.end.offset??0,isEmbed:!1,isExternal:!1,isWikilink:!0,raw:hp(t,e),startOffset:t.position?.start.offset??0,url:t.value}}i(Rb,"parseWikilinkNode");function Db(t,e){return!Zt(t)||!dp.test(t.newContent)?!1:e.some(n=>n.start<=t.reference.position.start.offset&&t.reference.position.end.offset<=n.end)}i(Db,"shouldEscapeWikilinkDivider");function fp(t,e,n){switch(n??"PreserveExisting"){case"Markdown":return!1;case"ObsidianSettingsDefault":return Ha(t);case"PreserveExisting":return e===void 0?Ha(t):Er(e);case"Wikilink":return!0;default:throw new Error(`Invalid link style: ${n}.`)}}i(fp,"shouldUseWikilinkStyle");function mp(t,e){let n=Object.keys(e).map(r=>Bb(t,r,e[r]));return n.length===1?n[0]:function(){n.forEach(r=>r())}}i(mp,"around");function Bb(t,e,n){let r=t[e],o=t.hasOwnProperty(e),s=o?r:function(){return Object.getPrototypeOf(t)[e].apply(this,arguments)},a=n(s);return r&&Object.setPrototypeOf(a,r),Object.setPrototypeOf(l,a),t[e]=l,c;function l(...u){return a===s&&t[e]===l&&c(),a.apply(this,u)}i(l,"wrapper");function c(){t[e]===l&&(o?t[e]=s:delete t[e]),a!==s&&(a=s,Object.setPrototypeOf(l,r||Function))}i(c,"remove")}i(Bb,"around1");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function gp(t,e){return mp(t,e)}i(gp,"around");async function Ga(t,e,n){let r=gp(t,e);try{return await n()}finally{r()}}i(Ga,"invokeWithPatchAsync");function bp(t,e,n){let r=gp(e,n),o=!1;function s(){if(!o)try{r()}finally{o=!0}}return i(s,"uninstallerWrapper"),t.register(s),r}i(bp,"registerPatch");var wp=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function Ya(t,e){let n=Ke(t,e);n&&await Vi(t,n)&&await gt(t,n)}i(Ya,"deleteEmptyFolder");async function Sr(t,e){let n=Ke(t,e);for(;n;){if(!await Vi(t,n))return;let r=n.parent;await Ya(t,n),n=r}}i(Sr,"deleteEmptyFolderHierarchy");async function gt(t,e,n,r,o){let s=rr(t,e);if(!s)return!1;let a=Z(s)||(o??!0);if(Z(s)){let l=await Oe(t,s);n&&l.clear(n),l.count()!==0&&(r&&new wp.Notice(E(c=>c.obsidianDevUtils.notices.attachmentIsStillUsed,{attachmentPath:s.path})),a=!1)}else if(dt(s)){let l=await _n(t,s);for(let c of[...l.files,...l.folders])a&&=await gt(t,c,n,r);a&&=await Vi(t,s)}if(a)try{await t.fileManager.trashFile(s)}catch(l){await t.vault.exists(s.path)&&(Vt(new Error(`Failed to delete ${s.path}`,{cause:l})),a=!1)}return a}i(gt,"deleteSafe");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ge=(t=>(t.Delete="Delete",t.DeleteWithEmptyParents="DeleteWithEmptyParents",t.Keep="Keep",t))(ge||{}),Ja=class{static{i(this,"DeleteHandler")}constructor(e,n,r,o,s){this.app=e,this.file=n,this.abortSignal=r,this.settingsManager=o,this.deletedMetadataCacheMap=s}async handle(){if(this.abortSignal.throwIfAborted(),J("RenameDeleteHandler:handleDelete")(`Handle Delete ${this.file.path}`),!Me(this.app,this.file))return;let e=this.settingsManager.getSettings();if(!e.shouldHandleDeletions)return;if(e.isPathIgnored?.(this.file.path)){J("RenameDeleteHandler:handleDelete")(`Skipping delete handler of ${this.file.path} as the path is ignored.`);return}let n=this.deletedMetadataCacheMap.get(this.file.path);this.deletedMetadataCacheMap.delete(this.file.path);let r=new Set;if(n){let a=Ue(n);for(let l of a){let c=We(this.app,l,this.file.path);c&&(this.settingsManager.isNoteEx(c.path)||(r.add(c.parent?.path??""),await gt(this.app,c,this.file.path,!1,e.emptyAttachmentFolderBehavior!=="Keep")))}}await kp(this.app,this.settingsManager.getSettings(),Array.from(r)),this.abortSignal.throwIfAborted();let o=await En(this.app,this.file.path,Tt.DeleteNote),s=Ke(this.app,o);s&&await Ws(this.app,this.file.path,Tt.DeleteNote)&&(this.abortSignal.throwIfAborted(),await gt(this.app,s,this.file.path,!1,e.emptyAttachmentFolderBehavior!=="Keep"),this.abortSignal.throwIfAborted())}},Qa=class{static{i(this,"HandledRenames")}map=new Map;add(e,n){this.map.set(this.keyToString(e,n),{newPath:n,oldPath:e})}delete(e,n){this.map.delete(this.keyToString(e,n))}has(e,n){return this.map.has(this.keyToString(e,n))}keys(){return this.map.values()}keyToString(e,n){return`${e} -> ${n}`}},Xa=class{static{i(this,"MetadataDeletedHandler")}constructor(e,n,r,o,s){this.app=e,this.file=n,this.prevCache=r,this.settingsManager=o,this.deletedMetadataCacheMap=s}handle(){let e=this.settingsManager.getSettings();if(e.shouldHandleDeletions){if(e.isPathIgnored?.(this.file.path)){J("RenameDeleteHandler:handleMetadataDeleted")(`Skipping metadata delete handler of ${this.file.path} as the path is ignored.`);return}qe(this.app,this.file)&&this.prevCache&&this.deletedMetadataCacheMap.set(this.file.path,this.prevCache)}}},Za=class{static{i(this,"Registry")}constructor(e,n,r){this.plugin=e,this.settingsBuilder=n,this.settingsManager=r,this.app=e.app,this.pluginId=e.manifest.id,this.abortSignal=e.abortSignal??Se()}abortSignal;app;deletedMetadataCacheMap=new Map;handledRenames=new Qa;interruptedRenamesMap=new Map;pluginId;register(){let e=this.settingsManager.renameDeleteHandlersMap;e.set(this.pluginId,this.settingsBuilder),this.logRegisteredHandlers(),this.plugin.register(()=>{e.delete(this.pluginId),this.logRegisteredHandlers()}),this.plugin.registerEvent(this.app.vault.on("delete",this.handleDelete.bind(this))),this.plugin.registerEvent(this.app.vault.on("rename",this.handleRename.bind(this))),this.plugin.registerEvent(this.app.metadataCache.on("deleted",this.handleMetadataDeleted.bind(this))),bp(this.plugin,this.app.fileManager,{runAsyncLinkUpdate:i(n=>Object.assign(r=>this.runAsyncLinkUpdate(n,r),{renameDeleteHandlerPatched:!0}),"runAsyncLinkUpdate")})}handleDelete(e){this.shouldInvokeHandler()&&$e({app:this.app,operationFn:i(n=>new Ja(this.app,e,n,this.settingsManager,this.deletedMetadataCacheMap).handle(),"operationFn"),operationName:vt(n=>n.obsidianDevUtils.renameDeleteHandler.handleDelete,{filePath:e.path})})}handleMetadataDeleted(e,n){this.shouldInvokeHandler()&&new Xa(this.app,e,n,this.settingsManager,this.deletedMetadataCacheMap).handle()}handleRename(e,n){if(!this.shouldInvokeHandler()||!Z(e))return;let r=e.path;if(J("RenameDeleteHandler:handleRename")(`Handle Rename ${n} -> ${r}`),this.handledRenames.has(n,r)){this.handledRenames.delete(n,r);return}let o=this.settingsManager.getSettings();if(!o.shouldHandleRenames)return;if(o.isPathIgnored?.(n)){J("RenameDeleteHandler:handleRename")(`Skipping rename handler of old path ${n} as the path is ignored.`);return}if(o.isPathIgnored?.(r)){J("RenameDeleteHandler:handleRename")(`Skipping rename handler of new path ${r} as the path is ignored.`);return}let s=this.app.metadataCache.getCache(n)??this.app.metadataCache.getCache(r),a=Wa(this.app,n).data;$e({abortSignal:this.abortSignal,app:this.app,operationFn:i(l=>new el({abortSignal:l,app:this.app,handledRenames:this.handledRenames,interruptedRenamesMap:this.interruptedRenamesMap,newPath:r,oldCache:s,oldPath:n,oldPathBacklinksMap:a,settingsManager:this.settingsManager}).handle(),"operationFn"),operationName:vt(l=>l.obsidianDevUtils.renameDeleteHandler.handleRename,{newPath:r,oldPath:n})})}logRegisteredHandlers(){let e=this.settingsManager.renameDeleteHandlersMap;J("RenameDeleteHandler:logRegisteredHandlers")(`Plugins with registered rename/delete handlers: ${JSON.stringify(Array.from(e.keys()))}`)}async runAsyncLinkUpdate(e,n){if(e.renameDeleteHandlerPatched){await e.call(this.app.fileManager,n);return}await e.call(this.app.fileManager,r=>this.wrapLinkUpdatesHandler(r,n))}shouldInvokeHandler(){let e=this.plugin.manifest.id,n=this.settingsManager.renameDeleteHandlersMap;return Array.from(n.keys())[0]===e}async wrapLinkUpdatesHandler(e,n){let r=!1,o=this.app.vault.on("rename",()=>{r=!0});try{await n(e)}finally{this.app.vault.offref(o)}let s=this.settingsManager.getSettings();!r||!s.shouldHandleRenames||tr(e,a=>s.isPathIgnored?.(a.sourceFile.path)?(J("RenameDeleteHandler:runAsyncLinkUpdate")(`Roll back to default link update of source file ${a.sourceFile.path} as the path is ignored.`),!0):s.isPathIgnored?.(a.resolvedFile.path)?(J("RenameDeleteHandler:runAsyncLinkUpdate")(`Roll back to default link update of resolved file ${a.resolvedFile.path} as the path is ignored.`),!0):!this.app.internalPlugins.getEnabledPluginById(He.Canvas)||this.app.plugins.getPlugin("backlink-cache")?!1:a.sourceFile.extension===$r||a.resolvedFile.extension===$r)}},el=class t{static{i(this,"RenameHandler")}abortSignal;app;handledRenames;interruptedCombinedBacklinksMap;interruptedRenamesMap;newPath;oldCache;oldPath;oldPathBacklinksMap;oldPathLinks;settingsManager;constructor(e){this.app=e.app,this.oldPath=e.oldPath,this.newPath=e.newPath,this.oldPathBacklinksMap=e.oldPathBacklinksMap,this.oldCache=e.oldCache,this.abortSignal=e.abortSignal,this.settingsManager=e.settingsManager,this.interruptedRenamesMap=e.interruptedRenamesMap,this.oldPathLinks=this.oldCache?Ue(this.oldCache):[],this.handledRenames=e.handledRenames,this.interruptedCombinedBacklinksMap=e.interruptedCombinedBacklinksMap??new Map}async handle(){if(this.abortSignal.throwIfAborted(),await this.continueInterruptedRenames(),this.abortSignal.throwIfAborted(),await this.refreshLinks(),this.abortSignal.throwIfAborted(),await this.handleCaseCollision())return;this.abortSignal.throwIfAborted();let e=Pe(this.app,"renamedFilePaths",new Set).value,n=Pe(this.app,"renamedLinkPaths",new Set).value;try{let r=new tl({abortSignal:this.abortSignal,app:this.app,newPath:this.newPath,oldCache:this.oldCache,oldPath:this.oldPath,settingsManager:this.settingsManager});await r.fill(),this.abortSignal.throwIfAborted();let o=new Map;r.initOriginalLinksMap(o),r.initBacklinksMap(this.oldPathBacklinksMap,o,this.oldPath);for(let l of r.keys()){if(l===this.oldPath)continue;let c=(await Oe(this.app,l)).data;this.abortSignal.throwIfAborted(),r.initBacklinksMap(c,o,l)}let s=new Set;for(let[l,c]of r.entries()){if(l!==this.oldPath){let u=await this.renameHandled(l,c);this.abortSignal.throwIfAborted(),r.set(l,u)}this.settingsManager.isNoteEx(l)||s.add(q(l))}await kp(this.app,this.settingsManager.getSettings(),Array.from(s)),this.abortSignal.throwIfAborted();let a=this.settingsManager.getSettings();for(let[l,c]of Array.from(o.entries()).concat(Array.from(this.interruptedCombinedBacklinksMap.entries()))){let u=0;await en(this.app,l,d=>{u++;let p=c.get(Wt(d));if(!p)return;let h=r.get(p);if(h)return e.add(l),n.add(`${l}//${String(u)}`),tn({app:this.app,link:d,newSourcePathOrFile:l,newTargetPathOrFile:h,oldTargetPathOrFile:p,shouldUpdateFileNameAlias:a.shouldUpdateFileNameAliases})},{shouldFailOnMissingFile:!1}),this.abortSignal.throwIfAborted()}if(Me(this.app,this.newPath)&&(await Gi({app:this.app,newSourcePathOrFile:this.newPath,oldSourcePathOrFile:this.oldPath,shouldFailOnMissingFile:!1,shouldUpdateFileNameAlias:a.shouldUpdateFileNameAliases}),this.abortSignal.throwIfAborted()),!X(this.app,this.newPath)){let l=this.interruptedRenamesMap.get(this.newPath);l||(l=[],this.interruptedRenamesMap.set(this.newPath,l)),l.push({combinedBacklinksMap:o,oldPath:this.oldPath})}}finally{let r=Array.from(this.handledRenames.keys());$e({abortSignal:this.abortSignal,app:this.app,operationFn:i(()=>{for(let o of r)this.handledRenames.delete(o.oldPath,o.newPath);n.size!==0&&(new Yi.Notice(vt(o=>o.obsidianDevUtils.renameDeleteHandler.updatedLinks,{filesCount:e.size,linksCount:n.size})),e.clear(),n.clear())},"operationFn"),operationName:vt(o=>o.obsidianDevUtils.renameDeleteHandler.handleOrphanedRenames)})}}async continueInterruptedRenames(){let e=this.interruptedRenamesMap.get(this.oldPath);if(e){this.interruptedRenamesMap.delete(this.oldPath);for(let n of e)await new t({abortSignal:this.abortSignal,app:this.app,handledRenames:this.handledRenames,interruptedCombinedBacklinksMap:n.combinedBacklinksMap,interruptedRenamesMap:this.interruptedRenamesMap,newPath:this.newPath,oldCache:this.oldCache,oldPath:n.oldPath,oldPathBacklinksMap:this.oldPathBacklinksMap,settingsManager:this.settingsManager}).handle()}}async handleCaseCollision(){if(!this.app.vault.adapter.insensitive||this.oldPath.toLowerCase()!==this.newPath.toLowerCase())return!1;let e=ie(q(this.newPath),`__temp__${Ie(this.newPath)}`);return await this.renameHandled(this.newPath,e),await new t({abortSignal:this.abortSignal,app:this.app,handledRenames:this.handledRenames,interruptedRenamesMap:this.interruptedRenamesMap,newPath:e,oldCache:this.oldCache,oldPath:this.oldPath,oldPathBacklinksMap:this.oldPathBacklinksMap,settingsManager:this.settingsManager}).handle(),await this.app.vault.rename(oe(this.app,e),this.newPath),!0}async refreshLinks(){let e=this.app.metadataCache.getCache(this.oldPath)??this.app.metadataCache.getCache(this.newPath),n=e?Ue(e):[],r=oe(this.app,this.oldPath,!0),o=new Map;await vr(this.app,[r],async()=>{o=(await Oe(this.app,r)).data});for(let s of n)this.oldPathLinks.includes(s)||this.oldPathLinks.push(s);for(let[s,a]of o.entries()){let l=this.oldPathBacklinksMap.get(s);l||(l=[],this.oldPathBacklinksMap.set(s,l));for(let c of a)l.includes(c)||l.push(c)}}async renameHandled(e,n){return n=za(this.app,e,n),e===n||(this.handledRenames.add(e,n),n=await $n(this.app,e,n)),n}},tl=class{static{i(this,"RenameMap")}abortSignal;app;map=new Map;newPath;oldCache;oldPath;oldPathLinks;settingsManager;constructor(e){this.abortSignal=e.abortSignal,this.app=e.app,this.settingsManager=e.settingsManager,this.oldCache=e.oldCache,this.oldPath=e.oldPath,this.newPath=e.newPath,this.oldPathLinks=this.oldCache?Ue(this.oldCache):[]}entries(){return this.map.entries()}async fill(){if(this.abortSignal.throwIfAborted(),this.map.set(this.oldPath,this.newPath),!Me(this.app,this.oldPath))return;let e=this.settingsManager.getSettings(),n=oe(this.app,this.oldPath,!0),r="";await op(this.app,[n],async()=>{let c=this.oldCache&&n.deleted;c&&rp(this.app,n,this.oldCache);try{r=await En(this.app,this.oldPath,Tt.RenameNote)}finally{c&&sp(this.app,n)}});let o=e.shouldRenameAttachmentFolder?await En(this.app,this.newPath,Tt.RenameNote):r,s=r==="/",a=Ke(this.app,r);if(!a||r===o&&!e.shouldRenameAttachmentFiles)return;let l=[];if(await Ws(this.app,this.oldPath,Tt.RenameNote))Yi.Vault.recurseChildren(a,c=>{this.abortSignal.throwIfAborted(),Z(c)&&l.push(c)});else for(let c of this.oldPathLinks){this.abortSignal.throwIfAborted();let u=We(this.app,c,this.oldPath);if(u&&(s||u.path.startsWith(r))){let d=await Oe(this.app,u);this.abortSignal.throwIfAborted();let p=new Set(d.keys());p.delete(this.oldPath),p.delete(this.newPath),p.size===0&&l.push(u)}}for(let c of l){if(this.abortSignal.throwIfAborted(),this.settingsManager.isNoteEx(c.path))continue;let u;if(e.shouldRenameAttachmentFiles)u=await Ht({app:this.app,context:Tt.RenameNote,notePathOrFile:this.newPath,oldAttachmentPathOrFile:c,oldNotePathOrFile:this.oldPath,shouldSkipDuplicateCheck:!0}),this.abortSignal.throwIfAborted();else{let d=s?c.path:hn(r,c.path),p=ie(o,q(d));u=ie(p,c.name)}if(c.path!==u){if(e.shouldDeleteConflictingAttachments){let d=X(this.app,u);d&&(J("RenameDeleteHandler:fillRenameMap")(`Removing conflicting attachment ${d.path}.`),await this.app.fileManager.trashFile(d),this.abortSignal.throwIfAborted())}else{let d=q(u),p=rt(u),h=Ie(u,p);u=this.app.vault.getAvailablePath(ie(d,h),p.slice(1))}this.map.set(c.path,u)}}}get(e){return this.map.get(e)}initBacklinksMap(e,n,r){for(let[o,s]of e.entries()){let a=this.map.get(o)??o,l=n.get(a)??new Map;n.set(a,l);for(let c of s)l.set(Wt(c),r)}}initOriginalLinksMap(e){for(let n of this.oldPathLinks){let r=We(this.app,n,this.oldPath);if(!r)continue;let o=new Map;o.set(this.newPath,[n]),this.initBacklinksMap(o,e,r.path)}}keys(){return this.map.keys()}set(e,n){this.map.set(e,n)}},nl=class{static{i(this,"SettingsManager")}constructor(e){this.app=e,this.renameDeleteHandlersMap=Pe(e,"renameDeleteHandlersMap",new Map).value}renameDeleteHandlersMap;getSettings(){let e=Array.from(this.renameDeleteHandlersMap.values()).reverse(),n={};n.isNote=r=>Me(this.app,r),n.isPathIgnored=()=>!1;for(let r of e){let o=r();n.shouldDeleteConflictingAttachments||=o.shouldDeleteConflictingAttachments??!1,o.emptyAttachmentFolderBehavior&&(n.emptyAttachmentFolderBehavior??=o.emptyAttachmentFolderBehavior),n.shouldHandleDeletions||=o.shouldHandleDeletions??!1,n.shouldHandleRenames||=o.shouldHandleRenames??!1,n.shouldRenameAttachmentFiles||=o.shouldRenameAttachmentFiles??!1,n.shouldRenameAttachmentFolder||=o.shouldRenameAttachmentFolder??!1,n.shouldUpdateFileNameAliases||=o.shouldUpdateFileNameAliases??!1;let s=n.isPathIgnored;n.isPathIgnored=l=>s(l)||(o.isPathIgnored?.(l)??!1);let a=n.isNote;n.isNote=l=>a(l)&&(o.isNote?.(l)??!0)}return n.emptyAttachmentFolderBehavior??="Keep",n}isNoteEx(e){return this.getSettings().isNote?.(e)??!1}};function yp(t,e){new Za(t,e,new nl(t.app)).register()}i(yp,"registerRenameDeleteHandlers");async function kp(t,e,n){if(e.emptyAttachmentFolderBehavior!=="Keep")for(let r of n)switch(e.emptyAttachmentFolderBehavior){case"Delete":await Ya(t,r);break;case"DeleteWithEmptyParents":await Sr(t,r);break;default:break}}i(kp,"cleanupParentFolders");var rn=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function te(t,e){t.createEl("strong",{cls:"markdown-rendered code"},n=>{n.createEl("code",{text:e})})}i(te,"appendCodeBlock");async function rl(t,e,n){let r=createEl(t,e);return await n?.(r),r}i(rl,"createElAsync");async function Ji(t){let e=createFragment();return await t?.(e),e}i(Ji,"createFragmentAsync");function Ap(t){let e=t;for(;e;){let n=getComputedStyle(e).zIndex,r=Number.parseInt(n,10);if(!Number.isNaN(r))return r;e=e.parentElement}return 0}i(Ap,"getZIndex");function Cp(t){return`${String(t)}px`}i(Cp,"toPx");var il=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ol=class extends vn{static{i(this,"ConfirmModal")}isConfirmed=!1;options;constructor(e,n){super(e,n,M.ConfirmModal);let r={app:e.app,cancelButtonText:E(o=>o.obsidianDevUtils.buttons.cancel),cssClass:"",message:e.message,okButtonText:E(o=>o.obsidianDevUtils.buttons.ok),title:""};this.options={...r,...e}}onClose(){super.onClose(),this.resolve(this.isConfirmed)}onOpen(){super.onOpen(),this.titleEl.setText(this.options.title),this.contentEl.createEl("p",{text:this.options.message});let e=new il.ButtonComponent(this.contentEl);e.setButtonText(this.options.okButtonText),e.setCta(),e.onClick(()=>{this.isConfirmed=!0,this.close()}),e.setClass(M.OkButton);let n=new il.ButtonComponent(this.contentEl);n.setButtonText(this.options.cancelButtonText),n.onClick(this.close.bind(this)),n.setClass(M.CancelButton)}};async function xp(t){return await oi(e=>new ol(t,e))}i(xp,"confirm");var Wn=require("obsidian");var nn=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var vp=null,sl=class{static{i(this,"FixedZIndexDomEventsHandlersInfo")}constructor(e,n,r){this.app=e,this.path=n,r.isConnected?this.updateZIndex(r):r.onNodeInserted(()=>{this.updateZIndex(r)})}get hoverPopover(){return this._hoverPopover}set hoverPopover(e){this._hoverPopover=e,e&&this.zIndex!==void 0&&e.hoverEl.setCssStyles({zIndex:String(this.zIndex)})}_hoverPopover=null;zIndex;updateZIndex(e){this.zIndex=Ap(e)+1}};async function _b(t){let e=t.sourcePath??"/",n=!1,r;t.component?r=t.component:(r=new nn.Component,r.load(),n=!0),await Ga(t.app.embedRegistry.embedByExtension,{md:i(o=>(s,a,l)=>(s.displayMode=!1,o(s,a,l)),"md")},async()=>{await nn.MarkdownRenderer.render(t.app,t.markdown,t.el,e,r)}),n&&r.unload(),t.shouldRegisterLinkHandlers&&await Ep(t.app,t.el,t.sourcePath)}i(_b,"fullRender");async function Ep(t,e,n){vp??=await $b(t),nn.MarkdownPreviewRenderer.registerDomEvents(e,new vp(new sl(t,n??"",e)))}i(Ep,"registerLinkHandlers");async function Un(t,e,n){let r=G(t,e);n??=r;let o=createSpan();await _b({app:t,el:o,markdown:`[[${r}|${n}]]`});let s=o.find("a");return await Ep(t,s),s}i(Un,"renderInternalLink");async function $b(t){let e=t.vault.getMarkdownFiles()[0],n=!1;e||(e=await t.vault.create("__temp.md",""),n=!0);let r=null;try{if(await Ga(nn.MarkdownPreviewRenderer,{registerDomEvents:i(o=>(s,a,l)=>{r=a.constructor,o(s,a,l)},"registerDomEvents")},async()=>{let o=t.workspace.getLeaf(!0);await o.openLinkText(e.path,""),o.detach()}),!r)throw new Error("Failed to get register dom events handlers constructor");return r}finally{n&&await t.fileManager.trashFile(e)}}i($b,"getDomEventsHandlersConstructor");var Sp=/(?:)/,Qi=/$./;var Xi=class{static{i(this,"PluginSettings")}collectAttachmentUsedByMultipleNotesMode="Skip";consistencyReportFile="consistency-report.md";emptyAttachmentFolderBehavior=ge.DeleteWithEmptyParents;moveAttachmentToProperFolderUsedByMultipleNotesMode="CopyAll";shouldChangeNoteBacklinksDisplayText=!0;shouldCollectAttachmentsAutomatically=!1;shouldDeleteAttachmentsWithNote=!1;shouldDeleteExistingFilesWhenMovingNote=!1;shouldMoveAttachmentsWithNote=!1;shouldShowBackupWarning=!0;shouldUpdateLinks=!0;treatAsAttachmentExtensions=[".excalidraw.md"];get excludePaths(){return this._excludePaths}set excludePaths(e){this._excludePaths=e.filter(Boolean),this._excludePathsRegExp=al(this._excludePaths,Qi)}get excludePathsFromAttachmentCollecting(){return this._excludePathsFromAttachmentCollecting}set excludePathsFromAttachmentCollecting(e){this._excludePathsFromAttachmentCollecting=e.filter(Boolean),this._excludePathsFromAttachmentCollectingRegExp=al(this._excludePathsFromAttachmentCollecting,Qi)}get hadDangerousSettingsReverted(){return this._hadDangerousSettingsReverted}get includePaths(){return this._includePaths}set includePaths(e){this._includePaths=e.filter(Boolean),this._includePathsRegExp=al(this._includePaths,Sp)}_excludePaths=["/consistency-report\\.md$/"];_excludePathsFromAttachmentCollecting=[];_excludePathsFromAttachmentCollectingRegExp=Qi;_excludePathsRegExp=Qi;_hadDangerousSettingsReverted=!1;_includePaths=[];_includePathsRegExp=Sp;isExcludedFromAttachmentCollecting(e){return this._excludePathsFromAttachmentCollectingRegExp.test(e)}isPathIgnored(e){return!this._includePathsRegExp.test(e)||this._excludePathsRegExp.test(e)}revertDangerousSettings(){this.shouldShowBackupWarning&&(this._hadDangerousSettingsReverted=this.shouldDeleteAttachmentsWithNote||this.shouldDeleteExistingFilesWhenMovingNote||this.shouldMoveAttachmentsWithNote||this.shouldCollectAttachmentsAutomatically,this.shouldDeleteAttachmentsWithNote=!1,this.shouldDeleteExistingFilesWhenMovingNote=!1,this.shouldMoveAttachmentsWithNote=!1,this.shouldCollectAttachmentsAutomatically=!1)}};function al(t,e){if(t.length===0)return e;let n=t.map(r=>r==="/"?e.source:r.startsWith("/")&&r.endsWith("/")?r.slice(1,-1):r.endsWith("/")?`^${Br(r)}`:`^${Br(r)}(/|$)`).map(r=>`(${r})`).join("|");return new RegExp(n)}i(al,"makeRegExp");var ll=class extends Wn.Modal{constructor(n,r,o,s,a){super(n);this.attachmentPath=r;this.backlinks=o;this.resolve=s;this.isCancelMode=a}static{i(this,"CollectAttachmentUsedByMultipleNotesModal")}isSelected=!1;onClose(){this.isSelected||this.select("Cancel",!1)}onOpen(){super.onOpen(),ee(()=>this.onOpenAsync())}async onOpenAsync(){super.onOpen(),new Wn.Setting(this.contentEl).setName(E(o=>o.collectAttachmentUsedByMultipleNotesModal.heading)).setHeading(),this.contentEl.appendChild(await Ji(async o=>{o.appendText(E(s=>s.collectAttachmentUsedByMultipleNotesModal.content.part1)),o.appendText(" "),o.appendChild(await Un(this.app,this.attachmentPath)),o.appendText(" "),o.appendText(E(s=>s.collectAttachmentUsedByMultipleNotesModal.content.part2)),o.appendChild(await rl("ul",{},async s=>{for(let a of this.backlinks)s.appendChild(await rl("li",{},async l=>{l.appendChild(await Un(this.app,a))}))}))}));let n=!1;this.isCancelMode||new Wn.Setting(this.contentEl).setName(E(o=>o.collectAttachmentUsedByMultipleNotesModal.shouldUseSameActionForOtherProblematicAttachmentsToggle)).addToggle(o=>{o.setValue(!1),o.onChange(s=>{n=s})});let r=new Wn.Setting(this.contentEl);this.isCancelMode||r.addButton(o=>{o.setButtonText(E(s=>s.buttons.skip)),o.onClick(()=>{this.select("Skip",n)})}).addButton(o=>{o.setButtonText(E(s=>s.buttons.move)),o.onClick(()=>{this.select("Move",n)})}).addButton(o=>{o.setButtonText(E(s=>s.buttons.copy)),o.onClick(()=>{this.select("Copy",n)})}),r.addButton(o=>{o.setButtonText(E(s=>s.obsidianDevUtils.buttons.cancel)),o.onClick(()=>{this.select("Cancel",n)})})}select(n,r){this.isSelected=!0,this.resolve({mode:n,shouldUseSameActionForOtherProblematicAttachments:r}),this.close()}};function cl(t,e,n,r){return new Promise(o=>{new ll(t,e,n,o,r??!1).open()})}i(cl,"selectMode");async function zb(t,e,n,r){r.throwIfAborted();let o=t.app;if(n.isAborted)return;let s=null,a=500,l=!1;ee(c);try{let u=xt(o,e),d=new Set,p=await Qe(o,e);if(r.throwIfAborted(),n.isAborted||!p)return;let h=u?await Ub(o,e):Ue(p);r.throwIfAborted();for(let f of h){if(n.isAborted)return;let b=await Wb(t,f,e.path,e.path,d);if(r.throwIfAborted(),!b)continue;if(t.settings.isExcludedFromAttachmentCollecting(b.oldAttachmentPath)){console.warn(`Skipping collecting attachment ${b.oldAttachmentPath} as it is excluded from attachment collecting.`);continue}let k=await Oe(o,b.oldAttachmentPath);if(r.throwIfAborted(),k.keys().length>1){let w=k.keys().sort((P,I)=>P.localeCompare(I)),C=w.map(P=>`- ${P}`).join(`
`);async function v(P){if(r.throwIfAborted(),!b)return!1;switch(P){case"Cancel":return console.error(`Cancelling collecting attachments, as attachment ${b.oldAttachmentPath} is referenced by multiple notes.
${C}`),t.settings.collectAttachmentUsedByMultipleNotesMode==="Cancel"&&await cl(o,b.oldAttachmentPath,w,!0),n.isAborted=!0,!1;case"Copy":if(!b.newAttachmentPath)return console.warn(`Skipping collecting attachment ${b.oldAttachmentPath} as it is already in the destination folder.`),!1;b.newAttachmentPath=await Rn(o,b.oldAttachmentPath,b.newAttachmentPath),await en(o,e,I=>{if(We(o,I,e)?.path===b.oldAttachmentPath)return tn({app:o,link:I,newSourcePathOrFile:e,newTargetPathOrFile:b.newAttachmentPath??"",oldSourcePathOrFile:e,oldTargetPathOrFile:b.oldAttachmentPath})});break;case"Move":if(!b.newAttachmentPath)return console.warn(`Skipping collecting attachment ${b.oldAttachmentPath} as it is already in the destination folder.`),!1;await y(),r.throwIfAborted();break;case"Prompt":{let{mode:I,shouldUseSameActionForOtherProblematicAttachments:A}=await cl(o,b.oldAttachmentPath,w);return A&&(n.collectAttachmentUsedByMultipleNotesMode=I),v(I)}case"Skip":return console.warn(`Skipping collecting attachment ${b.oldAttachmentPath} as it is referenced by multiple notes.
${C}`),!1;default:throw new Error(`Unknown collect attachment used by multiple notes mode: ${t.settings.collectAttachmentUsedByMultipleNotesMode}`)}return!0}if(i(v,"applyCollectAttachmentUsedByMultipleNotesMode"),!await v(n.collectAttachmentUsedByMultipleNotesMode??t.settings.collectAttachmentUsedByMultipleNotesMode)){r.throwIfAborted();continue}}else r.throwIfAborted(),await y(),r.throwIfAborted();async function y(){r.throwIfAborted(),b?.newAttachmentPath&&(b.newAttachmentPath=await $n(o,b.oldAttachmentPath,b.newAttachmentPath))}i(y,"registerMoveAttachment")}}finally{s?.hide(),l=!0}async function c(){await sleep(a),!l&&(s=new rn.Notice(E(u=>u.notice.collectingAttachments,{noteFilePath:e.path}),0))}i(c,"showNotice")}i(zb,"collectAttachments");function Zi(t){$e({abortSignal:t.abortSignal,app:t.app,operationFn:i(e=>Tp(t,[t.app.vault.getRoot()],e),"operationFn"),operationName:E(e=>e.commands.collectAttachmentsEntireVault)})}i(Zi,"collectAttachmentsEntireVault");function Hn(t,e){$e({abortSignal:t.abortSignal,app:t.app,operationFn:i(n=>Tp(t,e,n),"operationFn"),operationName:E(n=>n.menuItems.collectAttachmentsInFile)})}i(Hn,"collectAttachmentsInAbstractFiles");async function ul(t){let e=await Ht({app:t.plugin.app,context:t.actionContext,notePathOrFile:t.noteFilePath,oldAttachmentPathOrFile:t.attachmentFile,shouldSkipDuplicateCheck:!0});return t.attachmentFile.path===e?null:e}i(ul,"getProperAttachmentPath");function Pr(t,e){if(!e||!Me(t.app,e))return!1;let n=G(t.app,e);return t.settings.treatAsAttachmentExtensions.every(r=>!n.endsWith(r))}i(Pr,"isNoteEx");async function Tp(t,e,n){n.throwIfAborted();let r=e.length===1&&Z(e[0])?e[0]:null;if(r&&t.settings.isPathIgnored(r.path)){new rn.Notice(E(d=>d.notice.notePathIsIgnored)),console.warn(`Cannot collect attachments in the note as note path is ignored: ${r.path}.`);return}if(!(!!r||await xp({app:t.app,cancelButtonText:E(d=>d.obsidianDevUtils.buttons.cancel),message:createFragment(d=>{d.appendText(E(p=>p.attachmentCollector.confirm.part1)),d.createEl("br"),d.createEl("ul",{},p=>{for(let h of e)p.createEl("li",{},f=>{te(f,h.path)})}),d.createEl("br"),d.appendText(E(p=>p.attachmentCollector.confirm.part2))}),okButtonText:E(d=>d.obsidianDevUtils.buttons.ok),title:createFragment(d=>{(0,rn.setIcon)(d.createSpan(),"lucide-alert-triangle"),d.appendText(" "),d.appendText(E(p=>p.menuItems.collectAttachmentsInFiles))})}))){n.throwIfAborted();return}t.consoleDebug(`Collect attachments in files:
${e.map(d=>d.path).join(`
`)}`);let s=new Set;for(let d of e)Z(d)&&Me(t.app,d)&&s.add(d),dt(d)&&rn.Vault.recurseChildren(d,p=>{Z(p)&&Me(t.app,p)&&s.add(p)});let a=Array.from(s);a.sort((d,p)=>d.path.localeCompare(p.path));let l={},c=new AbortController,u=nt(c.signal,t.abortSignal);await ht({abortSignal:u,buildNoticeMessage:i((d,p)=>E(h=>h.attachmentCollector.progressBar.message,{iterationStr:p,noteFilePath:d.path}),"buildNoticeMessage"),items:a,processItem:i(async d=>{if(u.throwIfAborted(),t.settings.isPathIgnored(d.path)){console.warn(`Cannot collect attachments in the note as note path is ignored: ${d.path}.`);return}await zb(t,d,l,u),u.throwIfAborted(),l.isAborted&&c.abort()},"processItem"),progressBarTitle:`${t.manifest.name}: ${E(d=>d.attachmentCollector.progressBar.title)}`,shouldContinueOnError:!0,shouldShowProgressBar:!0})}i(Tp,"collectAttachmentsInAbstractFilesImpl");async function Ub(t,e){return(await t.vault.readJson(e.path)).nodes.filter(o=>o.type==="file").map(o=>o.file).map(o=>({link:o,original:o,position:{end:{col:0,line:0,loc:0,offset:0},start:{col:0,line:0,loc:0,offset:0}}}))}i(Ub,"getCanvasLinks");async function Wb(t,e,n,r,o){let s=t.app,a=We(s,e,r,!0);return!a||Pr(t,a)||o.has(a.path)?null:(o.add(a.path),a.deleted?(console.warn(`Skipping collecting attachment ${e.link} as it could not be resolved.`),null):{newAttachmentPath:await ul({actionContext:"CollectAttachments",attachmentFile:a,noteFilePath:n,plugin:t,reference:e}),oldAttachmentPath:a.path})}i(Wb,"prepareAttachmentToMove");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var eo=class{static{i(this,"CommandBase")}icon;id;name;app;originalId;originalName;plugin;constructor(e){this.id=e.id,this.name=e.name,this.icon=e.icon,this.plugin=e.plugin,this.app=this.plugin.app,this.originalId=this.id,this.originalName=this.name}register(){this.plugin.addCommand(this)}},re=class{static{i(this,"CommandInvocationBase")}constructor(e){this.plugin=e,this.app=e.app}app;lastCanExecuteResult;invoke(e){return this.lastCanExecuteResult=this.canExecute(),!e&&this.lastCanExecuteResult&&ee(()=>this.execute()),this.lastCanExecuteResult}async invokeAsync(e){this.lastCanExecuteResult=this.canExecute(),!e&&this.lastCanExecuteResult&&await this.execute()}canExecute(){return!0}async execute(){if(this.lastCanExecuteResult===void 0)throw new Error("canExecute() must be called before execute()");if(!this.lastCanExecuteResult)throw new Error("canExecute() must return true before execute()");await Promise.resolve()}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var se=class extends eo{static{i(this,"NonEditorCommandBase")}checkCallback(e){return this.createCommandInvocation().invoke(e)}};var dl=class extends re{static{i(this,"CheckConsistencyCommandInvocation")}constructor(e){super(e)}async execute(){await this.plugin.checkConsistency()}},to=class extends se{static{i(this,"CheckConsistencyCommand")}constructor(e){super({icon:"check",id:"check-consistency",name:"Check vault consistency",plugin:e})}createCommandInvocation(){return new dl(this.plugin)}};var pl=class extends re{static{i(this,"CollectAttachmentsEntireVaultCommandInvocation")}constructor(e){super(e)}async execute(){Zi(this.plugin),await Promise.resolve()}},no=class extends se{static{i(this,"CollectAttachmentsEntireVaultCommand")}constructor(e){super({icon:"download",id:"collect-attachments-entire-vault",name:E(n=>n.commands.collectAttachmentsEntireVault),plugin:e})}createCommandInvocation(){return new pl(this.plugin)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var bt=class extends se{static{i(this,"AbstractFileCommandBase")}fileMenuItemName;fileMenuSection;filesMenuItemName;filesMenuSection;checkCallback(e){return this.shouldAddToCommandPalette()?super.checkCallback(e):!1}register(){super.register(),this.plugin.registerEvent(this.app.workspace.on("file-menu",this.handleAbstractFileMenu.bind(this))),this.plugin.registerEvent(this.app.workspace.on("files-menu",this.handleAbstractFilesMenu.bind(this)))}createCommandInvocation(e){return this.createCommandInvocationForAbstractFile(e??this.app.workspace.getActiveFile())}createCommandInvocationForAbstractFiles(e){return new hl(this.plugin,e,this.createCommandInvocationForAbstractFile.bind(this))}shouldAddToAbstractFileMenu(e,n,r){return!1}shouldAddToAbstractFilesMenu(e,n,r){for(let o of e)if(!this.shouldAddToAbstractFileMenu(o,n,r))return!1;return!0}shouldAddToCommandPalette(){return!0}handleAbstractFileMenu(e,n,r,o){this.shouldAddToAbstractFileMenu(n,r,o)&&this.createCommandInvocation(n).invoke(!0)&&e.addItem(s=>{s.setTitle(this.fileMenuItemName??this.originalName).setIcon(this.icon).setSection(this.fileMenuSection??"").onClick(()=>this.createCommandInvocation(n).invoke(!1))})}handleAbstractFilesMenu(e,n,r,o){this.shouldAddToAbstractFilesMenu(n,r,o)&&this.createCommandInvocationForAbstractFiles(n).invoke(!0)&&e.addItem(s=>{s.setTitle(this.filesMenuItemName??this.fileMenuItemName??this.originalName).setIcon(this.icon).setSection(this.filesMenuSection??this.fileMenuSection??"").onClick(()=>this.createCommandInvocationForAbstractFiles(n).invoke(!1))})}},on=class extends re{static{i(this,"AbstractFileCommandInvocationBase")}_abstractFile;get abstractFile(){if(!this._abstractFile)throw new Error("Abstract file not set");return this._abstractFile}constructor(e,n){super(e),this._abstractFile=n}canExecute(){return super.canExecute()&&!!this._abstractFile}},ot=class extends re{static{i(this,"AbstractFilesCommandInvocationBase")}constructor(e,n){super(e),this.abstractFiles=n}},jn=class extends on{static{i(this,"ArrayDelegatingAbstractFileCommandInvocation")}constructor(e,n,r){super(e,n),this.createCommandInvocationForFiles=r}canExecute(){return super.canExecute()&&this.createCommandInvocationForFiles([this.abstractFile]).invoke(!0)}async execute(){await this.createCommandInvocationForFiles([this.abstractFile]).invokeAsync(!1)}},hl=class extends ot{static{i(this,"SequentialAbstractFilesCommandInvocationBase")}constructor(e,n,r){super(e,n),this.createCommandInvocationForFile=r}canExecute(){return super.canExecute()&&this.abstractFiles.length>0&&this.abstractFiles.every(e=>this.createCommandInvocationForFile(e).invoke(!0))}async execute(){for(let e of this.abstractFiles)await this.createCommandInvocationForFile(e).invokeAsync(!1)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ro=class extends on{static{i(this,"FolderCommandInvocationBase")}get folder(){return ms(this._abstractFile)}canExecute(){return super.canExecute()&&!!this.folder}};var io=class extends bt{static{i(this,"FolderCommandBase")}createCommandInvocation(e){let n=Vr(e??null)??this.app.workspace.getActiveFile()?.parent??null;return this.createCommandInvocationForFolder(n)}createCommandInvocationForAbstractFile(e){return this.createCommandInvocationForFolder(Vr(e))}createCommandInvocationForAbstractFiles(e){return this.createCommandInvocationForFolders(ps(e))}createCommandInvocationForFolders(e){return new ml(this.plugin,e,this.createCommandInvocationForFolder.bind(this))}shouldAddToAbstractFileMenu(e,n,r){return dt(e)?this.shouldAddToFolderMenu(e,n,r):!1}shouldAddToAbstractFilesMenu(e,n,r){return e.every(o=>dt(o))?this.shouldAddToFoldersMenu(ps(e),n,r):!1}shouldAddToFolderMenu(e,n,r){return!1}shouldAddToFoldersMenu(e,n,r){return!1}},fl=class extends ot{static{i(this,"FoldersCommandInvocationBase")}constructor(e,n){super(e,n),this.folders=n}},ml=class extends fl{static{i(this,"SequentialFoldersCommandInvocationBase")}constructor(e,n,r){super(e,n),this.createCommandInvocationForFolder=r}canExecute(){return super.canExecute()&&this.folders.length>0&&this.folders.every(e=>this.createCommandInvocationForFolder(e).invoke(!0))}async execute(){for(let e of this.folders)await this.createCommandInvocationForFolder(e).invokeAsync(!1)}};var gl=class extends ro{static{i(this,"CollectAttachmentsInFolderCommandInvocation")}constructor(e,n){super(e,n)}async execute(){Hn(this.plugin,[this.folder]),await Promise.resolve()}},oo=class extends io{static{i(this,"CollectAttachmentsInCurrentFolderCommand")}constructor(e){super({icon:"download",id:"collect-attachments-in-current-folder",name:E(n=>n.commands.collectAttachmentsCurrentFolder),plugin:e})}createCommandInvocationForFolder(e){return new gl(this.plugin,e)}};var bl=class extends ot{static{i(this,"CollectAttachmentsInFilesCommandInvocation")}constructor(e,n){super(e,n)}canExecute(){if(!super.canExecute())return!1;for(let e of this.abstractFiles)if(Z(e)&&!Me(this.app,e))return!1;return!0}async execute(){Hn(this.plugin,this.abstractFiles)}},so=class extends bt{static{i(this,"CollectAttachmentsInFileCommand")}fileMenuItemName=E(e=>e.menuItems.collectAttachmentsInFile);filesMenuItemName=E(e=>e.menuItems.collectAttachmentsInFiles);constructor(e){super({icon:"download",id:"collect-attachments-in-file",name:E(n=>n.commands.collectAttachmentsCurrentNote),plugin:e})}createCommandInvocationForAbstractFile(e){return new jn(this.plugin,e,this.createCommandInvocationForAbstractFiles.bind(this))}createCommandInvocationForAbstractFiles(e){return new bl(this.plugin,e)}shouldAddToAbstractFileMenu(){return!0}shouldAddToAbstractFilesMenu(){return!0}};var wl=class extends re{static{i(this,"ConvertAllEmbedsPathsToRelativeCommandInvocation")}constructor(e){super(e)}async execute(){await this.plugin.convertAllEmbedsPathsToRelative()}},ao=class extends se{static{i(this,"ConvertAllEmbedsPathsToRelativeCommand")}constructor(e){super({icon:"activity",id:"convert-all-embed-paths-to-relative",name:"Convert all embed paths to relative",plugin:e})}createCommandInvocation(){return new wl(this.plugin)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var wt=class extends on{static{i(this,"FileCommandInvocationBase")}get file(){return hs(this._abstractFile)}constructor(e,n){super(e,n)}canExecute(){return super.canExecute()&&!!this._abstractFile}};var yt=class extends bt{static{i(this,"FileCommandBase")}createCommandInvocation(e){return this.createCommandInvocationForAbstractFile(e??this.app.workspace.getActiveFile())}createCommandInvocationForAbstractFile(e){return this.createCommandInvocationForFile(fs(e))}createCommandInvocationForAbstractFiles(e){return this.createCommandInvocationForFiles(ds(e))}createCommandInvocationForFiles(e){return new kl(this.plugin,e,this.createCommandInvocationForFile.bind(this))}shouldAddToAbstractFileMenu(e,n,r){return Z(e)?this.shouldAddToFileMenu(e,n,r):!1}shouldAddToAbstractFilesMenu(e,n,r){return e.every(o=>Z(o))?this.shouldAddToFilesMenu(ds(e),n,r):!1}shouldAddToFileMenu(e,n,r){return!1}shouldAddToFilesMenu(e,n,r){return!1}},yl=class extends ot{static{i(this,"FilesCommandInvocationBase")}constructor(e,n){super(e,n),this.files=n}},kl=class extends yl{static{i(this,"SequentialFilesCommandInvocationBase")}constructor(e,n,r){super(e,n),this.createCommandInvocationForFile=r}canExecute(){return super.canExecute()&&this.files.length>0&&this.files.every(e=>this.createCommandInvocationForFile(e).invoke(!0))}async execute(){for(let e of this.files)await this.createCommandInvocationForFile(e).invokeAsync(!1)}};var Al=class extends wt{static{i(this,"ConvertAllEmbedsPathsToRelativeCurrentNoteCommandInvocation")}constructor(e,n){super(e,n)}async execute(){this.plugin.convertAllEmbedsPathsToRelativeCurrentNote(this.file),await Promise.resolve()}},lo=class extends yt{static{i(this,"ConvertAllEmbedsPathsToRelativeCurrentNoteCommand")}constructor(e){super({icon:"activity",id:"convert-all-embed-paths-to-relative-current-note",name:"Convert all embed paths to relative in current note",plugin:e})}createCommandInvocationForFile(e){return new Al(this.plugin,e)}};var Cl=class extends re{static{i(this,"ConvertAllLinkPathsToRelativeCommandInvocation")}constructor(e){super(e)}async execute(){await this.plugin.convertAllLinkPathsToRelative(this.plugin.abortSignal)}},co=class extends se{static{i(this,"ConvertAllLinkPathsToRelativeCommand")}constructor(e){super({icon:"activity",id:"convert-all-link-paths-to-relative",name:"Convert all link paths to relative",plugin:e})}createCommandInvocation(){return new Cl(this.plugin)}};var xl=class extends wt{static{i(this,"ConvertAllLinkPathsToRelativeCurrentNoteCommandInvocation")}constructor(e,n){super(e,n)}async execute(){this.plugin.convertAllLinkPathsToRelativeCurrentNote(this.file),await Promise.resolve()}},uo=class extends yt{static{i(this,"ConvertAllLinkPathsToRelativeCurrentNoteCommand")}constructor(e){super({icon:"activity",id:"convert-all-link-paths-to-relative-current-note",name:"Convert all link paths to relative in current note",plugin:e})}createCommandInvocationForFile(e){return new xl(this.plugin,e)}};var vl=class extends re{static{i(this,"DeleteEmptyFoldersCommandInvocation")}constructor(e){super(e)}async execute(){await this.plugin.deleteEmptyFolders()}},po=class extends se{static{i(this,"DeleteEmptyFoldersCommand")}constructor(e){super({icon:"trash",id:"delete-empty-folders",name:"Delete empty folders",plugin:e})}createCommandInvocation(){return new vl(this.plugin)}};var fo=require("obsidian");var Kn=require("obsidian");var El=class extends Kn.Modal{constructor(n,r,o,s,a){super(n);this.attachmentPath=r;this.backlinks=o;this.resolve=s;this.isCancelMode=a}static{i(this,"MoveAttachmentToProperFolderUsedByMultipleNotesModal")}isSelected=!1;selectedBacklinks=new Set;onClose(){this.isSelected||this.select("Cancel",!1)}onOpen(){super.onOpen(),ee(()=>this.onOpenAsync())}async onOpenAsync(){new Kn.Setting(this.contentEl).setName(E(o=>o.moveAttachmentToProperFolderUsedByMultipleNotesModal.heading)).setHeading(),this.contentEl.appendChild(await Ji(async o=>{o.appendText(E(s=>s.moveAttachmentToProperFolderUsedByMultipleNotesModal.content.part1)),o.appendText(" "),o.appendChild(await Un(this.app,this.attachmentPath)),o.appendText(" "),o.appendText(E(s=>s.moveAttachmentToProperFolderUsedByMultipleNotesModal.content.part2)),o.createEl("br"),o.appendText(E(s=>s.moveAttachmentToProperFolderUsedByMultipleNotesModal.content.part3)),o.createEl("br");for(let s of this.backlinks)this.selectedBacklinks.add(s),o.createEl("br"),o.createEl("input",{attr:{checked:!0},type:"checkbox"}),o.appendChild(await Un(this.app,s));o.createEl("br"),o.createEl("br")}));let n=!1;this.isCancelMode||new Kn.Setting(this.contentEl).setName(E(o=>o.moveAttachmentToProperFolderUsedByMultipleNotesModal.shouldUseSameActionForOtherProblematicAttachmentsToggle)).addToggle(o=>{o.setValue(!1),o.onChange(s=>{n=s})});let r=new Kn.Setting(this.contentEl);this.isCancelMode||r.addButton(o=>{o.setButtonText(E(s=>s.buttons.skip)),o.onClick(()=>{this.select("Skip",n)})}).addButton(o=>{o.setButtonText(E(s=>s.buttons.copyAll)),o.onClick(()=>{this.select("CopyAll",n)})}).addButton(o=>{o.setButtonText(E(s=>s.buttons.select)),o.onClick(()=>{this.select("Prompt",n)})}),r.addButton(o=>{o.setButtonText(E(s=>s.obsidianDevUtils.buttons.cancel)),o.onClick(()=>{this.select("Cancel",n)})})}select(n,r){this.isSelected=!0,this.resolve({backlinksToCopy:Array.from(this.selectedBacklinks).sort((o,s)=>o.localeCompare(s)),mode:n,shouldUseSameActionForOtherProblematicAttachments:r}),this.close()}};function Sl(t,e,n,r){return new Promise(o=>{new El(t,e,n,o,r??!1).open()})}i(Sl,"selectMode");var Pl=class extends ot{static{i(this,"MoveAttachmentToProperFolderCommandInvocation")}constructor(e,n){super(e,n)}canExecute(){if(!super.canExecute())return!1;for(let e of this.abstractFiles)if(Z(e)&&Pr(this.plugin,e))return!1;return!0}async execute(){let e=new Set;for(let a of this.abstractFiles)Z(a)&&!Pr(this.plugin,a)&&e.add(a),dt(a)&&fo.Vault.recurseChildren(a,l=>{Z(l)&&!Pr(this.plugin,l)&&e.add(l)});let n=Array.from(e);n.sort((a,l)=>a.path.localeCompare(l.path));let r=new AbortController,o=nt(r.signal,this.plugin.abortSignal),s={};await ht({abortSignal:o,buildNoticeMessage:i((a,l)=>E(c=>c.moveAttachmentToProperFolder.progressBar.message,{attachmentFilePath:a.path,iterationStr:l}),"buildNoticeMessage"),items:n,processItem:i(async a=>{if(o.throwIfAborted(),this.plugin.settings.isPathIgnored(a.path)){console.warn(`Cannot move attachment to proper folder as attachment path is ignored: ${a.path}.`);return}await this.moveAttachmentToProperFolder(a,s)&&o.throwIfAborted()},"processItem"),progressBarTitle:`${this.plugin.manifest.name}: ${E(a=>a.moveAttachmentToProperFolder.progressBar.title)}`,shouldContinueOnError:!0,shouldShowProgressBar:!0})}async moveAttachmentToProperFolder(e,n){let r=await Oe(this.plugin.app,e);if(r.keys().length===0)return new fo.Notice(E(l=>l.moveAttachmentToProperFolder.unusedAttachment,{attachmentPath:e.path})),!0;let o=[],s=this;if(r.keys().length>1&&!await a(n.mode??this.plugin.settings.moveAttachmentToProperFolderUsedByMultipleNotesMode))return!1;for(let l of o){let c=this.plugin.app.vault.getFileByPath(l);if(!c)continue;let u=r.get(l)?.[0];if(!u)continue;let d=await ul({actionContext:"MoveAttachmentToProperFolder",attachmentFile:e,noteFilePath:l,plugin:this.plugin,reference:u});if(!d){console.warn(`Skipping moving attachment ${e.path} to proper folder as it is already in the destination folder.`);continue}let p=new Set((r.get(l)??[]).map(h=>Wt(h)));await Rn(this.plugin.app,e,d),await en(this.plugin.app,c,h=>{let f=Wt(h);if(p.has(f))return tn({app:this.plugin.app,link:h,newSourcePathOrFile:c,newTargetPathOrFile:d,oldTargetPathOrFile:e})})}return r=await Oe(this.plugin.app,e),r.keys().length===0&&await gt(this.plugin.app,e),!0;async function a(l){switch(l){case"Cancel":return s.plugin.settings.moveAttachmentToProperFolderUsedByMultipleNotesMode==="Cancel"&&await Sl(s.plugin.app,e.path,Array.from(r.keys()),!0),!1;case"CopyAll":return o=Array.from(r.keys()),!0;case"Prompt":{let{backlinksToCopy:c,mode:u,shouldUseSameActionForOtherProblematicAttachments:d}=await Sl(s.plugin.app,e.path,Array.from(r.keys()));return d&&(n.mode=u),u==="Prompt"?(o=c,!0):a(u)}case"Skip":return o=[],!0;default:return!1}}i(a,"handleMode")}},ho=class extends bt{static{i(this,"MoveAttachmentToProperFolderCommand")}constructor(e){super({icon:"move",id:"move-attachment-to-proper-folder",name:E(n=>n.commands.moveAttachmentToProperFolder),plugin:e})}createCommandInvocationForAbstractFile(e){return new jn(this.plugin,e,this.createCommandInvocationForAbstractFiles.bind(this))}createCommandInvocationForAbstractFiles(e){return new Pl(this.plugin,e)}shouldAddToAbstractFileMenu(){return!0}shouldAddToAbstractFilesMenu(){return!0}};var Tl=class extends re{static{i(this,"ReorganizeVaultCommandInvocation")}constructor(e){super(e)}async execute(){await this.plugin.reorganizeVault()}},mo=class extends se{static{i(this,"ReorganizeVaultCommand")}constructor(e){super({icon:"sort-asc",id:"reorganize-vault",name:"Reorganize vault",plugin:e})}createCommandInvocation(){return new Tl(this.plugin)}};var Fl=class extends re{static{i(this,"ReplaceAllWikiEmbedsWithMarkdownEmbedsCommandInvocation")}constructor(e){super(e)}async execute(){await this.plugin.replaceAllWikiEmbedsWithMarkdownEmbeds()}},go=class extends se{static{i(this,"ReplaceAllWikiEmbedsWithMarkdownEmbedsCommand")}constructor(e){super({icon:"replace",id:"replace-all-wiki-embeds-with-markdown-embeds",name:"Replace all wiki embeds with Markdown embeds",plugin:e})}createCommandInvocation(){return new Fl(this.plugin)}};var Il=class extends wt{static{i(this,"ReplaceAllWikiEmbedsWithMarkdownEmbedsCurrentNoteCommandInvocation")}constructor(e,n){super(e,n)}async execute(){this.plugin.replaceAllWikiEmbedsWithMarkdownEmbedsCurrentNote(this.file),await Promise.resolve()}},bo=class extends yt{static{i(this,"ReplaceAllWikiEmbedsWithMarkdownEmbedsCurrentNoteCommand")}constructor(e){super({icon:"replace",id:"replace-all-wiki-embeds-with-markdown-embeds-current-note",name:"Replace all wiki embeds with Markdown embeds in current note",plugin:e})}createCommandInvocationForFile(e){return new Il(this.plugin,e)}};var Ml=class extends re{static{i(this,"ReplaceAllWikilinksWithMarkdownLinksCommandInvocation")}constructor(e){super(e)}async execute(){await this.plugin.replaceAllWikilinksWithMarkdownLinks()}},wo=class extends se{static{i(this,"ReplaceAllWikilinksWithMarkdownLinksCommand")}constructor(e){super({icon:"replace",id:"replace-all-wikilinks-with-markdown-links",name:"Replace all wikilinks with markdown links",plugin:e})}createCommandInvocation(){return new Ml(this.plugin)}};var Ll=class extends wt{static{i(this,"ReplaceAllWikilinksWithMarkdownLinksCurrentNoteCommandInvocation")}constructor(e,n){super(e,n)}async execute(){this.plugin.replaceAllWikilinksWithMarkdownLinksCurrentNote(this.file),await Promise.resolve()}},yo=class extends yt{static{i(this,"ReplaceAllWikilinksWithMarkdownLinksCurrentNoteCommand")}constructor(e){super({icon:"replace",id:"replace-all-wikilinks-with-markdown-links-current-note",name:"Replace all wikilinks with markdown links in current note",plugin:e})}createCommandInvocationForFile(e){return new Ll(this.plugin,e)}};var $M=require("obsidian");var ko=require("obsidian");var Ot=class extends Map{constructor(n){super();this.title=n}static{i(this,"ConsistencyCheckResult")}add(n,r){this.has(n)||this.set(n,[]);let o=this.get(n);o&&o.push(r)}toString(n,r){if(this.size>0){let o=`# ${this.title} (${String(this.size)} files)
`;for(let s of this.keys()){let a=X(n,s);if(!a)continue;let l=Ki({app:n,sourcePathOrFile:r,targetPathOrFile:a});o+=`${l}:
`;for(let c of this.get(s)??[])et(c)?o+=`- (line ${String(c.position.start.line+1)}): \`${c.link}\`
`:ve(c)&&(o+=`- (key ${c.key}): \`${c.link}\`
`);o+=`

`}return o}return`# ${this.title}
No problems found

`}},qn=class{constructor(e){this.plugin=e;}static{i(this,"LinksHandler")}async checkConsistency(e,n,r,o,s,a){if(this.plugin.settings.isPathIgnored(e.path))return;let l=await Qe(this.plugin.app,e.path);if(!l)return;let c=l.links??[],u=l.embeds??[],d=l.frontmatterLinks??[];for(let p of c)await this.isValidLink(p,e.path)||n.add(e.path,p),Er(p.original)&&o.add(e.path,p);for(let p of u)await this.isValidLink(p,e.path)||r.add(e.path,p),Er(p.original)&&s.add(e.path,p);for(let p of d)await this.isValidLink(p,e.path)||a.add(e.path,p)}async convertAllNoteEmbedsPathsToRelative(e,n){return await this.convertAllNoteRefPathsToRelative(e,!0,n)}async convertAllNoteLinksPathsToRelative(e,n){return await this.convertAllNoteRefPathsToRelative(e,!1,n)}async getCachedNotesThatHaveLinkToFile(e){let n=X(this.plugin.app,e);return n?(await Oe(this.plugin.app,n)).keys():[]}getFullPathForLink(e,n){({linkPath:e}=Nt(e));let r=q(n);return ie(r,e)}async replaceAllNoteWikilinksWithMarkdownLinks(e,n,r){if(this.plugin.settings.isPathIgnored(e))return 0;let o=X(this.plugin.app,e);if(!o)return console.warn(`can't update wikilinks in note, file not found: ${e}`),0;let s=await Qe(this.plugin.app,o);if(r.throwIfAborted(),!s)return 0;let l=((n?s.embeds:s.links)??[]).filter(c=>Er(c.original)).length;return await Gi({app:this.plugin.app,linkStyle:Ka.Markdown,newSourcePathOrFile:o,shouldUpdateEmbedOnlyLinks:n}),l}async updateChangedPathsInNote(e,n){if(this.plugin.settings.isPathIgnored(e))return;let r=X(this.plugin.app,e);if(!r){console.warn(`can't update links in note, file not found: ${e}`);return}let o=new Map;for(let s of n)o.set(s.oldPath,s.newPath);await this.updateLinks(r,r.path,o)}async convertAllNoteRefPathsToRelative(e,n,r){if(this.plugin.settings.isPathIgnored(e))return[];let o=X(this.plugin.app,e);if(!o)return[];let s=[];return await Cr(this.plugin.app,o,async(a,l)=>{let c=await Qe(this.plugin.app,o);a.throwIfAborted();let u=await this.plugin.app.vault.cachedRead(o);if(a.throwIfAborted(),l!==u)return null;if(!c)return[];let d=(n?c.embeds:c.links)??[],p=[];for(let h of d){let f=this.convertLink({forceRelativePath:!0,link:h,note:o,oldNotePath:e});p.push(Xt(h,f)),s.push({newLink:f,old:h})}return p},{abortSignal:r}),s}convertLink({forceRelativePath:e,link:n,note:r,oldNotePath:o,pathChangeMap:s}){let{linkPath:a,subpath:l}=Nt(n.link),c=We(this.plugin.app,n,o)?.path??ie(q(o),a),u=s?s.get(c):We(this.plugin.app,n,r.path)?.path??ie(q(r.path),a);if(!u)return n.original;let d=X(this.plugin.app,u)??X(this.plugin.app,c);if(!d)return n.original;let p=n.displayText&&ie(r.parent?.path??"",n.displayText)===c?void 0:n.displayText;return Ki({alias:p,app:this.plugin.app,linkPathStyle:e?ji.RelativePathToTheSource:ji.ObsidianSettingsDefault,originalLink:n.original,sourcePathOrFile:r.path,subpath:l,targetPathOrFile:d})}async isValidLink(e,n){let{linkPath:r,subpath:o}=Nt(e.link),s;r?r.startsWith("/")?s=(0,ko.normalizePath)(r):s=ie(q(n),r):s=n;let a=X(this.plugin.app,s);if(!a)return!1;if(!o)return!0;let l=a.extension.toLocaleLowerCase();if(l==="pdf")return o.startsWith("#page=");if(l!==zt)return!1;let c=await Qe(this.plugin.app,a);return c?!!(0,ko.resolveSubpath)(c,o):!1}async updateLinks(e,n,r){await Cr(this.plugin.app,e,async(o,s)=>{o.throwIfAborted();let a=await Qe(this.plugin.app,e);o.throwIfAborted();let l=await this.plugin.app.vault.cachedRead(e);return o.throwIfAborted(),s!==l?null:a?Ue(a).map(u=>Xt(u,this.convertLink({link:u,note:e,oldNotePath:n,pathChangeMap:r}))):[]})}};var Gn=class{constructor(e,n){this.plugin=e;this.lh=n;}static{i(this,"FilesHandler")}async collectAttachmentsForCachedNote(e){if(this.plugin.settings.isPathIgnored(e))return{movedAttachments:[]};let n={movedAttachments:[]},r=await Qe(this.plugin.app,e);if(!r)return n;for(let o of Ue(r)){let{linkPath:s}=Nt(o.link);if(!s)continue;let a=this.lh.getFullPathForLink(s,e);if(n.movedAttachments.findIndex(d=>d.oldPath===a)!==-1)continue;let l=We(this.plugin.app,o,e);if(!l){let d=qi(o.original)?"embed":"link";console.warn(`${e} has bad ${d} (file does not exist): ${s}`);continue}if(this.isNoteEx(l)||this.plugin.settings.isExcludedFromAttachmentCollecting(l.path))continue;let c=await Ht({app:this.plugin.app,context:"consistent-attachments-and-links",notePathOrFile:e,oldAttachmentPathOrFile:l,shouldSkipDuplicateCheck:!0});if(q(c)===q(l.path))continue;let u=await this.moveAttachment(l,c,[e]);n.movedAttachments=n.movedAttachments.concat(u.movedAttachments)}return n}async deleteEmptyFolders(e){if(this.plugin.settings.isPathIgnored(e))return;e=_r(e,"./");let n=await _n(this.plugin.app,e);for(let r of n.folders)await this.deleteEmptyFolders(r);if(n=await _n(this.plugin.app,e),n.files.length===0&&n.folders.length===0&&(this.plugin.consoleDebug(`delete empty folder: 
   ${e}`),await this.plugin.app.vault.exists(e)))try{await this.plugin.app.vault.adapter.rmdir(e,!1)}catch(r){if(await this.plugin.app.vault.adapter.exists(e))throw r}}isNoteEx(e){if(!e||!Me(this.plugin.app,e))return!1;let n=G(this.plugin.app,e);return this.plugin.settings.treatAsAttachmentExtensions.every(r=>!n.endsWith(r))}async createFolderForAttachmentFromPath(e){await Dn(this.plugin.app,q(e))}async deleteFile(e){if(await this.plugin.app.fileManager.trashFile(e),!!e.parent)switch(this.plugin.settings.emptyAttachmentFolderBehavior){case ge.Delete:await gt(this.plugin.app,e.parent,void 0,void 0,!0);break;case ge.DeleteWithEmptyParents:await Sr(this.plugin.app,e.parent);break;default:break}}async moveAttachment(e,n,r){let o=e.path,s={movedAttachments:[]};if(this.plugin.settings.isPathIgnored(o)||this.isNoteEx(e))return s;if(o===n)return console.warn("Can't move file. Source and destination path the same."),s;await this.createFolderForAttachmentFromPath(n);let a=await this.lh.getCachedNotesThatHaveLinkToFile(o);for(let d of r)a.remove(d);if(o!==e.path)return console.warn("File was moved already"),await this.moveAttachment(e,n,r);let l=e.parent,c=a.length===0,u=X(this.plugin.app,n);if(u&&(this.plugin.settings.shouldDeleteExistingFilesWhenMovingNote?(this.plugin.consoleDebug(`delete: ${n}`),await this.deleteFile(u)):n=$i(this.plugin.app,n)),this.plugin.consoleDebug(`${c?"move":"copy"}
  from: ${o}
  to: ${n}`),s.movedAttachments.push({newPath:n,oldPath:o}),c?await $n(this.plugin.app,e,n):await Rn(this.plugin.app,e,n),l)switch(this.plugin.settings.emptyAttachmentFolderBehavior){case ge.Delete:await gt(this.plugin.app,l,void 0,void 0,!0);break;case ge.DeleteWithEmptyParents:await Sr(this.plugin.app,l);break;default:break}return s}};var Ip={attachmentCollector:{confirm:{part1:"Do you want to collect attachments for all notes in folders recursively?",part2:"This operation cannot be undone."},progressBar:{message:"Collecting attachments {{iterationStr}} - '{{noteFilePath}}'.",title:"Collecting attachments..."}},buttons:{copy:"Copy",copyAll:"Copy all",move:"Move",previewAttachmentFile:"Preview attachment file",select:"Select",skip:"Skip"},collectAttachmentUsedByMultipleNotesModal:{content:{part1:"Attachment",part2:"is referenced by multiple notes."},heading:"Collecting attachment used by multiple notes",shouldUseSameActionForOtherProblematicAttachmentsToggle:"Should use the same action for other problematic attachments"},commands:{collectAttachmentsCurrentFolder:"Collect attachments in current folder",collectAttachmentsCurrentNote:"Collect attachments in current note",collectAttachmentsEntireVault:"Collect attachments in entire vault",moveAttachmentToProperFolder:"Move attachment to proper folder"},menuItems:{collectAttachmentsInFile:"Collect attachments in file",collectAttachmentsInFiles:"Collect attachments in files"},moveAttachmentToProperFolder:{progressBar:{message:"Moving attachment to proper folder {{iterationStr}} - '{{attachmentFilePath}}'.",title:"Moving attachment to proper folder..."},unusedAttachment:"Attachment {{attachmentPath}} is not used by any note. It will not be moved."},moveAttachmentToProperFolderUsedByMultipleNotesModal:{content:{part1:"Attachment",part2:"is referenced by multiple notes.",part3:"Select notes to copy the attachment to."},heading:"Collecting attachment used by multiple notes",shouldUseSameActionForOtherProblematicAttachmentsToggle:"Should use the same action for other problematic attachments"},notice:{collectingAttachments:"Collecting attachments for '{{noteFilePath}}'",collectingAttachmentsCancelled:"Collecting attachments cancelled. See console for details.",generatedAttachmentFileNameIsInvalid:{part1:`Generated attachment file name '{{path}}' is invalid.
{{validationMessage}}
Check your`,part2:"setting."},notePathIsIgnored:"Note path is ignored"},obsidianDevUtils:{buttons:{cancel:"Cancel",ok:"OK"},dataview:{itemsPerPage:"Items per page:",jumpToPage:"Jump to page:"},notices:{attachmentIsStillUsed:"Attachment {{attachmentPath}} is still used by other notes. It will not be deleted.",unhandledError:"An unhandled error occurred. Please check the console for more information."}},pluginSettings:{attachmentRenameMode:{all:{description:"all files are renamed.",displayText:"All"},none:{description:"their names are preserved.",displayText:"None"},onlyPastedImages:{description:"only pasted images are renamed. Applies only when the PNG image content is pasted from the clipboard directly. Typically, for pasting screenshots.",displayText:"Only pasted images"}},collectAttachmentUsedByMultipleNotesMode:{cancel:{description:"cancel the attachment collecting.",displayText:"Cancel"},copy:{description:"copy the attachment to the new location.",displayText:"Copy"},move:{description:"move the attachment to the new location.",displayText:"Move"},prompt:{description:"prompt the user to choose the action.",displayText:"Prompt"},skip:{description:"skip the attachment and proceed to the next one.",displayText:"Skip"}},defaultImageSizeDimension:{height:"Height",width:"Width"},emptyAttachmentFolderBehavior:{delete:{description:"will delete the empty attachment folder.",displayText:"Delete"},deleteWithEmptyParents:{description:"will delete the empty attachment folder and its empty parent folders.",displayText:"Delete with empty parents"},keep:{description:"will keep the empty attachment folder.",displayText:"Keep"}},moveAttachmentToProperFolderUsedByMultipleNotesMode:{cancel:{description:"cancel the attachment collecting.",displayText:"Cancel"},copyAll:{description:"copy the attachment to the new location for all notes.",displayText:"Copy all"},prompt:{description:"prompt the user to choose the action.",displayText:"Prompt"},skip:{description:"skip the attachment and proceed to the next one.",displayText:"Skip"}}},pluginSettingsManager:{customToken:{codeComment:`// Custom tokens were commented out as they have to be updated to the new format introduced in plugin version 9.0.0.
// Refer to the documentation (https://github.com/RainCat1998/obsidian-custom-attachment-location?tab=readme-ov-file#custom-tokens) for more information.`,deprecated:{part1:"In plugin version 9.0.0, the format of custom token registration changed. Please update your tokens accordingly. Refer to the",part2:"documentation",part3:"for more information"}},legacyRenameAttachmentsToLowerCase:{part1:"In plugin version 9.0.0, the",part2:"setting is deprecated. Use",part3:"format instead. See",part4:"documentation",part5:"for more information"},markdownUrlFormat:{deprecated:{part1:"You have potentially incorrect value set for the",part2:"format. Please refer to the",part3:"documentation",part4:"for more information",part5:"This message will not be shown again."}},specialCharacters:{part1:"In plugin version 9.16.0, the",part2:"default setting value was changed. Your setting value was updated to the new default value."},validation:{defaultImageSizeMustBePercentageOrPixels:"Default image size must be in pixels or percentage",invalidCustomTokensCode:"Invalid custom tokens code",invalidRegularExpression:"Invalid regular expression {{regExp}}",specialCharactersMustNotContainSlash:"Special characters must not contain /",specialCharactersReplacementMustNotContainInvalidFileNamePathCharacters:"Special character replacement must not contain invalid file name path characters."},version:{part1:"Your settings file ",part2:"has version",part3:"which is newer than the current plugin version",part4:"The plugin might not work as expected. Please update the plugin to the latest version or ensure that the settings are correct."}},pluginSettingsTab:{attachmentRenameMode:{description:{part1:"When attaching files:"},name:"Attachment rename mode"},collectAttachmentUsedByMultipleNotesMode:{description:{part1:"When the collected attachment is used by multiple notes:"},name:"Collect attachment used by multiple notes mode"},collectedAttachmentFileName:{description:{part1:"See available",part2:"tokens",part3:"Leave empty to use",part4:"setting instead."},name:"Collected attachment file name"},customTokens:{description:{part1:"Custom tokens to be used.",part2:"See",part3:"documentation",part4:"for more information.",part5:"\u26A0\uFE0F Custom tokens can be an arbitrary JavaScript code. If poorly written, it can cause the data loss. Use it at your own risk."},name:"Custom tokens"},defaultImageSize:{description:{part1:"The default image size.",part2:"Can be specified in pixels",part3:"or percentage of the full image size",part4:"Leave blank to use the original image size."},name:"Default image size"},duplicateNameSeparator:{description:{part1:"When you are pasting/dragging a file with the same name as an existing file, this separator will be added to the file name.",part2:"E.g., when you are dragging file",part3:", it will be renamed to ",part4:", etc, getting the first name available."},name:"Duplicate name separator"},emptyAttachmentFolderBehavior:{description:{part1:"When the attachment folder becomes empty:"},name:"Empty attachment folder behavior"},excludePaths:{description:{part1:"Exclude notes from the following paths.",part2:"Insert each path on a new line.",part3:"You can use path string or",part4:"If the setting is empty, no notes are excluded."},name:"Exclude paths"},excludePathsFromAttachmentCollecting:{description:{part1:"Exclude attachments from the following paths when",part2:"Collect attachments",part3:"command is executed.",part4:"Insert each path on a new line.",part5:"You can use path string or",part6:"If the setting is empty, no paths are excluded from attachment collecting."},name:"Exclude paths from attachment collecting"},generatedAttachmentFileName:{description:{part1:"See available",part2:"tokens"},name:"Generated attachment file name"},includePaths:{description:{part1:"Include notes from the following paths.",part2:"Insert each path on a new line.",part3:"You can use path string or",part4:"If the setting is empty, all notes are included."},name:"Include paths"},jpegQuality:{description:"The smaller the quality, the greater the compression ratio.",name:"JPEG Quality"},locationForNewAttachments:{description:{part1:"Start with",part2:"to use relative path.",part3:"See available",part4:"tokens",part5:"Dot-folders like",part6:"are not recommended, because Obsidian does not track them. You might need to use",part7:"Plugin to manage them."},name:"Location for new attachments"},markdownUrlFormat:{description:{part1:"Format for the URL that will be inserted into Markdown.",part2:"See available",part3:"tokens",part4:"Leave blank to use the default format."},name:"Markdown URL format"},moveAttachmentToProperFolderUsedByMultipleNotesMode:{description:{part1:"When the attachment is used by multiple notes:"},name:"Move attachment to proper folder used by multiple notes mode"},renameAttachmentsToLowerCase:"Rename attachments to lower case",renamedAttachmentFileName:{description:{part1:"See available",part2:"tokens",part3:"Leave empty to use",part4:"setting instead."},name:"Renamed attachment file name"},resetToSampleCustomTokens:{message:"Are you sure you want to reset the custom tokens to the sample custom tokens? Your changes will be lost.",title:"Reset to sample custom tokens"},shouldConvertPastedImagesToJpeg:{description:"Whether to convert pasted images to JPEG. Applies only when the PNG image content is pasted from the clipboard directly. Typically, for pasting screenshots.",name:"Should convert pasted images to JPEG"},shouldDeleteOrphanAttachments:{description:"If enabled, when the note is deleted, its orphan attachments are deleted as well.",name:"Should delete orphan attachments"},shouldHandleRenames:{description:"Whether to handle renames.",name:"Should handle renames"},shouldRenameAttachmentFiles:{description:{part1:"If enabled, when a note is renamed or moved, its attachments will be renamed according to the",part2:"setting."},name:"Should rename attachment files"},shouldRenameAttachmentFolders:{description:"Whether to rename attachment folders when a note is renamed or moved.",name:"Should rename attachment folders"},shouldRenameCollectedAttachments:{description:{part1:"If enabled, attachments processed via",part2:"Collect attachments",part3:"commands will be renamed according to the",part4:"setting."},name:"Should rename collected attachments"},specialCharacters:{description:{part1:"Special characters in attachment folder and file name to be replaced or removed.",part2:"Leave blank to preserve special characters."},name:"Special characters"},specialCharactersReplacement:{description:{part1:"Replacement string for special characters in attachment folder and file name.",part2:"Leave blank to remove special characters."},name:"Special characters replacement"},timeoutInSeconds:{description:{part1:"The timeout in seconds for all operations.",part2:"If",part3:"is set, the operations execution timeout is disabled."},name:"Timeout in seconds"},treatAsAttachmentExtensions:{description:{part1:"Treat files with these extensions as attachments.",part2:"By default",part3:"and",part4:"linked files are not treated as attachments and are not moved with the note.",part5:"You can add custom extensions, e.g.",part6:", to override this behavior."},name:"Treat as attachment extensions"}},promptWithPreviewModal:{previewModal:{title:"Preview attachment file '{{fullFileName}}'"},title:"Provide a value for the prompt token"},regularExpression:"/regular expression/"};var Mp=Ip;var Hb={en:Mp},Lp=Hb;i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Rt=class{static{i(this,"Transformer")}getTransformer(e){if(e===this.id)return this;throw new Error(`Transformer with id ${e} not found`)}transformObjectRecursively(e){return this.transformValueRecursively(e,"")}getTransformerId(e,n){return this.canTransform(e,n)?this.id:null}transformValueRecursively(e,n){let r=this.getTransformerId(e,n);if(r){let a=this.transformValue(e,n);return a===void 0?void 0:{__transformerId:r,transformedValue:a}}if(e===null)return null;if(typeof e!="object")return e;if(Array.isArray(e))return e.map((a,l)=>this.transformValueRecursively(a,String(l)));let o=e;if(o.__transformerId)return this.getTransformer(o.__transformerId).restoreValue(o.transformedValue,n);let s={};for(let a of wn(e)){let l=e[a],c=this.transformValueRecursively(l,a);s[a]=c}return s}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Xe=class extends Rt{static{i(this,"TypedTransformer")}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ao=class extends Xe{static{i(this,"DateTransformer")}get id(){return"date"}canTransform(e){return e instanceof Date}restoreValue(e){return new Date(e)}transformValue(e){return e.toISOString()}};var Np=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Co=class extends Xe{static{i(this,"DurationTransformer")}get id(){return"duration"}canTransform(e){let n=e??{};return!!n.asHours&&!!n.asMinutes&&!!n.asSeconds&&!!n.asMilliseconds}restoreValue(e){return Np.moment.duration(e)}transformValue(e){return e.toISOString()}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var xo=class extends Rt{static{i(this,"GroupTransformer")}constructor(e){super(),this.transformers=e}get id(){return"group"}canTransform(e,n){return this.getFirstTransformerThatCanTransform(e,n)!==null}getTransformer(e){return this.transformers.find(n=>n.id===e)??St(`No transformer with id ${e} found`)}transformValue(e,n){let r=this.getFirstTransformerThatCanTransform(e,n);if(r===null)throw new Error("No transformer can transform the value");return r.transformValue(e,n)}getTransformerId(e,n){let r=this.getFirstTransformerThatCanTransform(e,n);return r===null?null:r.id}restoreValue(){throw new Error("GroupTransformer does not support restoring values")}getFirstTransformerThatCanTransform(e,n){return this.transformers.find(r=>r.canTransform(e,n))??null}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var vo=class extends Xe{static{i(this,"MapTransformer")}get id(){return"map"}canTransform(e){return e instanceof Map}restoreValue(e){return new Map(e)}transformValue(e){return Array.from(e.entries())}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Eo=class extends Xe{static{i(this,"SetTransformer")}get id(){return"set"}canTransform(e){return e instanceof Set}restoreValue(e){return new Set(e)}transformValue(e){return Array.from(e)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var jb="_",So=class extends Rt{static{i(this,"SkipPrivatePropertyTransformer")}get id(){return"skip-private-property"}canTransform(e,n){return n.startsWith(jb)}transformValue(){}restoreValue(){throw new Error("SkipPrivatePropertyTransformer does not support restoring values")}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Tr=class{static{i(this,"TwoWayMap")}keyValueMap=new Map;valueKeyMap=new Map;constructor(e=[]){for(let[n,r]of e)this.set(n,r)}clear(){this.keyValueMap.clear(),this.valueKeyMap.clear()}deleteKey(e){let n=this.getValue(e);n!==void 0&&this.valueKeyMap.delete(n),this.keyValueMap.delete(e)}deleteValue(e){let n=this.getKey(e);n!==void 0&&this.keyValueMap.delete(n),this.valueKeyMap.delete(e)}entries(){return this.keyValueMap.entries()}getKey(e){return this.valueKeyMap.get(e)}getValue(e){return this.keyValueMap.get(e)}hasKey(e){return this.keyValueMap.has(e)}hasValue(e){return this.valueKeyMap.has(e)}keys(){return this.keyValueMap.keys()}set(e,n){this.deleteKey(e),this.deleteValue(n),this.keyValueMap.set(e,n),this.valueKeyMap.set(n,e)}values(){return this.valueKeyMap.keys()}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Po=class extends Xe{static{i(this,"TwoWayMapTransformer")}get id(){return"two-way-map"}canTransform(e){return e instanceof Tr}restoreValue(e){return new Tr(e)}transformValue(e){return Array.from(e.entries())}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Kb=new xo([new So,new Ao,new Co,new vo,new Eo,new Po]),To=class extends lt{static{i(this,"PluginSettingsManagerBase")}constructor(e){super(),this.plugin=e,this.app=e.app,this.defaultSettings=this.createDefaultSettings(),this.currentSettingsWrapper=this.createDefaultSettingsWrapper(),this.lastSavedSettingsWrapper=this.createDefaultSettingsWrapper(),this.propertyNames=wn(this.currentSettingsWrapper.settings),this.registerValidators(),this.registerLegacySettingsConverters()}app;defaultSettings;get settingsWrapper(){return this.currentSettingsWrapper}currentSettingsWrapper;lastSavedSettingsWrapper;legacySettingsConverters=[];propertyNames;validators=new Map;async editAndSave(e,n){await this.edit(e),await this.saveToFile(n)}async ensureSafe(e){let n=await this.validate(e);for(let r of this.propertyNames)n[r]&&(e[r]=this.defaultSettings[r])}async getSafeCopy(e){let n=await this.cloneSettings(e);return await this.ensureSafe(n),n}async loadFromFile(e){let n=await this.plugin.loadData();this.lastSavedSettingsWrapper=this.createDefaultSettingsWrapper(),this.currentSettingsWrapper=this.createDefaultSettingsWrapper();try{if(n==null)return;if(typeof n!="object"){console.error(`Invalid settings from data.json. Expected Object, got: ${typeof n}`);return}let r=n,o=await this.rawRecordToSettings(r),s=await this.validate(o);for(let l of this.propertyNames)this.setPropertyImpl(l,o[l],s[l]);this.lastSavedSettingsWrapper=await this.cloneSettingsWrapper(this.currentSettingsWrapper);let a=await this.settingsToRawRecord(this.currentSettingsWrapper.settings);Ye(a,n)||await this.saveToFileImpl()}finally{await this.triggerAsync("loadSettings",this.currentSettingsWrapper,e)}}on(e,n,r){return super.on(e,n,r)}async revalidate(){return await this.edit(_e),this.currentSettingsWrapper.validationMessages}async saveToFile(e){Ye(this.lastSavedSettingsWrapper.settings,this.currentSettingsWrapper.settings)||(await this.saveToFileImpl(),await this.triggerAsync("saveSettings",this.currentSettingsWrapper,this.lastSavedSettingsWrapper,e),this.lastSavedSettingsWrapper=await this.cloneSettingsWrapper(this.currentSettingsWrapper))}async setProperty(e,n){return await this.edit(r=>{r[e]=n}),this.currentSettingsWrapper.validationMessages[e]}async validate(e){let n={};for(let[r,o]of this.validators.entries()){let s=await o(e[r],e);s&&(n[r]=s)}return n}getTransformer(){return Kb}async onLoadRecord(e){for(let n of this.legacySettingsConverters)n(e);await Promise.resolve()}async onSavingRecord(e){await at()}registerLegacySettingsConverter(e,n){let r=this;this.legacySettingsConverters.push(o);function o(s){let a=new Set(Object.keys(new e)),l=new Set(r.propertyNames),c=s;n(c);for(let u of Object.keys(c))l.has(u)||a.has(u)&&delete s[u]}i(o,"legacySettingsConverter")}registerLegacySettingsConverters(){}registerValidator(e,n){this.validators.set(e,n)}registerValidators(){}async cloneSettings(e){let n=await this.settingsToRawRecord(e),r=JSON.stringify(n),o=JSON.parse(r);return await this.rawRecordToSettings(o)}async cloneSettingsWrapper(e){return{safeSettings:await this.cloneSettings(e.safeSettings),settings:await this.cloneSettings(e.settings),validationMessages:{...e.validationMessages}}}createDefaultSettingsWrapper(){return{safeSettings:this.createDefaultSettings(),settings:this.createDefaultSettings(),validationMessages:{}}}async edit(e){try{await e(this.currentSettingsWrapper.settings)}finally{let n=await this.validate(this.currentSettingsWrapper.settings);for(let r of this.propertyNames){let o=n[r]??"";this.currentSettingsWrapper.validationMessages[r]=o,this.currentSettingsWrapper.safeSettings[r]=o?this.defaultSettings[r]:this.currentSettingsWrapper.settings[r]}}}isValidPropertyName(e){return typeof e!="string"?!1:this.propertyNames.includes(e)}async rawRecordToSettings(e){e=this.getTransformer().transformObjectRecursively(e),await this.onLoadRecord(e);let n=this.createDefaultSettings();for(let[r,o]of Object.entries(e)){if(!this.isValidPropertyName(r)){J("PluginSettingsManagerBase:rawRecordToSettings")(`Unknown property: ${r}`);continue}typeof o!=typeof this.defaultSettings[r]&&J("PluginSettingsManagerBase:rawRecordToSettings")("Possible invalid value type. It might lead to an unexpected behavior of the plugin. There is also a chance it is a false-negative warning, as we are unable to determine the exact type of the value in runtime.",{defaultValue:this.defaultSettings[r],propertyName:r,value:o}),n[r]=o}return n}async saveToFileImpl(){await this.plugin.saveData(await this.settingsToRawRecord(this.currentSettingsWrapper.settings))}setPropertyImpl(e,n,r){this.currentSettingsWrapper.settings[e]=n,this.currentSettingsWrapper.validationMessages[e]=r??"",this.currentSettingsWrapper.safeSettings[e]=r?this.defaultSettings[e]:n}async settingsToRawRecord(e){let n={};for(let r of this.propertyNames)n[r]=e[r];return await this.onSavingRecord(n),this.getTransformer().transformObjectRecursively(n)}};var Fo=class extends To{static{i(this,"PluginSettingsManager")}createDefaultSettings(){return new Xi}async onLoadRecord(e){await super.onLoadRecord(e);let n=e,r=n.excludePaths??[];if(n.ignoreFiles){for(let o of n.ignoreFiles)r.push(`/${o}$/`);delete n.ignoreFiles}if(n.ignoreFolders){for(let o of n.ignoreFolders??[])r.push(o);delete n.ignoreFolders}r.length>0&&(n.excludePaths=r),n.deleteEmptyFolders!==void 0&&(n.emptyAttachmentFolderBehavior=n.deleteEmptyFolders?ge.DeleteWithEmptyParents:ge.Keep,delete n.deleteEmptyFolders),n.autoCollectAttachments!==void 0&&(n.shouldCollectAttachmentsAutomatically=n.autoCollectAttachments,delete n.autoCollectAttachments),n.changeNoteBacklinksAlt!==void 0&&(n.shouldChangeNoteBacklinksDisplayText=n.changeNoteBacklinksAlt,delete n.changeNoteBacklinksAlt),n.deleteAttachmentsWithNote!==void 0&&(n.shouldDeleteAttachmentsWithNote=n.deleteAttachmentsWithNote,delete n.deleteAttachmentsWithNote),n.deleteExistFilesWhenMoveNote!==void 0&&(n.shouldDeleteExistingFilesWhenMovingNote=n.deleteExistFilesWhenMoveNote,delete n.deleteExistFilesWhenMoveNote),n.moveAttachmentsWithNote!==void 0&&(n.shouldMoveAttachmentsWithNote=n.moveAttachmentsWithNote,delete n.moveAttachmentsWithNote),n.showBackupWarning!==void 0&&(n.shouldShowBackupWarning=n.showBackupWarning,delete n.showBackupWarning),n.updateLinks!==void 0&&(n.shouldUpdateLinks=n.updateLinks,delete n.updateLinks)}registerValidators(){super.registerValidators(),this.registerValidator("includePaths",Op),this.registerValidator("excludePaths",Op)}};function Op(t){for(let e of t)if(e.startsWith("/")&&e.endsWith("/")){let n=e.slice(1,-1);if(!rc(n))return`Invalid regular expression ${e}`}}i(Op,"pathsValidator");var nh=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Rp(t,e){let n=Object.keys(t).find(r=>t[r]===e);if(n===void 0)throw new Error(`Invalid enum value: ${e}`);return n}i(Rp,"getEnumKey");function Dp(t,e){let n=t[e];if(n===void 0)throw new Error(`Invalid enum key: ${e}`);return n}i(Dp,"getEnumValue");var sn=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Io(t){let e=t.parentElement;if(!e)throw new Error("Element must be attached to the DOM");if(e.classList.contains(M.SettingComponentWrapper))return e;let n=Array.from(e.children),r=createDiv();K(r,M.SettingComponentWrapper);for(let o of n)r.appendChild(o);return e.appendChild(r),r}i(Io,"ensureWrapped");var Bp=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Nl=class{static{i(this,"AbstractTextComponentWrapper")}constructor(e){this.abstractTextComponent=e}empty(){this.abstractTextComponent.setValue("")}isEmpty(){return this.abstractTextComponent.getValue()===""}setPlaceholderValue(e){return this.abstractTextComponent.setPlaceholder(e),this}};function _p(t){return qb(t)?t:t instanceof Bp.AbstractTextComponent?new Nl(t):null}i(_p,"getTextBasedComponentValue");function qb(t){let e=t;return typeof e.setPlaceholderValue=="function"&&typeof e.isEmpty=="function"}i(qb,"isTextBasedComponent");var Ce=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Mo=class{static{i(this,"OverlayValidatorComponent")}constructor(e){this.el=e;let n=Io(e);this._validatorEl=n.createEl("input",{attr:{tabindex:-1}}),K(this._validatorEl,M.OverlayValidator),this._validatorEl.addEventListener("focus",()=>{this.el.focus()}),this._validatorEl.isActiveElement=this.isElementOrDescendantActive.bind(this);let r=this.el.querySelector("[tabindex]");r||(this.el.getAttr("tabindex")===null&&(this.el.tabIndex=-1),r=this.el),this.el.addEventListener("focusin",()=>{this.forceBlurValidatorEl()}),this.el.addEventListener("click",()=>{r.focus()}),this.el.addEventListener("focusout",()=>{window.setTimeout(()=>{this.isElementOrDescendantActive()||this.forceBlurValidatorEl()},0)})}get validatorEl(){return this._validatorEl}_validatorEl;forceBlurValidatorEl(){this._validatorEl.dispatchEvent(new Event("blur"))}isElementOrDescendantActive(){return this.el.contains(document.activeElement)}},Dt=class{static{i(this,"ValidatorElementWrapper")}constructor(e){this.validatorEl=e}};function $p(t){return Gb(t)?t:t instanceof Ce.ColorComponent?new Dt(t.colorPickerEl):t instanceof Ce.DropdownComponent?new Dt(t.selectEl):t instanceof Ce.ProgressBarComponent?new Mo(t.progressBar):t instanceof Ce.SearchComponent?new Dt(t.inputEl):t instanceof Ce.SliderComponent?new Dt(t.sliderEl):t instanceof Ce.TextAreaComponent?new Dt(t.inputEl):t instanceof Ce.TextComponent?new Dt(t.inputEl):t instanceof Ce.ToggleComponent?new Mo(t.toggleEl):null}i($p,"getValidatorComponent");function Gb(t){return!!t.validatorEl}i(Gb,"isValidatorComponent");var Yb=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Vp(t){return t.validationMessage!==void 0}i(Vp,"isValidationMessageHolder");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ol="PluginSettingsTab",Lo=class extends sn.PluginSettingTab{static{i(this,"PluginSettingsTabBase")}constructor(e){super(e.app,e),this.plugin=e,K(this.containerEl,M.PluginSettingsTab),this.saveSettingsDebounced=(0,sn.debounce)(An(()=>this.plugin.settingsManager.saveToFile(Ol)),this.saveSettingsDebounceTimeoutInMilliseconds),this.asyncEventsComponent=new ai,this.asyncEvents=new lt}get isOpen(){return this._isOpen}get saveSettingsDebounceTimeoutInMilliseconds(){return 2e3}_isOpen=!1;asyncEvents;asyncEventsComponent;saveSettingsDebounced;get pluginSettings(){return this.plugin.settingsManager.settingsWrapper.settings}bind(e,n,r){let s={...{componentToPluginSettingsValueConverter:i(P=>P,"componentToPluginSettingsValueConverter"),onChanged:_e,pluginSettingsToComponentValueConverter:i(P=>P,"pluginSettingsToComponentValueConverter"),shouldResetSettingWhenComponentIsEmpty:!0,shouldShowPlaceholderForDefaultValues:!0,shouldShowValidationMessage:!0},...r},a=$p(e)?.validatorEl,l=_p(e),c=this.pluginSettings[n],u=this.plugin.settingsManager.defaultSettings[n],d=s.pluginSettingsToComponentValueConverter(u);l?.setPlaceholderValue(d);let p,h=null,f=null;if(a){let P=Io(a);h=P.createDiv(),K(h,M.Tooltip,M.TooltipValidator),f=h.createSpan();let I=h.createDiv();K(I,M.TooltipArrow),h.hide(),P.appendChild(h)}this.asyncEventsComponent.registerAsyncEvent(this.on("validationMessageChanged",(P,I)=>{n===P&&(p=I,C())}));let b=!1,k=!1;l&&s.shouldShowPlaceholderForDefaultValues&&Ye(c,u)?l.empty():e.setValue(s.pluginSettingsToComponentValueConverter(c));let y=!1,C=(0,sn.debounce)(()=>{requestAnimationFrame(()=>{v()})},100);return e.onChange(async P=>{if(y){y=!1;return}b=!1;let I=this.pluginSettings[n],A,$=!0;if(k=!!l?.isEmpty()&&s.shouldResetSettingWhenComponentIsEmpty,k)A=u;else{let H=s.componentToPluginSettingsValueConverter(P);Vp(H)?(p=H.validationMessage,$=!1):A=H}$&&(p=await this.plugin.settingsManager.setProperty(n,A),l&&s.shouldShowPlaceholderForDefaultValues&&!l.isEmpty()&&Ye(A,u)&&(b=!0)),C(),$&&await s.onChanged(A,I),this.saveSettingsDebounced()}),a?.addEventListener("focus",()=>{C()}),a?.addEventListener("blur",()=>{C()}),a?.addEventListener("click",()=>{requestAnimationFrame(()=>{C()})}),p=this.plugin.settingsManager.settingsWrapper.validationMessages[n]??"",C(),e;function v(){a?.isActiveElement()||(b?(b=!1,l?.isEmpty()||(y=!0,l?.empty())):k&&(k=!1,l?.isEmpty()&&(y=!0,e.setValue(d)))),a&&(p===""&&(a.setCustomValidity(""),a.checkValidity(),p=a.validationMessage),a.setCustomValidity(p),s.shouldShowValidationMessage?(f&&(f.textContent=p),h?.toggle(!!p)):p&&(0,sn.setTooltip)(a,p))}i(v,"updateValidatorEl")}display(){this.containerEl.empty(),this._isOpen=!0,this.asyncEventsComponent.load(),this.asyncEventsComponent.registerAsyncEvent(this.plugin.settingsManager.on("loadSettings",this.onLoadSettings.bind(this))),this.asyncEventsComponent.registerAsyncEvent(this.plugin.settingsManager.on("saveSettings",this.onSaveSettings.bind(this)))}hide(){super.hide(),this.saveSettingsDebounced.cancel(),this._isOpen=!1,this.asyncEventsComponent.unload(),this.asyncEventsComponent.load(),ee(()=>this.hideAsync())}async hideAsync(){await this.plugin.settingsManager.saveToFile(Ol)}show(){this.app.setting.openTab(this)}async onLoadSettings(e,n){this.display(),await at()}async revalidate(){let e=await this.plugin.settingsManager.revalidate();await this.updateValidations(e)}on(e,n,r){return this.asyncEvents.on(e,n,r)}async onSaveSettings(e,n,r){if(r===Ol){await this.updateValidations(e.validationMessages);return}this.display()}async updateValidations(e){for(let[n,r]of Object.entries(e))await this.asyncEvents.triggerAsync("validationMessageChanged",n,r)}};var Fr=require("obsidian");var zp=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var No=class extends zp.ValueComponent{static{i(this,"CheckboxComponent")}inputEl;get validatorEl(){return this.inputEl}changeCallback;constructor(e){super(),K(e,M.CheckboxComponent),this.inputEl=e.createEl("input",{type:"checkbox"}),this.inputEl.addEventListener("change",this.onChanged.bind(this))}getValue(){return this.inputEl.checked}onChange(e){return this.changeCallback=e,this}onChanged(){this.changeCallback?.(this.getValue())}setDisabled(e){return super.setDisabled(e),this.inputEl.disabled=e,this}setValue(e){return this.inputEl.checked=e,this}};var Ro=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Oo=class extends Ro.ValueComponent{static{i(this,"CodeHighlighterComponent")}get inputEl(){return this.textAreaComponent.inputEl}get validatorEl(){return this.inputEl}codeEl;placeholder="";preEl;tabSize;textAreaComponent;constructor(e){super(),K(e,M.CodeHighlighterComponent);let n=e.createDiv();K(n,M.SettingComponentWrapper),this.textAreaComponent=new Ro.TextAreaComponent(n),this.preEl=n.createEl("pre",{attr:{tabIndex:"-1"}}),this.codeEl=this.preEl.createEl("code",{attr:{tabIndex:"-1"}}),this.inputEl.addEventListener("input",An(this.updateHighlightedCode.bind(this))),this.inputEl.addEventListener("scroll",this.handleScroll.bind(this)),this.inputEl.addEventListener("keydown",this.handleKeyDown.bind(this));let r=2;this.tabSize=r}empty(){this.setValue("")}getValue(){return this.textAreaComponent.getValue()}isEmpty(){return this.textAreaComponent.getValue()===""}onChange(e){return this.textAreaComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.textAreaComponent.setDisabled(e),this}setLanguage(e){let n="language-";for(let r of[this.preEl,this.codeEl]){for(let o of Array.from(r.classList))o.startsWith(n)&&r.classList.remove(o);r.classList.add(`${n}${e}`)}return this}setPlaceholder(e){return this.placeholder=e,ee(this.updateHighlightedCode.bind(this)),this}setPlaceholderValue(e){return this.setPlaceholder(e),this}setTabSize(e){return this.tabSize=e,this}setValue(e){return this.textAreaComponent.setValue(e),ee(this.updateHighlightedCode.bind(this)),this}handleKeyDown(e){if(e.key!=="Tab")return;if(e.preventDefault(),e.ctrlKey||e.metaKey){let d=Array.from(document.querySelectorAll(':is(a, button, input, select, textarea, [tabindex]):not([tabindex="-1"]):not(:disabled):not([type="hidden"])')),p=d.indexOf(this.inputEl),h=e.shiftKey?-1:1;d[(p+h+d.length)%d.length]?.focus();return}let n=this.getValue(),r=this.inputEl.selectionStart,o=this.inputEl.selectionEnd,s=n.slice(0,r),a=n.slice(o),l=" ".repeat(this.tabSize),c=s;e.shiftKey?s.endsWith(l)&&(c=s.slice(0,-this.tabSize)):c=s+l;let u=`${c}${a}`;this.setValue(u),this.inputEl.selectionStart=c.length,this.inputEl.selectionEnd=c.length}handleScroll(){this.preEl.scrollTop=this.inputEl.scrollTop,this.preEl.scrollLeft=this.inputEl.scrollLeft}async updateHighlightedCode(){this.codeEl.textContent=this.inputEl.value||this.placeholder,(await Gl()).highlightElement(this.codeEl),this.preEl.toggleClass(M.IsPlaceholder,this.isEmpty()),requestAnimationFrame(()=>{let n=Math.max(0,this.inputEl.scrollHeight-this.preEl.scrollHeight);this.preEl.setCssProps({"--bottom-gap":Cp(n)}),this.handleScroll()})}};var Hp=require("obsidian");var Do=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ue=class extends Do.ValueComponent{static{i(this,"TypedTextComponent")}inputEl;get validatorEl(){return this.inputEl}textComponent;constructor(e,n,r){super(),this.textComponent=new Do.TextComponent(e),this.inputEl=this.textComponent.inputEl,this.inputEl.type=n,K(e,r)}getValue(){return this.valueFromString(this.textComponent.getValue())}onChange(e){return this.textComponent.onChange(()=>e(this.getValue())),this}onChanged(){this.textComponent.onChanged()}setDisabled(e){return super.setDisabled(e),this.textComponent.setDisabled(e),this}setValue(e){return this.textComponent.setValue(this.valueToString(e)),this}valueToString(e){return String(e)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Re=class extends ue{static{i(this,"TypedRangeTextComponent")}setMax(e){return this.inputEl.max=this.valueToString(e),this}setMin(e){return this.inputEl.min=this.valueToString(e),this}setStep(e){return this.inputEl.step=String(e),this}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Up=Pt(Hp.moment),Wp="YYYY-MM-DD",Bo=class extends Re{static{i(this,"DateComponent")}constructor(e){super(e,"date",M.DateComponent)}valueFromString(e){return Up(e,Wp).toDate()}valueToString(e){return Up(e).format(Wp)}};var qp=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var jp=Pt(qp.moment),Kp="YYYY-MM-DDTHH:mm",_o=class extends Re{static{i(this,"DateTimeComponent")}constructor(e){super(e,"datetime-local",M.DateTimeComponent)}valueFromString(e){return jp(e,Kp).toDate()}valueToString(e){return jp(e).format(Kp)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var $o=class extends ue{static{i(this,"EmailComponent")}constructor(e){super(e,"email",M.EmailComponent)}empty(){this.setValue("")}isEmpty(){return this.getValue()===""}setPlaceholderValue(e){return this.textComponent.setPlaceholder(e),this}valueFromString(e){return e}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Vo=class extends ue{static{i(this,"FileComponent")}constructor(e){super(e,"file",M.FileComponent)}getValue(){return this.inputEl.files?.[0]??null}valueFromString(){return this.getValue()}valueToString(e){return e?.name??""}};var Jp=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Gp=Pt(Jp.moment),Yp="YYYY-MM",zo=class extends Re{static{i(this,"MonthComponent")}constructor(e){super(e,"month",M.MonthComponent)}valueFromString(e){let n=Gp(e,Yp);if(!n.isValid())throw new Error("Invalid month");return{month:n.month()+1,year:n.year()}}valueToString(e){return Gp().year(e.year).month(e.month-1).format(Yp)}};var Uo=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Yn=class extends Uo.ValueComponent{static{i(this,"MultipleDropdownComponent")}get selectEl(){return this.dropdownComponent.selectEl}get validatorEl(){return this.selectEl}dropdownComponent;constructor(e){super(),this.dropdownComponent=new Uo.DropdownComponent(e),this.dropdownComponent.selectEl.multiple=!0,K(e,M.MultipleDropdownComponent)}addOption(e,n){return this.dropdownComponent.addOption(e,n),this}addOptions(e){return this.dropdownComponent.addOptions(e),this}getValue(){return Array.from(this.dropdownComponent.selectEl.selectedOptions).map(e=>e.value)}onChange(e){return this.dropdownComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.dropdownComponent.setDisabled(e),this}setValue(e){for(let n of Array.from(this.dropdownComponent.selectEl.options))n.selected=e.includes(n.value);return this}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Wo=class extends ue{static{i(this,"MultipleEmailComponent")}constructor(e){super(e,"email",M.MultipleEmailComponent),this.inputEl.multiple=!0}valueFromString(e){return e.split(",").map(n=>n.trim())}valueToString(e){return e.join(", ")}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ho=class extends ue{static{i(this,"MultipleFileComponent")}constructor(e){super(e,"file",M.MultipleFileComponent),this.inputEl.multiple=!0}getValue(){return Array.from(this.inputEl.files??[])}valueFromString(){return this.getValue()}valueToString(e){return e[0]?.name??""}};var Ko=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var jo=class extends Ko.ValueComponent{static{i(this,"MultipleTextComponent")}get inputEl(){return this.textAreaComponent.inputEl}get validatorEl(){return this.inputEl}textAreaComponent;constructor(e){super(),this.textAreaComponent=new Ko.TextAreaComponent(e),K(e,M.MultipleTextComponent)}empty(){this.textAreaComponent.setValue("")}getValue(){return this.textAreaComponent.getValue().split(`
`)}isEmpty(){return this.textAreaComponent.getValue()===""}onChange(e){return this.textAreaComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.textAreaComponent.setDisabled(e),this}setPlaceholder(e){return this.textAreaComponent.setPlaceholder(e),this}setPlaceholderValue(e){return this.setPlaceholder(this.valueToString(e)),this}setValue(e){return this.textAreaComponent.setValue(this.valueToString(e)),this}valueToString(e){return e.join(`
`)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var qo=class extends Re{static{i(this,"NumberComponent")}constructor(e){super(e,"number",M.NumberComponent)}empty(){this.textComponent.setValue("")}isEmpty(){return this.textComponent.getValue()===""}setPlaceholder(e){return this.textComponent.setPlaceholder(e),this}setPlaceholderValue(e){return this.textComponent.setPlaceholder(this.valueToString(e)),this}valueFromString(e){return parseInt(e,10)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Go=class extends ue{static{i(this,"PasswordComponent")}constructor(e){super(e,"password",M.PasswordComponent)}setPlaceholder(e){return this.textComponent.setPlaceholder(e),this}valueFromString(e){return e}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Yo=class extends ue{static{i(this,"TelephoneComponent")}constructor(e){super(e,"tel",M.TelephoneComponent)}empty(){this.textComponent.setValue("")}isEmpty(){return this.textComponent.getValue()===""}setPlaceholderValue(e){return this.textComponent.setPlaceholder(e),this}valueFromString(e){return e}};var Rl=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Jo=class extends Re{static{i(this,"TimeComponent")}constructor(e){super(e,"time",M.TimeComponent)}valueFromString(e){return Rl.moment.duration(e)}valueToString(e){let n;return e.milliseconds()>0?n="HH:mm:ss.SSS":e.seconds()>0?n="HH:mm:ss":n="HH:mm",Rl.moment.utc(e.asMilliseconds()).format(n)}};var Qp=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Qo=class extends Qp.ValueComponent{static{i(this,"TriStateCheckboxComponent")}inputEl;get validatorEl(){return this.inputEl}changeCallback;constructor(e){super(),K(e,M.TriStateCheckboxComponent),this.inputEl=e.createEl("input",{type:"checkbox"}),this.inputEl.addEventListener("change",this.onChanged.bind(this))}getValue(){return this.inputEl.indeterminate?null:this.inputEl.checked}onChange(e){return this.changeCallback=e,this}onChanged(){this.changeCallback?.(this.getValue())}setDisabled(e){return super.setDisabled(e),this.inputEl.disabled=e,this}setValue(e){return this.inputEl.indeterminate=e===null,this.inputEl.checked=e??!1,this}};var Zo=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Xo=class extends Zo.ValueComponent{static{i(this,"TypedDropdownComponent")}get selectEl(){return this.dropdownComponent.selectEl}get validatorEl(){return this.selectEl}dropdownComponent;values=[];constructor(e){super(),this.dropdownComponent=new Zo.DropdownComponent(e),K(e,M.TypedDropdownComponent)}addOption(e,n){let r=this.values.indexOf(e);return r===-1&&(this.values.push(e),r=this.values.length-1),this.dropdownComponent.addOption(String(r),n),this}addOptions(e){for(let[n,r]of e.entries())this.addOption(n,r);return this}getValue(){return this.values[this.dropdownComponent.selectEl.selectedIndex]??null}onChange(e){return this.dropdownComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.dropdownComponent.setDisabled(e),this}setValue(e){let n=e===null?-1:this.values.indexOf(e);return this.dropdownComponent.selectEl.selectedIndex=n,this}};var Xp=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var es=class extends Xp.ValueComponent{static{i(this,"TypedMultipleDropdownComponent")}get selectEl(){return this.multipleDropdownComponent.selectEl}get validatorEl(){return this.selectEl}multipleDropdownComponent;values=[];constructor(e){super(),this.multipleDropdownComponent=new Yn(e),K(e,M.TypedMultipleDropdownComponent)}addOption(e,n){let r=this.values.indexOf(e);return r===-1&&(this.values.push(e),r=this.values.length-1),this.multipleDropdownComponent.addOption(String(r),n),this}addOptions(e){for(let[n,r]of e.entries())this.addOption(n,r);return this}getValue(){return this.multipleDropdownComponent.getValue().map(n=>parseInt(n,10)).map(n=>this.values[n]).filter(n=>n!==void 0)}onChange(e){return this.multipleDropdownComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.multipleDropdownComponent.setDisabled(e),this}setValue(e){let n=e.map(r=>this.values.indexOf(r)).filter(r=>r!==-1);return this.multipleDropdownComponent.setValue(n.map(r=>String(r))),this}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ts=class extends ue{static{i(this,"UrlComponent")}constructor(e){super(e,"url",M.UrlComponent)}empty(){this.setValue("")}isEmpty(){return this.getValue()===""}setPlaceholderValue(e){return this.textComponent.setPlaceholder(e),this}valueFromString(e){return e}};var th=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Zp=Pt(th.moment),eh="YYYY-[W]WW",ns=class extends Re{static{i(this,"WeekComponent")}constructor(e){super(e,"week",M.WeekComponent)}valueFromString(e){let n=Zp(e,eh);if(!n.isValid())throw new Error("Invalid week");return{weekNumber:n.isoWeek(),year:n.year()}}valueToString(e){return Zp().year(e.year).isoWeek(e.weekNumber).format(eh)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var be=class extends Fr.Setting{static{i(this,"SettingEx")}addCheckbox(e){return this.addComponentClass(No,e)}addCodeHighlighter(e){return this.addComponentClass(Oo,e)}addComponentClass(e,n){return this.addComponentSafe(r=>{let o=new e(r);return n(o),o})}addDate(e){return this.addComponentClass(Bo,e)}addDateTime(e){return this.addComponentClass(_o,e)}addEmail(e){return this.addComponentClass($o,e)}addFile(e){return this.addComponentClass(Vo,e)}addMonth(e){return this.addComponentClass(zo,e)}addMultipleDropdown(e){return this.addComponentClass(Yn,e)}addMultipleEmail(e){return this.addComponentClass(Wo,e)}addMultipleFile(e){return this.addComponentClass(Ho,e)}addMultipleText(e){return this.addComponentClass(jo,e)}addNumber(e){return this.addComponentClass(qo,e)}addPassword(e){return this.addComponentClass(Go,e)}addTelephone(e){return this.addComponentClass(Yo,e)}addTime(e){return this.addComponentClass(Jo,e)}addTriStateCheckbox(e){return this.addComponentClass(Qo,e)}addTypedDropdown(e){return this.addComponentClass(Xo,e)}addTypedMultipleDropdown(e){return this.addComponentClass(es,e)}addUrl(e){return this.addComponentClass(ts,e)}addWeek(e){return this.addComponentClass(ns,e)}addComponentSafe(e){return(0,Fr.requireApiVersion)("1.11.0")?this.addComponent(n=>((0,Fr.requireApiVersion)("0.16.0"),e(n))):(this.components.push(e(this.controlEl)),this)}};var rs=class extends Lo{static{i(this,"PluginSettingsTab")}display(){super.display(),this.containerEl.empty();let e="Move Attachments with Note";new be(this.containerEl).setName(e).setDesc("Automatically move attachments when a note is relocated. This includes attachments located in the same folder or any of its subfolders.").addToggle(s=>this.bind(s,"shouldMoveAttachmentsWithNote",{onChanged:i(async()=>{await this.checkDangerousSetting("shouldMoveAttachmentsWithNote",e)},"onChanged")}));let n="Delete Unused Attachments with Note";new be(this.containerEl).setName(n).setDesc("Automatically remove attachments that are no longer referenced in other notes when the note is deleted.").addToggle(s=>this.bind(s,"shouldDeleteAttachmentsWithNote",{onChanged:i(async()=>{await this.checkDangerousSetting("shouldDeleteAttachmentsWithNote",n)},"onChanged")})),new be(this.containerEl).setName("Update links").setDesc("Automatically update links to attachments and other notes when moving notes or attachments.").addToggle(s=>this.bind(s,"shouldUpdateLinks")),new be(this.containerEl).setName("Empty attachment folder behavior").setDesc(createFragment(s=>{s.appendText("When the attachment folder becomes empty, "),s.createEl("br"),te(s,"Keep"),s.appendText(" - will keep the empty attachment folder, "),s.createEl("br"),te(s,"Delete"),s.appendText(" - will delete the empty attachment folder, "),s.createEl("br"),te(s,"Delete with empty parents"),s.appendText(" - will delete the empty attachment folder and its empty parent folders.")})).addDropdown(s=>{s.addOptions({[ge.Keep]:"Keep",[ge.Delete]:"Delete",[ge.DeleteWithEmptyParents]:"Delete with empty parents"}),this.bind(s,"emptyAttachmentFolderBehavior",{componentToPluginSettingsValueConverter:i(a=>Dp(ge,a),"componentToPluginSettingsValueConverter"),pluginSettingsToComponentValueConverter:i(a=>Rp(ge,a),"pluginSettingsToComponentValueConverter")})});let r="Delete Duplicate Attachments on Note Move";new be(this.containerEl).setName(r).setDesc("Automatically delete attachments when moving a note if a file with the same name exists in the destination folder. If disabled, the file will be renamed and moved.").addToggle(s=>this.bind(s,"shouldDeleteExistingFilesWhenMovingNote",{onChanged:i(async()=>{await this.checkDangerousSetting("shouldDeleteExistingFilesWhenMovingNote",r)},"onChanged")})),new be(this.containerEl).setName("Update backlink text on note rename").setDesc("When a note is renamed, its linked references are automatically updated. If this option is enabled, the text of backlinks to this note will also be modified.").addToggle(s=>this.bind(s,"shouldChangeNoteBacklinksDisplayText")),new be(this.containerEl).setName("Consistency report filename").setDesc("Specify the name of the file for the consistency report.").addText(s=>{this.bind(s,"consistencyReportFile")});let o="Auto Collect Attachments";new be(this.containerEl).setName(o).setDesc("Automatically collect attachments when the note is edited.").addToggle(s=>this.bind(s,"shouldCollectAttachmentsAutomatically",{onChanged:i(async()=>{await this.checkDangerousSetting("shouldCollectAttachmentsAutomatically",o)},"onChanged")})),new be(this.containerEl).setName("Include paths").setDesc(createFragment(s=>{s.appendText("Include notes from the following paths"),s.createEl("br"),s.appendText("Insert each path on a new line"),s.createEl("br"),s.appendText("You can use path string or "),te(s,"/regular expression/"),s.createEl("br"),s.appendText("If the setting is empty, all notes are included")})).addMultipleText(s=>{this.bind(s,"includePaths")}),new be(this.containerEl).setName("Exclude paths").setDesc(createFragment(s=>{s.appendText("Exclude notes from the following paths"),s.createEl("br"),s.appendText("Insert each path on a new line"),s.createEl("br"),s.appendText("You can use path string or "),te(s,"/regular expression/"),s.createEl("br"),s.appendText("If the setting is empty, no notes are excluded")})).addMultipleText(s=>{this.bind(s,"excludePaths")}),new be(this.containerEl).setName("Exclude paths from attachment collecting").setDesc(createFragment(s=>{s.appendText("Exclude attachments from the following paths when "),te(s,"Collect attachments"),s.appendText(" command is executed."),s.createEl("br"),s.appendText("Insert each path on a new line"),s.createEl("br"),s.appendText("You can use path string or "),te(s,"/regular expression/"),s.createEl("br"),s.appendText("If the setting is empty, no paths are excluded from attachment collecting.")})).addMultipleText(s=>{this.bind(s,"excludePathsFromAttachmentCollecting")}),new be(this.containerEl).setName("Treat as attachment extensions").setDesc(createFragment(s=>{s.appendText("Treat files with these extensions as attachments."),s.createEl("br"),s.appendText("By default, "),te(s,".md"),s.appendText(" and "),te(s,".canvas"),s.appendText(" linked files are not treated as attachments and are not moved with the note."),s.createEl("br"),s.appendText("You can add custom extensions, e.g. "),te(s,".foo.md"),s.appendText(", "),te(s,".bar.canvas"),s.appendText(", to override this behavior."),s.createEl("br"),s.appendText("Insert each extension on a new line.")})).addMultipleText(s=>{this.bind(s,"treatAsAttachmentExtensions")}),new be(this.containerEl).setName(E(s=>s.pluginSettingsTab.collectAttachmentUsedByMultipleNotesMode.name)).setDesc(createFragment(s=>{s.appendText(E(a=>a.pluginSettingsTab.collectAttachmentUsedByMultipleNotesMode.description.part1)),s.createEl("br"),te(s,E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.skip.displayText)),s.appendText(" - "),s.appendText(E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.skip.description)),s.createEl("br"),te(s,E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.move.displayText)),s.appendText(" - "),s.appendText(E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.move.description)),s.createEl("br"),te(s,E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.copy.displayText)),s.appendText(" - "),s.appendText(E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.copy.description)),s.createEl("br"),te(s,E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.cancel.displayText)),s.appendText(" - "),s.appendText(E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.cancel.description)),s.createEl("br"),te(s,E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.prompt.displayText)),s.appendText(" - "),s.appendText(E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.prompt.description))})).addDropdown(s=>{s.addOptions({Skip:E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.skip.displayText),Move:E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.move.displayText),Copy:E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.copy.displayText),Cancel:E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.cancel.displayText),Prompt:E(a=>a.pluginSettings.collectAttachmentUsedByMultipleNotesMode.prompt.displayText)}),this.bind(s,"collectAttachmentUsedByMultipleNotesMode")}),new be(this.containerEl).setName(E(s=>s.pluginSettingsTab.moveAttachmentToProperFolderUsedByMultipleNotesMode.name)).setDesc(createFragment(s=>{s.appendText(E(a=>a.pluginSettingsTab.moveAttachmentToProperFolderUsedByMultipleNotesMode.description.part1)),s.createEl("br"),te(s,E(a=>a.pluginSettings.moveAttachmentToProperFolderUsedByMultipleNotesMode.skip.displayText)),s.appendText(" - "),s.appendText(E(a=>a.pluginSettings.moveAttachmentToProperFolderUsedByMultipleNotesMode.skip.description)),s.createEl("br"),te(s,E(a=>a.pluginSettings.moveAttachmentToProperFolderUsedByMultipleNotesMode.copyAll.displayText)),s.appendText(" - "),s.appendText(E(a=>a.pluginSettings.moveAttachmentToProperFolderUsedByMultipleNotesMode.copyAll.description)),s.createEl("br"),te(s,E(a=>a.pluginSettings.moveAttachmentToProperFolderUsedByMultipleNotesMode.cancel.displayText)),s.appendText(" - "),s.appendText(E(a=>a.pluginSettings.moveAttachmentToProperFolderUsedByMultipleNotesMode.cancel.description)),s.createEl("br"),te(s,E(a=>a.pluginSettings.moveAttachmentToProperFolderUsedByMultipleNotesMode.prompt.displayText)),s.appendText(" - "),s.appendText(E(a=>a.pluginSettings.moveAttachmentToProperFolderUsedByMultipleNotesMode.prompt.description))})).addDropdown(s=>{s.addOptions({Skip:E(a=>a.pluginSettings.moveAttachmentToProperFolderUsedByMultipleNotesMode.skip.displayText),CopyAll:E(a=>a.pluginSettings.moveAttachmentToProperFolderUsedByMultipleNotesMode.copyAll.displayText),Cancel:E(a=>a.pluginSettings.moveAttachmentToProperFolderUsedByMultipleNotesMode.cancel.displayText),Prompt:E(a=>a.pluginSettings.moveAttachmentToProperFolderUsedByMultipleNotesMode.prompt.displayText)}),this.bind(s,"moveAttachmentToProperFolderUsedByMultipleNotesMode")})}async checkDangerousSetting(e,n){this.plugin.settings[e]&&await si({app:this.app,message:createFragment(r=>{r.createDiv({cls:"community-modal-readme"},o=>{o.appendText("You enabled "),o.createEl("strong",{cls:"markdown-rendered-code",text:n}),o.appendText(" setting. Without proper configuration it might lead to inconvenient attachment rearrangements or even data loss in your vault."),o.createEl("br"),o.appendText("It is "),o.createEl("strong",{text:"STRONGLY"}),o.appendText(" recommended to backup your vault before using the plugin."),o.createEl("br"),o.createEl("a",{href:"https://github.com/dy-sh/obsidian-consistent-attachments-and-links?tab=readme-ov-file",text:"Read more"}),o.appendText(" about how to use the plugin.")})}),title:createFragment(r=>{(0,nh.setIcon)(r.createSpan(),"triangle-alert"),r.appendText(" Consistent Attachments and Links")})})}};var is=class extends di{static{i(this,"Plugin")}deletedNoteCache=new Map;linksHandler=new qn(this);filesHandler=new Gn(this,this.linksHandler);async checkConsistency(){await this.saveAllOpenNotes();let e=new Ot("Bad links"),n=new Ot("Bad embeds"),r=new Ot("Wiki links"),o=new Ot("Wiki embeds"),s=new Ot("Bad frontmatter links");await ht({abortSignal:this.abortSignal,buildNoticeMessage:i((d,p)=>`Checking note ${p} - ${d.path}`,"buildNoticeMessage"),items:Bn(this.app),processItem:i(async d=>{await this.linksHandler.checkConsistency(d,e,n,r,o,s)},"processItem"),progressBarTitle:"Consistent Attachments and Links: Checking vault consistency...",shouldContinueOnError:!0,shouldShowProgressBar:!0});let a=this.settings.consistencyReportFile,l=[e,n,r,o,s].map(d=>d.toString(this.app,a)).join("");await Dn(this.app,q(a));let c=await lc(this.app,a);await this.app.vault.modify(c,l);let u=!1;this.app.workspace.iterateAllLeaves(d=>{d.getDisplayText()!==""&&a.startsWith(d.getDisplayText())&&(u=!0)}),u||await this.app.workspace.openLinkText(a,"/",!1)}async convertAllEmbedsPathsToRelative(){await this.saveAllOpenNotes();let e=0,n=0;await ht({abortSignal:this.abortSignal,buildNoticeMessage:i((r,o)=>`Converting embed paths to relative ${o} - ${r.path}`,"buildNoticeMessage"),items:Bn(this.app),processItem:i(async r=>{if(this.settings.isPathIgnored(r.path))return;let o=await this.linksHandler.convertAllNoteEmbedsPathsToRelative(r.path,this.abortSignal);o.length>0&&(e+=o.length,n++)},"processItem"),progressBarTitle:"Consistent Attachments and Links: Converting embed paths to relative...",shouldContinueOnError:!0,shouldShowProgressBar:!0}),e===0?new De.Notice("No embeds found that need to be converted"):new De.Notice(`Converted ${String(e)} embed${e>1?"s":""} from ${String(n)} note${n>1?"s":""}`)}convertAllEmbedsPathsToRelativeCurrentNote(e){$e({abortSignal:this.abortSignal,app:this.app,operationFn:er(n=>this.linksHandler.convertAllNoteEmbedsPathsToRelative(e.path,n)),operationName:"Convert all embed paths to relative in current note"})}async convertAllLinkPathsToRelative(e){e.throwIfAborted(),await this.saveAllOpenNotes(),e.throwIfAborted();let n=0,r=0;await ht({abortSignal:e,buildNoticeMessage:i((o,s)=>`Converting link paths to relative ${s} - ${o.path}`,"buildNoticeMessage"),items:Bn(this.app),processItem:i(async o=>{if(this.settings.isPathIgnored(o.path))return;let s=await this.linksHandler.convertAllNoteLinksPathsToRelative(o.path,e);s.length>0&&(n+=s.length,r++)},"processItem"),progressBarTitle:"Consistent Attachments and Links: Converting link paths to relative...",shouldContinueOnError:!0,shouldShowProgressBar:!0}),n===0?new De.Notice("No links found that need to be converted"):new De.Notice(`Converted ${String(n)} link${n>1?"s":""} from ${String(r)} note${r>1?"s":""}`)}convertAllLinkPathsToRelativeCurrentNote(e){$e({abortSignal:this.abortSignal,app:this.app,operationFn:er(n=>this.linksHandler.convertAllNoteLinksPathsToRelative(e.path,n)),operationName:"Convert all link paths to relative in current note"})}async deleteEmptyFolders(){await this.filesHandler.deleteEmptyFolders("/")}async onLoadSettings(e,n){await super.onLoadSettings(e,n),e.settings.revertDangerousSettings()}async onSaveSettings(e,n,r){await super.onSaveSettings(e,n,r),this.linksHandler=new qn(this),this.filesHandler=new Gn(this,this.linksHandler)}async reorganizeVault(){await this.saveAllOpenNotes(),await this.replaceAllWikilinksWithMarkdownLinks(),await this.replaceAllWikiEmbedsWithMarkdownEmbeds(),await this.convertAllEmbedsPathsToRelative(),await this.convertAllLinkPathsToRelative(this.abortSignal),Zi(this),await this.deleteEmptyFolders(),new De.Notice("Reorganization of the vault completed")}async replaceAllWikiEmbedsWithMarkdownEmbeds(){await this.saveAllOpenNotes();let e=0,n=0;await ht({abortSignal:this.abortSignal,buildNoticeMessage:i((r,o)=>`Replacing wiki embeds with markdown embeds ${o} - ${r.path}`,"buildNoticeMessage"),items:Bn(this.app),processItem:i(async r=>{if(this.settings.isPathIgnored(r.path))return;let o=await this.linksHandler.replaceAllNoteWikilinksWithMarkdownLinks(r.path,!0,this.abortSignal);e+=o,n++},"processItem"),progressBarTitle:"Consistent Attachments and Links: Replacing wiki embeds with markdown embeds...",shouldContinueOnError:!0,shouldShowProgressBar:!0}),e===0?new De.Notice("No wiki embeds found that need to be replaced"):new De.Notice(`Replaced ${String(e)} wiki embed${e>1?"s":""} from ${String(n)} note${n>1?"s":""}`)}replaceAllWikiEmbedsWithMarkdownEmbedsCurrentNote(e){$e({abortSignal:this.abortSignal,app:this.app,operationFn:er(n=>this.linksHandler.replaceAllNoteWikilinksWithMarkdownLinks(e.path,!0,n)),operationName:"Replace all wiki embeds with markdown embeds in current note"})}async replaceAllWikilinksWithMarkdownLinks(){await this.saveAllOpenNotes();let e=0,n=0;await ht({abortSignal:this.abortSignal,buildNoticeMessage:i((r,o)=>`Replacing wikilinks with markdown links ${o} - ${r.path}`,"buildNoticeMessage"),items:Bn(this.app),processItem:i(async r=>{if(this.settings.isPathIgnored(r.path))return;let o=await this.linksHandler.replaceAllNoteWikilinksWithMarkdownLinks(r.path,!1,this.abortSignal);e+=o,n++},"processItem"),progressBarTitle:"Consistent Attachments and Links: Replacing wikilinks with markdown links...",shouldContinueOnError:!0,shouldShowProgressBar:!0}),e===0?new De.Notice("No wiki links found that need to be replaced"):new De.Notice(`Replaced ${String(e)} wikilink${e>1?"s":""} from ${String(n)} note${n>1?"s":""}`)}replaceAllWikilinksWithMarkdownLinksCurrentNote(e){$e({abortSignal:this.abortSignal,app:this.app,operationFn:er(n=>this.linksHandler.replaceAllNoteWikilinksWithMarkdownLinks(e.path,!1,n)),operationName:"Replace all wiki embeds with markdown embeds in current note"})}createSettingsManager(){return new Fo(this)}createSettingsTab(){return new rs(this)}createTranslationsMap(){return Lp}async onLayoutReady(){await this.showBackupWarning(),this.registerEvent(this.app.metadataCache.on("deleted",(e,n)=>{n&&this.handleDeletedMetadata(e,n)})),this.registerEvent(this.app.metadataCache.on("changed",e=>{$e({abortSignal:this.abortSignal,app:this.app,operationFn:i(n=>this.handleMetadataCacheChanged(e,n),"operationFn"),operationName:"handleMetadataCacheChanged"})}))}async onloadImpl(){await super.onloadImpl(),yp(this,()=>({emptyAttachmentFolderBehavior:this.settings.emptyAttachmentFolderBehavior,isNote:i(n=>this.filesHandler.isNoteEx(n),"isNote"),isPathIgnored:i(n=>this.settings.isPathIgnored(n),"isPathIgnored"),shouldDeleteConflictingAttachments:this.settings.shouldDeleteExistingFilesWhenMovingNote,shouldHandleDeletions:this.settings.shouldDeleteAttachmentsWithNote,shouldHandleRenames:this.settings.shouldUpdateLinks,shouldRenameAttachmentFolder:this.settings.shouldMoveAttachmentsWithNote,shouldUpdateFileNameAliases:this.settings.shouldChangeNoteBacklinksDisplayText})),new so(this).register(),new oo(this).register(),new no(this).register(),new ho(this).register(),new po(this).register(),new co(this).register(),new uo(this).register(),new ao(this).register(),new lo(this).register(),new wo(this).register(),new yo(this).register(),new go(this).register(),new bo(this).register(),new mo(this).register(),new to(this).register(),this.linksHandler=new qn(this),this.filesHandler=new Gn(this,this.linksHandler)}handleDeletedMetadata(e,n){!this.settings.shouldDeleteAttachmentsWithNote||this.settings.isPathIgnored(e.path)||!qe(this.app,e)||this.deletedNoteCache.set(e.path,n)}async handleMetadataCacheChanged(e,n){n.throwIfAborted(),!(!this.settings.shouldCollectAttachmentsAutomatically||activeDocument.querySelector(".suggestion-container")?.isShown())&&Hn(this,[e])}async saveAllOpenNotes(){for(let e of this.app.workspace.getLeavesOfType("markdown"))e.view instanceof De.MarkdownView&&await e.view.save()}async showBackupWarning(){this.settings.shouldShowBackupWarning&&(await si({app:this.app,message:createFragment(e=>{e.createDiv({cls:"community-modal-readme"},n=>{n.appendText("Using 'Consistent Attachments and Links' plugin without proper configuration might lead to inconvenient attachment rearrangements or even data loss in your vault."),n.createEl("br"),n.appendText("It is "),n.createEl("strong",{text:"STRONGLY"}),n.appendText(" recommended to backup your vault before using the plugin."),n.createEl("br"),this.settings.hadDangerousSettingsReverted&&(n.appendText("Some of your plugin settings has been changed to their safe values."),n.createEl("br")),n.createEl("a",{href:"https://github.com/dy-sh/obsidian-consistent-attachments-and-links?tab=readme-ov-file",text:"Read more"}),n.appendText(" about how to use the plugin."),n.createEl("br"),n.appendText("This warning will not appear again.")})}),title:createFragment(e=>{(0,De.setIcon)(e.createSpan(),"triangle-alert"),e.appendText(" Consistent Attachments and Links")})}),await this.settingsManager.editAndSave(e=>{e.shouldShowBackupWarning=!1}))}};var Jb=is;

/* nosourcemap */